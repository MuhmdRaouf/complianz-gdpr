function rsp_install_pro_destination_clear(){rsp_progress_bar_start();const c=window.location.search;const a=new URLSearchParams(c);var b={action:"rsp_upgrade_destination_clear",token:rsp_upgrade.token,plugin:a.get("plugin")};ajax.get(rsp_upgrade.admin_url,b,function(d){var g=document.getElementsByClassName("step-destination-clear");var e=g[0].getElementsByClassName("step-color");var f=g[0].getElementsByClassName("step-text");var h=JSON.parse(d);if(h&&h.success!=undefined){if(h.success){e[0].innerHTML="<div class='rsp-green rsp-bullet'></div>";f[0].innerHTML="<span>Destination clear</span>";rsp_progress_bar_finish();rsp_install_pro_activate_licence()}else{e[0].innerHTML="<div class='rsp-red rsp-bullet'></div>";f[0].innerHTML="<span>Destination folder already exists</span>";rsp_progress_bar_stop();document.getElementsByClassName("rsp-btn rsp-cancel")[0].classList.remove("rsp-hidden")}}})}function rsp_install_pro_activate_licence(){rsp_progress_bar_start();const c=window.location.search;const a=new URLSearchParams(c);var b={action:"rsp_upgrade_activate_license",token:rsp_upgrade.token,license:a.get("license"),item_id:a.get("item_id"),api_url:a.get("api_url")};ajax.get(rsp_upgrade.admin_url,b,function(d){var h=document.getElementsByClassName("step-activate-license");var e=h[0].getElementsByClassName("step-color");var f=h[0].getElementsByClassName("step-text");var g=JSON.parse(d);if(g&&g.status!=undefined){if(g.status=="valid"){e[0].innerHTML="<div class='rsp-green rsp-bullet'></div>";f[0].innerHTML="<span>License activated</span>";rsp_progress_bar_finish();rsp_install_pro_get_package_information()}if(g.status=="invalid"){e[0].innerHTML="<div class='rsp-red rsp-bullet'></div>";f[0].innerHTML="<span>License invalid</span>";rsp_progress_bar_stop();document.getElementsByClassName("rsp-btn rsp-cancel")[0].classList.remove("rsp-hidden")}if(g.status=="error"){e[0].innerHTML="<div class='rsp-red rsp-bullet'></div>";f[0].innerHTML="<span>"+g.message+"</span>";rsp_progress_bar_stop();document.getElementsByClassName("rsp-btn rsp-cancel")[0].classList.remove("rsp-hidden")}}})}function rsp_install_pro_get_package_information(){rsp_progress_bar_start();const c=window.location.search;const a=new URLSearchParams(c);var b={action:"rsp_upgrade_package_information",token:rsp_upgrade.token,license:a.get("license"),item_id:a.get("item_id"),api_url:a.get("api_url")};ajax.get(rsp_upgrade.admin_url,b,function(d){var h=document.getElementsByClassName("step-package-information");var e=h[0].getElementsByClassName("step-color");var f=h[0].getElementsByClassName("step-text");var g=JSON.parse(d);if(g&&g.success!=undefined){if(g.success){e[0].innerHTML="<div class='rsp-green rsp-bullet'></div>";f[0].innerHTML="<span>Package information gathered</span>";rsp_progress_bar_finish();rsp_install_pro_install_plugin(g.download_link)}else{e[0].innerHTML="<div class='rsp-red rsp-bullet'></div>";f[0].innerHTML="<span>Failed to gather package information</span>";rsp_progress_bar_stop();document.getElementsByClassName("rsp-btn rsp-cancel")[0].classList.remove("rsp-hidden")}}})}function rsp_install_pro_install_plugin(c){rsp_progress_bar_start();const d=window.location.search;const a=new URLSearchParams(d);var b={action:"rsp_upgrade_install_plugin",token:rsp_upgrade.token,download_link:c,license:a.get("license"),item_id:a.get("item_id"),api_url:a.get("api_url")};ajax.get(rsp_upgrade.admin_url,b,function(f){var e=document.getElementsByClassName("step-install-plugin");var g=e[0].getElementsByClassName("step-color");var h=e[0].getElementsByClassName("step-text");var i=JSON.parse(f);if(i&&i.success!=undefined){if(i.success){g[0].innerHTML="<div class='rsp-green rsp-bullet'></div>";h[0].innerHTML="<span>Plugin installed</span>";rsp_progress_bar_finish();rsp_install_pro_activate_plugin()}else{g[0].innerHTML="<div class='rsp-red rsp-bullet'></div>";h[0].innerHTML="<span>Failed to install plugin</span>";rsp_progress_bar_stop();document.getElementsByClassName("rsp-btn rsp-cancel")[0].classList.remove("rsp-hidden")}}})}function rsp_install_pro_activate_plugin(){rsp_progress_bar_start();const c=window.location.search;const a=new URLSearchParams(c);var b={action:"rsp_upgrade_activate_plugin",token:rsp_upgrade.token,plugin:a.get("plugin")};ajax.get(rsp_upgrade.admin_url,b,function(d){var f=document.getElementsByClassName("step-activate-plugin");var e=f[0].getElementsByClassName("step-color");var g=f[0].getElementsByClassName("step-text");var h=JSON.parse(d);if(h&&h.success!=undefined){if(h.success){e[0].innerHTML="<div class='rsp-green rsp-bullet'></div>";g[0].innerHTML="<span>Plugin activated</span>";rsp_progress_bar_finish();rsp_install_pro_activate_license_plugin()}else{e[0].innerHTML="<div class='rsp-red rsp-bullet'></div>";g[0].innerHTML="<span>Failed to activate plugin</span>";rsp_progress_bar_stop();document.getElementsByClassName("rsp-btn rsp-cancel")[0].classList.remove("rsp-hidden")}}})}function rsp_install_pro_activate_license_plugin(){rsp_progress_bar_start();const c=window.location.search;const a=new URLSearchParams(c);if(a.get("plugin")=="cmplz_pro"){var b={cmplz_nonce:rsp_upgrade.cmplz_nonce,cmplz_license_activate:true,cmplz_license_save:true,cmplz_license_key:a.get("license")}}if(a.get("license")=="rsssl_pro"){var b={action:"rsp_upgrade_activate_plugin",rsssl_pro_nonce:rsp_upgrade.rsssl_pro_nonce,rsssl_pro_license_activate:true,rsssl_pro_license_key:a.get("license")}}ajax.post(rsp_upgrade.admin_url,b,function(d){var g=document.getElementsByClassName("step-activate-license-plugin");var e=g[0].getElementsByClassName("step-color");var f=g[0].getElementsByClassName("step-text");e[0].innerHTML="<div class='rsp-green rsp-bullet'></div>";f[0].innerHTML="<span>Plugin license activated</span>";rsp_progress_bar_finish();if(a.get("plugin")=="cmplz_pro"){rsp_install_pro_deactivate_plugin()}else{document.getElementsByClassName("rsp-btn rsp-visit-dashboard")[0].classList.remove("rsp-hidden")}})}function rsp_install_pro_deactivate_plugin(){rsp_progress_bar_start();var a={action:"rsp_upgrade_deactivate_plugin",token:rsp_upgrade.token};ajax.get(rsp_upgrade.admin_url,a,function(b){var e=document.getElementsByClassName("step-deactivate-plugin");var c=e[0].getElementsByClassName("step-color");var d=e[0].getElementsByClassName("step-text");c[0].innerHTML="<div class='rsp-green rsp-bullet'></div>";d[0].innerHTML="<span>Free plugin deactivated</span>";rsp_progress_bar_finish();document.getElementsByClassName("rsp-btn rsp-visit-dashboard")[0].classList.remove("rsp-hidden")})}const queryString=window.location.search;const urlParams=new URLSearchParams(queryString);let rsp_progress_bar={current_step:1,total_steps:6,progress_procentage:0,speed:1};if(urlParams.get("plugin")=="cmplz_pro"){rsp_progress_bar={current_step:1,total_steps:7,progress_procentage:0,speed:1}}function rsp_progress_bar_start(){rsp_progress_bar.speed=0.25;rsp_progress_bar_move()}function rsp_progress_bar_finish(){rsp_progress_bar.speed=1}function rsp_progress_bar_stop(){rsp_progress_bar.speed=0}function rsp_progress_bar_move(){var d=rsp_progress_bar.current_step*100/rsp_progress_bar.total_steps;rsp_progress_bar.progress_procentage=Math.min(rsp_progress_bar.progress_procentage+rsp_progress_bar.speed,d);var a=document.getElementsByClassName("progress-bar-container");var b=a[0].getElementsByClassName("progress");var c=b[0].getElementsByClassName("bar");c[0].style="width: "+rsp_progress_bar.progress_procentage+"%;";if(rsp_progress_bar.speed!=0&&rsp_progress_bar.progress_procentage<d){setTimeout(rsp_progress_bar_move,25/rsp_progress_bar.speed)}else{if(rsp_progress_bar.speed==0){c[0].style="width: 100%;";c[0].classList.remove("rsp-green");c[0].classList.add("rsp-red")}else{rsp_progress_bar.current_step++}}}rsp_install_pro_destination_clear();