{"version":3,"file":"src_Dashboard_Documents_OtherDocuments_js.js","mappings":"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","sources":["webpack://complianz-gdpr/./src/Dashboard/Documents/DocumentsData.js","webpack://complianz-gdpr/./src/Dashboard/Documents/OtherDocuments.js","webpack://complianz-gdpr/./src/Dashboard/Documents/SingleDocument.js"],"sourcesContent":["import {create} from 'zustand';\nimport * as cmplz_api from \"../../utils/api\";\n\nconst useDocuments = create(( set, get ) => ({\n\tdocuments:[],\n\tdocumentDataLoaded:false,\n\tprocessingAgreementOptions:[],\n\tproofOfConsentOptions:[],\n\tdataBreachOptions:[],\n\tregion:'',\n\tsetRegion: (region) => {\n\t\tif (typeof (Storage) !== \"undefined\" ) {\n\t\t\tsessionStorage.cmplzSelectedRegion = region;\n\t\t}\n\t\tset(state => ({ region:region}));\n\t},\n\tgetRegion: () => {\n\t\tlet region = 'all';\n\t\tif (typeof (Storage) !== \"undefined\"){\n\t\t\tif (sessionStorage.cmplzSelectedRegion) {\n\t\t\t\tregion = sessionStorage.cmplzSelectedRegion;\n\t\t\t}\n\t\t}\n\t\tset(state => ({ region:region}));\n\t},\n\tgetDocuments: async () => {\n\t\tconst {documents, processingAgreementOptions, proofOfConsentOptions,dataBreachOptions} = await cmplz_api.doAction('documents_block_data').then( ( response ) => {\n\t\t\treturn response;\n\t\t});\n\t\tset(state => ({ documentDataLoaded:true,documents:documents, processingAgreementOptions:processingAgreementOptions, proofOfConsentOptions:proofOfConsentOptions,dataBreachOptions:dataBreachOptions}));\n\t},\n\n}));\n\nexport default useDocuments;\n\n","import { __ } from '@wordpress/i18n';\nimport {\n\tuseState, useEffect\n} from '@wordpress/element';\nimport useDocuments from \"./DocumentsData\";\nimport useFields from \"../../Settings/Fields/FieldsData\";\nimport SingleDocument from \"./SingleDocument\";\n\nconst OtherDocuments = () => {\n\tconst {getFieldValue, fields} = useFields();\n\tconst [recordsOfConsentEnabled, setRecordsOfConsentEnabled] = useState(false);\n\tuseEffect (() => {\n\t\tsetRecordsOfConsentEnabled(getFieldValue('records_of_consent'));\n\t},[fields]);\n\n\tconst { processingAgreementOptions, dataBreachOptions, proofOfConsentOptions } = useDocuments();\n\treturn (\n\t\t<>\n\t\t\t<h3 className=\"cmplz-h4\">{__(\"Other documents\")}</h3>\n\t\t\t<SingleDocument type=\"processing-agreements\" link=\"#tools/processing-agreements\" name={__(\"Processing Agreement\",\"complianz-gdpr\")} options={processingAgreementOptions}/>\n\t\t\t<SingleDocument type=\"data-breaches\" link=\"#tools/data-breach-reports\" name={__(\"Data Breach\",\"complianz-gdpr\")} options={dataBreachOptions}/>\n\t\t\t<SingleDocument type=\"proof-of-consent\" link={recordsOfConsentEnabled ? \"#tools/records-of-consent\" : \"#tools/proof-of-consent\"} name={__(\"Proof of Consent\",\"complianz-gdpr\")} options={proofOfConsentOptions}/>\n\t\t</>\n\t)\n}\nexport default OtherDocuments;\n","import {SelectControl} from \"@wordpress/components\";\nimport Icon from \"../../utils/Icon\";\nimport { __ } from '@wordpress/i18n';\n\nimport {\n\tuseState, useEffect\n} from '@wordpress/element';\nconst SingleDocument = (props) => {\n\tconst [url, setUrl] = useState(false);\n\tconst [disabled, setDisabled] = useState(false);\n\tconst [options, setOptions] = useState(false);\n\n\tuseEffect( () => {\n\t\tlet options = props.options;\n\t\tif ( options.length===0) {\n\t\t\tlet emptyOption = {label:__(\"Generate a %s\",\"complianz-gdpr\").replace('%s',props.name), value:0};\n\t\t\toptions.unshift(emptyOption);\n\t\t} else {\n\t\t\t//if options does not include an option with value 0, add it.\n\t\t\tif ( !options.filter( (option) => option.value === 0).length>0 ) {\n\t\t\t\tlet emptyOption = {label:__(\"Select a %s\",\"complianz-gdpr\").replace('%s',props.name), value:0};\n\t\t\t\toptions.unshift(emptyOption);\n\t\t\t}\n\n\t\t}\n\t\tsetOptions(options);\n\n\t}, [props.options] );\n\n\tconst Download = () => {\n\t\tif (disabled) return;\n\t\tsetDisabled(true);\n\t\tlet request = new XMLHttpRequest();\n\t\trequest.responseType = 'blob';\n\t\trequest.open('get', url, true);\n\t\trequest.send();\n\t\trequest.onreadystatechange = function() {\n\t\t\tif (this.readyState == 4 && this.status == 200) {\n\t\t\t\tvar obj = window.URL.createObjectURL(this.response);\n\n\t\t\t\tvar element = window.document.createElement('a');\n\t\t\t\telement.setAttribute('href',obj);\n\t\t\t\telement.setAttribute('download', options.filter( (option) => option.value ===url)[0].label);\n\t\t\t\twindow.document.body.appendChild(element);\n\t\t\t\t//onClick property\n\t\t\t\telement.click();\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\twindow.URL.revokeObjectURL(obj);\n\t\t\t\t}, 60 * 1000);\n\t\t\t}\n\t\t};\n\n\t\trequest.onprogress = function(e) {\n\t\t\tsetDisabled(true);\n\t\t};\n\t}\n\treturn (\n\t\t<div className=\"cmplz-single-document-other-documents\">\n\t\t\t<SelectControl\n\t\t\t\tonChange={ ( fieldValue ) => setUrl(fieldValue) }\n\t\t\t\tvalue= { url }\n\t\t\t\toptions={ options }\n\t\t\t/>\n\t\t\t<div onClick={()=> Download()}>\n\t\t\t\t<Icon name={'file-download'} color={ (url!=0 && !disabled) ? 'black' : 'grey'} tooltip={__(\"Download file\",\"complianz-gdpr\")} size={14} />\n\t\t\t</div>\n\t\t\t{options.length>0 &&\n\t\t\t\t<a href={props.link}><Icon name={'circle-chevron-right'} color=\"black\" tooltip={__(\"Go to overview\",\"complianz-gdpr\")} size={14} /></a>}\n\t\t\t{options.length===0 &&\n\t\t\t\t<a href={props.link}><Icon name={'plus'} color=\"black\" tooltip={__(\"Create new\",\"complianz-gdpr\")} size={14} /></a>}\n\n\t\t</div>\n\t)\n}\nexport default SingleDocument\n"],"names":["create","cmplz_api","useDocuments","set","get","documents","documentDataLoaded","processingAgreementOptions","proofOfConsentOptions","dataBreachOptions","region","setRegion","Storage","sessionStorage","cmplzSelectedRegion","state","getRegion","getDocuments","doAction","then","response","__","useState","useEffect","useFields","SingleDocument","OtherDocuments","getFieldValue","fields","recordsOfConsentEnabled","setRecordsOfConsentEnabled","createElement","Fragment","className","type","link","name","options","SelectControl","Icon","props","url","setUrl","disabled","setDisabled","setOptions","length","emptyOption","label","replace","value","unshift","filter","option","Download","request","XMLHttpRequest","responseType","open","send","onreadystatechange","readyState","status","obj","window","URL","createObjectURL","element","document","setAttribute","body","appendChild","click","setTimeout","revokeObjectURL","onprogress","e","onChange","fieldValue","onClick","color","tooltip","size","href"],"sourceRoot":""}