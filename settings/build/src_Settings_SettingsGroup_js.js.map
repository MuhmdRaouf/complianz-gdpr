{"version":3,"file":"src_Settings_SettingsGroup_js.js","mappings":"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","sources":["webpack://complianz-gdpr/./src/Settings/License/LicenseData.js","webpack://complianz-gdpr/./src/Settings/SettingsGroup.js"],"sourcesContent":["import {create} from 'zustand';\nimport * as cmplz_api from \"../../utils/api\";\nconst UseLicenseData = create(( set, get ) => ({\n    licenseStatus: cmplz_settings.licenseStatus,\n\tprocessing:false,\n\tlicenseNotices: [],\n\tnoticesLoaded: false,\n\tgetLicenseNotices: async () => {\n\t\tconst {licenseStatus, notices} = await cmplz_api.doAction('license_notices', {}).then( ( response ) => {\n\t\t\treturn response;\n\t\t});\n\t\tset(state => ({ noticesLoaded:true,licenseNotices:notices, licenseStatus:licenseStatus}));\n\t},\n\tactivateLicense: async (license) => {\n\t\tlet data = {};\n\t\tdata.license = license;\n\t\tset({processing:true})\n\t\tconst {licenseStatus, notices} = await cmplz_api.doAction('activate_license', data);\n\t\tset(state => ({processing:false,licenseNotices:notices, licenseStatus:licenseStatus}));\n\t},\n\tdeactivateLicense: async () => {\n\t\tset({processing:true})\n\t\tconst {licenseStatus, notices} = await cmplz_api.doAction('deactivate_license');\n\t\tset(state => ({processing:false,licenseNotices:notices, licenseStatus:licenseStatus}));\n\t}\n\n}));\n\nexport default UseLicenseData;\n\n","import Hyperlink from \"../utils/Hyperlink\";\nimport { __ } from '@wordpress/i18n';\nimport useMenu from \"../Menu/MenuData\";\nimport useLicense from \"./License/LicenseData\";\nimport {useEffect,useState} from '@wordpress/element';\nimport useFields from './Fields/FieldsData';\nimport UseBannerData from \"./CookieBannerPreview/CookieBannerData\";\n\n/**\n * Render a grouped block of settings\n */\nconst SettingsGroup = (props) => {\n\tconst { highLightField} = useFields();\n\t//@todo uncomment uselicense\n\tconst {licenseStatus} = useLicense();\n\tconst { bannerDataLoaded} = UseBannerData();\n\tlet upgrade='https://complianz.io/pricing/';\n\tconst {subMenu, getMenuRegions, selectedSubMenuItem} = useMenu();\n\n\tlet regions = getMenuRegions();\n\tconst [Field, setField] = useState(null);\n\tuseEffect( () => {\n\t\timport(\"./Fields/Field\").then(({ default: Field }) => {\n\t\t\tsetField(() => Field);\n\t\t});\n\t}, []);\n\n\tlet selectedFields = [];\n\t//get all fields with group_id props.group_id\n\tfor (const selectedField of props.fields){\n\t\tif (selectedField.group_id === props.group ){\n\t\t\tselectedFields.push(selectedField);\n\t\t}\n\t}\n\n\tlet activeGroup;\n\t//first, set the selected menu item as active group, so we have a default in case there are no groups\n\tfor (const item of subMenu.menu_items){\n\t\tif (item.id === selectedSubMenuItem ) {\n\t\t\tactiveGroup = item;\n\t\t} else if (item.menu_items) {\n\t\t\tactiveGroup = item.menu_items.filter(menuItem => menuItem.id === selectedSubMenuItem)[0];\n\t\t}\n\t\tif ( activeGroup ) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t//now check if we have actual groups\n\tfor (const item of subMenu.menu_items){\n\t\tif (item.id === selectedSubMenuItem && item.hasOwnProperty('groups')) {\n\t\t\tlet currentGroup = item.groups.filter(group => group.id === props.group);\n\t\t\tif (currentGroup.length>0) {\n\t\t\t\tactiveGroup = currentGroup[0];\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( !activeGroup ) {\n\t\treturn (<></>);\n\t}\n\tlet msg = activeGroup.premium_text ? activeGroup.premium_text : __(\"Learn more about %sPremium%s\", \"complianz-gdpr\");\n\tif ( cmplz_settings.is_premium ) {\n\t\tif ( licenseStatus === 'empty' || licenseStatus === 'deactivated' ) {\n\t\t\tmsg = cmplz_settings.messageInactive;\n\t\t} else {\n\t\t\tmsg = cmplz_settings.messageInvalid;\n\t\t}\n\t}\n\n\tlet disabled = licenseStatus !=='valid' && activeGroup.premium;\n\t//if a feature can only be used on networkwide or single site setups, pass that info here.\n\tupgrade = activeGroup.upgrade ? activeGroup.upgrade : upgrade;\n\tlet helplinkText = activeGroup.helpLink_text ? activeGroup.helpLink_text : __(\"Instructions\",\"complianz-gdpr\");\n\tlet disabledClass = disabled ? 'cmplz-disabled' : '';\n\treturn (\n\t\t<div className={\"cmplz-grid-item cmplz-\"+activeGroup.id + ' ' +  disabledClass}>\n\t\t\t{activeGroup.title && <div className=\"cmplz-grid-item-header\">\n\t\t\t\t<h3 className=\"cmplz-h4\">{activeGroup.title}</h3>\n\t\t\t\t{regions.length>0 && <div className=\"cmplz-grid-item-controls\">\n\t\t\t\t\t{regions.map((region, i) =>\n\t\t\t\t\t\t<div key={i}><img className=\"cmplz-settings-region\" src={cmplz_settings.plugin_url+'/assets/images/'+region+'.svg'} /></div>\n\t\t\t\t\t)}\n\t\t\t\t</div>}\n\n\t\t\t\t{regions.length===0 && activeGroup.helpLink && <div className=\"cmplz-grid-item-controls\">\n\t\t\t\t\t<Hyperlink target=\"_blank\" className=\"cmplz-helplink\" text={helplinkText} url={activeGroup.helpLink}/>\n\t\t\t\t</div>}\n\t\t\t</div>}\n\t\t\t<div className=\"cmplz-grid-item-content\">\n\t\t\t\t{activeGroup.intro && <div className=\"cmplz-settings-block-intro\" dangerouslySetInnerHTML={{__html:activeGroup.intro}}></div>}\n\t\t\t\t{Field && selectedFields.map((field, i) =>\n\t\t\t\t\t<Field key={field.id} field={field} highLightField={highLightField} />)\n\t\t\t\t}\n\t\t\t</div>\n\t\t\t{ disabled && <div className=\"cmplz-locked\">\n\t\t\t\t<div className=\"cmplz-locked-overlay\">\n\t\t\t\t\t<span className=\"cmplz-task-status cmplz-premium\">{__(\"Upgrade\",\"complianz-gdpr\")}</span>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{ cmplz_settings.is_premium && <span>{msg}&nbsp;<a className=\"cmplz-locked-link\" href=\"#settings/license\">{__(\"Check license\", \"complianz-gdpr\")}</a></span>}\n\t\t\t\t\t\t{ !cmplz_settings.is_premium && <Hyperlink target=\"_blank\" text={msg} url={upgrade}/> }\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>}\n\t\t\t{ subMenu.id==='banner' && !bannerDataLoaded && <div className=\"cmplz-locked\">\n\t\t\t\t<div className=\"cmplz-locked-overlay\">\n\t\t\t\t</div>\n\t\t\t</div>}\n\t\t</div>\n\t)\n}\n\nexport default SettingsGroup\n"],"names":["create","cmplz_api","UseLicenseData","set","get","licenseStatus","cmplz_settings","processing","licenseNotices","noticesLoaded","getLicenseNotices","notices","doAction","then","response","state","activateLicense","license","data","deactivateLicense","Hyperlink","__","useMenu","useLicense","useEffect","useState","useFields","UseBannerData","SettingsGroup","props","highLightField","bannerDataLoaded","upgrade","subMenu","getMenuRegions","selectedSubMenuItem","regions","Field","setField","_ref","default","selectedFields","selectedField","fields","group_id","group","push","activeGroup","item","menu_items","id","filter","menuItem","hasOwnProperty","currentGroup","groups","length","createElement","Fragment","msg","premium_text","is_premium","messageInactive","messageInvalid","disabled","premium","helplinkText","helpLink_text","disabledClass","className","title","map","region","i","key","src","plugin_url","helpLink","target","text","url","intro","dangerouslySetInnerHTML","__html","field","href"],"sourceRoot":""}