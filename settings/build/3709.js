"use strict";(globalThis.webpackChunkcomplianz_gdpr=globalThis.webpackChunkcomplianz_gdpr||[]).push([[3709,7499,6057,2640,5671,1789,3252],{17499:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var s=a(69307),n=a(43684),i=a(65736),l=a(23252);const c=()=>{const[e,t]=(0,s.useState)(!1),[a,c]=(0,s.useState)(1),[o,r]=(0,s.useState)(0),[d,p]=(0,s.useState)(0),{consentType:u,statisticsData:m,loaded:g,fetchStatisticsData:f,labels:h,setLabels:b}=(0,l.default)();(0,s.useEffect)((()=>{!g&&cmplz_settings.is_premium&&f()}),[]),(0,s.useEffect)((()=>{if(""===u||!g)return;if(!m||!m.hasOwnProperty(u))return;let e=[...m[u].labels],t=m[u].categories;t="optin"===u?t.filter((e=>"functional"===e||"no_warning"===e||"do_not_track"===e)):t.filter((e=>"functional"===e||"marketing"===e||"statistics"===e||"preferences"===e));let a=t.map((e=>m[u].categories.indexOf(e)));for(let t=a.length-1;t>=0;t--)e.splice(a[t],1);b(e)}),[g,u]),(0,s.useEffect)((()=>{if(""===u||!g||!m)return;let e=m[u].datasets.filter((e=>e.default));if(e.length>0){let a=e[0].data,s=a.reduce(((e,t)=>parseInt(e)+parseInt(t)),0);s=s>0?s:1,c(s),r(e[0].full_consent),p(e[0].no_consent),a=a.slice(2),t(a)}}),[g,u]);const _=e=>{let t="dial-med-low-light";return 1===e?t="dial-med-light":2===e?t="dial-light":3===e?t="dial-off-light":4===e&&(t="dial-min-light"),(0,s.createElement)(s.Fragment,null,(0,s.createElement)(n.default,{name:t,color:"black"}))};return(0,s.createElement)("div",{className:"cmplz-tools-statistics"},(0,s.createElement)("div",{className:"cmplz-statistics-container"},(0,s.createElement)("div",{className:"cmplz-main-consent"},(0,s.createElement)("div",{className:"cmplz-main-consent-count cmplz-full-consent"},(0,s.createElement)(n.default,{name:"dial-max-light",color:"green",size:"22"}),o,(0,s.createElement)("div",null,(0,i.__)("Full Consent","complianz-gdpr"))),(0,s.createElement)("div",{className:"cmplz-main-consent-count  cmplz-no-consent"},(0,s.createElement)(n.default,{name:"dial-min-light",color:"red",size:"22"}),d,(0,s.createElement)("div",null,(0,i.__)("No Consent","complianz-gdpr"))))),0===h.length&&(0,s.createElement)("div",{className:"cmplz-details"},(0,s.createElement)("div",{className:"cmplz-detail-icon"},_(0)),(0,s.createElement)("div",{className:"cmplz-detail"},(0,s.createElement)("div",{className:"cmplz-detail-name"},"..."),(0,s.createElement)("div",{className:"cmplz-detail-data"},"0%"))),h.length>0&&h.map(((t,n)=>{return(0,s.createElement)("div",{key:n,className:"cmplz-details"},(0,s.createElement)("div",{className:"cmplz-detail-icon"},_(n)),(0,s.createElement)("div",{className:"cmplz-detail"},(0,s.createElement)("div",{className:"cmplz-detail-name"},t),(0,s.createElement)("div",{className:"cmplz-detail-data"},e.hasOwnProperty(n)?(i=e[n],i=parseInt(i),Math.round(i/a*100)):0,"%")));var i})))}},26057:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var s=a(69307),n=a(56293),i=a(85671),l=a(43684),c=a(99196),o=a(65736),r=a(71789);const d=e=>{const{fields:t,getFieldValue:a}=(0,n.default)(),[d,p]=(0,c.useState)(!1),{integrationsLoaded:u,plugins:m,fetchIntegrationsData:g}=(0,i.default)(),{licenseStatus:f}=(0,r.default)();(0,c.useEffect)((()=>{let t=e.item;if(t.field){let e=a(t.field.name)==t.field.value;p(e)}}),[t]),(0,c.useEffect)((()=>{u||g()}),[]);let h=e.item;if(h.plugin)return m.filter((e=>e.id===h.plugin)).length>0?(0,s.createElement)("div",{className:"cmplz-tool"},(0,s.createElement)("div",{className:"cmplz-tool-title"},h.title),(0,s.createElement)("div",{className:"cmplz-tool-link"},(0,s.createElement)("a",{href:h.link,target:"_blank"},(0,s.createElement)(l.default,{name:"circle-chevron-right",color:"black",size:14})))):null;let b=cmplz_settings.is_premium&&"valid"===f,_=(0,o.__)("Read more","complianz-gdpr"),k=h.link;b&&(!d&&h.enableLink&&(_=(0,o.__)("Enable","complianz-gdpr"),k=h.enableLink),h.field&&!d||!h.viewLink||(_=(0,o.__)("View","complianz-gdpr"),k=h.viewLink));let v=-1!==k.indexOf("https://"),z=v?"_blank":"_self",E=v?"external-link":"circle-chevron-right";return(0,s.createElement)("div",{className:"cmplz-tool"},(0,s.createElement)("div",{className:"cmplz-tool-title"},h.title,h.plusone&&h.plusone),(0,s.createElement)("div",{className:"cmplz-tool-link"},(0,s.createElement)("a",{href:k,target:z},_,(0,s.createElement)(l.default,{name:E,color:"black",size:14}))))}},83709:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var s=a(69307),n=a(56293),i=a(65736),l=a(82640),c=a(17499),o=a(26057);const r=e=>(0,s.createElement)("div",{className:"cmplz-plusone"},e.count),d=()=>{const{fields:e,getFieldValue:t}=(0,n.default)(),[a,d]=(0,s.useState)(!1),[p,u]=(0,s.useState)(!1),{recordsLoaded:m,fetchData:g,totalOpen:f}=(0,l.default)();(0,s.useEffect)((()=>{m||g(10,1,"ID","ASC")}),[m]),(0,s.useEffect)((()=>{let e=1==t("a_b_testing");d(e);let a=1==t("a_b_testing_buttons");u(a)}),[e]);const h=[{title:(0,i.__)("Data requests","complianz-gdpr"),viewLink:"#tools/data-requests",enableLink:"#wizard/security-consent",field:{name:"datarequest",value:"yes"},link:"https://complianz.io/definition/what-is-a-data-request/",plusone:(0,s.createElement)(r,{count:f})},{title:(0,i.__)("Records of Consent","complianz-gdpr"),viewLink:"#tools/records-of-consent",enableLink:"#wizard/security-consent",field:{name:"records_of_consent",value:"yes"},link:"https://complianz.io/records-of-consent/"},{title:(0,i.__)("Processing agreements","complianz-gdpr"),viewLink:"#tools/processing-agreements",link:"https://complianz.io/definition/what-is-a-processing-agreement/"},{title:(0,i.__)("Statistics","complianz-gdpr"),viewLink:"#tools/ab-testing",link:"https://complianz.io/a-quick-introduction-to-a-b-testing/"},{title:(0,i.__)("A/B Testing","complianz-gdpr"),viewLink:"#tools/ab-testing",link:"https://complianz.io/a-quick-introduction-to-a-b-testing/"},{title:(0,i.__)("Documentation","complianz-gdpr"),link:"https://complianz.io/support/"},{title:(0,i.__)("Premium Support","complianz-gdpr"),viewLink:"https://complianz.io/support/",link:"https://complianz.io/about-premium-support/"},{title:(0,i.__)("WooCommerce","complianz-gdpr"),plugin:"woocommerce",link:cmplz_settings.admin_url+"admin.php?page=wc-settings&tab=account"},{title:(0,i.__)("Multisite","complianz-gdpr"),link:"#tools/multisite",viewLink:"#tools/multisite"},{title:(0,i.__)("Security","complianz-gdpr"),link:"#tools/security",viewLink:"#tools/security"}];return a?(0,s.createElement)(s.Fragment,null,(0,s.createElement)(c.default,{abTestingEnabled:p})):(0,s.createElement)(s.Fragment,null,h.map(((e,t)=>(0,s.createElement)(o.default,{key:t,item:e}))))}},82640:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var s=a(30270),n=a(48399),i=a(12902);const l=(0,s.Ue)(((e,t)=>({recordsLoaded:!1,searchValue:"",setSearchValue:t=>e({searchValue:t}),fetching:!1,generating:!1,progress:!1,records:[],totalRecords:0,totalOpen:0,exportLink:"",noData:!1,deleteRecords:async a=>{let s=t().records.filter((e=>a.includes(e.ID)));e((e=>({records:e.records.filter((e=>!a.includes(e.ID)))})));let i={};i.records=s,await n.doAction("delete_datarequests",i).then((e=>e)).catch((e=>{console.error(e)}))},resolveRecords:async a=>{e((0,i.ZP)((e=>{e.records.forEach((function(t,s){a.includes(t.ID)&&(e.records[s].resolved=!0)}))})));let s={};s.records=t().records.filter((e=>a.includes(e.ID))),await n.doAction("resolve_datarequests",s).then((e=>e)).catch((e=>{console.error(e)}))},fetchData:async(a,s,i,l)=>{if(t().fetching)return;e({fetching:!0});let c={};c.per_page=a,c.page=s,c.order=l.toUpperCase(),c.orderBy=i,c.search=t().searchValue;const{records:o,totalRecords:r,totalOpen:d}=await n.doAction("get_datarequests",c).then((e=>e)).catch((e=>{console.error(e)}));e((()=>({recordsLoaded:!0,records:o,totalRecords:r,totalOpen:d,fetching:!1})))},startExport:async()=>{e({generating:!0,progress:0,exportLink:""})},fetchExportDatarequestsProgress:async(t,a,s)=>{(t=void 0!==t&&t)||e({generating:!0});let i={};i.startDate=a,i.endDate=s,i.statusOnly=t;const{progress:l,exportLink:c,noData:o}=await n.doAction("export_datarequests",i).then((e=>e)).catch((e=>{console.error(e)}));let r=!1;l<100&&(r=!0),e({progress:l,exportLink:c,generating:r,noData:o})}})))},85671:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var s=a(30270),n=a(12902),i=a(48399);const l=(0,s.Ue)(((e,t)=>({integrationsLoaded:!1,fetching:!1,services:[],plugins:[],scripts:[],placeholders:[],blockedScripts:[],setScript:(t,a)=>{e((0,n.ZP)((e=>{if("block_script"===a){let a=e.blockedScripts;if(t.urls){for(const[e,s]of Object.entries(t.urls)){if(!s||0===s.length)continue;let e=!1;for(const[t,n]of Object.entries(a))s===t&&(e=!0);e||(a[s]=s)}e.blockedScripts=a}}const s=e.scripts[a].findIndex((e=>e.id===t.id));-1!==s&&(e.scripts[a][s]=t)})))},fetchIntegrationsData:async()=>{if(t().fetching)return;e({fetching:!0});const{services:a,plugins:s,scripts:n,placeholders:i,blocked_scripts:l}=await c();let o=n;o.block_script.forEach(((e,t)=>{e.id=t})),o.add_script.forEach(((e,t)=>{e.id=t})),o.whitelist_script.forEach(((e,t)=>{e.id=t})),e((()=>({integrationsLoaded:!0,services:a,plugins:s,scripts:o,fetching:!1,placeholders:i,blockedScripts:l})))},addScript:a=>{e({fetching:!0}),e((0,n.ZP)((e=>{e.scripts[a].push({name:"general",id:e.scripts[a].length,enable:!0})})));let s=t().scripts;return i.doAction("update_scripts",{scripts:s}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},saveScript:(a,s)=>{e({fetching:!0}),e((0,n.ZP)((e=>{const t=e.scripts[s].findIndex((e=>e.id===a.id));-1!==t&&(e.scripts[s][t]=a)})));let l=t().scripts;return i.doAction("update_scripts",{scripts:l}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},deleteScript:(a,s)=>{e({fetching:!0}),e((0,n.ZP)((e=>{const t=e.scripts[s].findIndex((e=>e.id===a.id));-1!==t&&e.scripts[s].splice(t,1)})));let l=t().scripts;return i.doAction("update_scripts",{scripts:l}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},updatePluginStatus:async(t,a)=>(e((0,n.ZP)((e=>{const s=e.plugins.findIndex((e=>e.id===t));-1!==s&&(e.plugins[s].enabled=a)}))),i.doAction("update_plugin_status",{plugin:t,enabled:a}).then((e=>e)).catch((e=>{console.error(e)}))),updatePlaceholderStatus:async(t,a,s)=>(s&&e((0,n.ZP)((e=>{const s=e.plugins.findIndex((e=>e.id===t));-1!==s&&(e.plugins[s].placeholder=a?"enabled":"disabled")}))),i.doAction("update_placeholder_status",{id:t,enabled:a}).then((e=>e)).catch((e=>{console.error(e)})))}))),c=()=>i.doAction("get_integrations_data",{}).then((e=>e)).catch((e=>{console.error(e)}))},71789:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var s=a(30270),n=a(48399);const i=(0,s.Ue)(((e,t)=>({licenseStatus:cmplz_settings.licenseStatus,processing:!1,licenseNotices:[],noticesLoaded:!1,getLicenseNotices:async()=>{const{licenseStatus:t,notices:a}=await n.doAction("license_notices",{}).then((e=>e));e((e=>({noticesLoaded:!0,licenseNotices:a,licenseStatus:t})))},activateLicense:async t=>{let a={};a.license=t,e({processing:!0});const{licenseStatus:s,notices:i}=await n.doAction("activate_license",a);e((e=>({processing:!1,licenseNotices:i,licenseStatus:s})))},deactivateLicense:async()=>{e({processing:!0});const{licenseStatus:t,notices:a}=await n.doAction("deactivate_license");e((e=>({processing:!1,licenseNotices:a,licenseStatus:t})))}})))},23252:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var s=a(30270),n=a(48399);const i={optin:{labels:["Functional","Statistics","Marketing","Do Not Track","No choice","No warning"],categories:["functional","statistics","marketing","do_not_track","no_choice","no_warning"],datasets:[{data:["0","0","0","0","0","0"],backgroundColor:"rgba(255, 99, 132, 1)",borderColor:"rgba(255, 99, 132, 1)",label:"A (default)",fill:"false",borderDash:[0,0]},{data:["0","0","0","0","0","0"],backgroundColor:"rgba(255, 159, 64, 1)",borderColor:"rgba(255, 159, 64, 1)",label:"B",fill:"false",borderDash:[0,0]}],max:5},optout:{labels:["Functional","Statistics","Marketing","Do Not Track","No choice","No warning"],categories:["functional","statistics","marketing","do_not_track","no_choice","no_warning"],datasets:[{data:["0","0","0","0","0","0"],backgroundColor:"rgba(255, 99, 132, 1)",borderColor:"rgba(255, 99, 132, 1)",label:"A (default)",fill:"false",borderDash:[0,0]},{data:["0","0","0","0","0","0"],backgroundColor:"rgba(255, 159, 64, 1)",borderColor:"rgba(255, 159, 64, 1)",label:"B",fill:"false",borderDash:[0,0]}],max:5}},l={optin:{labels:["Functional","Statistics","Marketing","Do Not Track","No choice","No warning"],categories:["functional","statistics","marketing","do_not_track","no_choice","no_warning"],datasets:[{data:["29","747","174","292","30","10"],backgroundColor:"rgba(255, 99, 132, 1)",borderColor:"rgba(255, 99, 132, 1)",label:"Demo A (default)",fill:"false",borderDash:[0,0]},{data:["3","536","240","389","45","32"],backgroundColor:"rgba(255, 159, 64, 1)",borderColor:"rgba(255, 159, 64, 1)",label:"Demo B",fill:"false",borderDash:[0,0]}],max:5},optout:{labels:["Functional","Statistics","Marketing","Do Not Track","No choice","No warning"],categories:["functional","statistics","marketing","do_not_track","no_choice","no_warning"],datasets:[{data:["29","747","174","292","30","10"],backgroundColor:"rgba(255, 99, 132, 1)",borderColor:"rgba(255, 99, 132, 1)",label:"A (default)",fill:"false",borderDash:[0,0]},{data:["3","536","240","389","45","32"],backgroundColor:"rgba(255, 159, 64, 1)",borderColor:"rgba(255, 159, 64, 1)",label:"Demo B",fill:"false",borderDash:[0,0]}],max:5}},c=(0,s.Ue)(((e,t)=>({consentType:"optin",setConsentType:t=>{e({consentType:t})},statisticsLoading:!1,consentTypes:[],regions:[],defaultConsentType:"optin",loaded:!1,statisticsData:l,emptyStatisticsData:i,bestPerformerEnabled:!1,daysLeft:"",abTrackingCompleted:!1,labels:[],setLabels:t=>{e({labels:t})},fetchStatisticsData:async()=>{if(e({saving:!0}),t().loaded)return;const{daysLeft:a,abTrackingCompleted:s,consentTypes:i,statisticsData:l,defaultConsentType:c,regions:o,bestPerformerEnabled:r}=await n.doAction("get_statistics_data",{}).then((e=>e)).catch((e=>{console.error(e)}));e({saving:!1,loaded:!0,consentType:c,consentTypes:i,statisticsData:l,defaultConsentType:c,bestPerformerEnabled:r,regions:o,daysLeft:a,abTrackingCompleted:s})}})))}}]);