{"version":3,"file":"src_Settings_ButtonControl_js.js","mappings":"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","sources":["webpack://complianz-gdpr/./src/Settings/ButtonControl.js","webpack://complianz-gdpr/./src/Settings/Inputs/Button.js","webpack://complianz-gdpr/./src/Settings/Inputs/Buttons.scss?eb9c"],"sourcesContent":["import Button from \"../Settings/Inputs/Button\";\nimport * as cmplz_api from \"../utils/api\";\nimport useFields from \"./Fields/FieldsData\";\nimport useMenu from \"../Menu/MenuData\";\nimport {useState} from \"@wordpress/element\";\n\nimport { __experimentalConfirmDialog as ConfirmDialog } from '@wordpress/components';\n\nconst ButtonControl = ({label, field, disabled}) => {\n\tconst {fetchFieldsData, showSavedSettingsNotice} = useFields();\n\tconst {selectedSubMenuItem } = useMenu();\n\tconst [ isOpen, setIsOpen ] = useState( false );\n\n\tlet text = field.button_text ? field.button_text : field.label;\n\n\tif ( field.action ) {\n\t\tconst clickHandler = async (e) => {\n\t\t\tif (field.warn) {\n\t\t\t\tsetIsOpen( true );\n\t\t\t} else {\n\t\t\t\tawait executeAction();\n\t\t\t}\n\t\t}\n\n\t\tconst handleConfirm = async () => {\n\t\t\tsetIsOpen( false );\n\t\t\tawait executeAction();\n\t\t};\n\n\t\tconst handleCancel = () => {\n\t\t\tsetIsOpen( false );\n\t\t};\n\n\t\tconst executeAction = async (e) => {\n\t\t\tlet data = {};\n\t\t\tawait cmplz_api.doAction(field.action, data).then((response) => {\n\t\t\t\tif (response.success) {\n\t\t\t\t\tfetchFieldsData(selectedSubMenuItem);\n\t\t\t\t\tshowSavedSettingsNotice(response.message);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Button\n\t\t\t\t\ttext={text}\n\t\t\t\t\tstyle={'secondary'}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tonClick={(e)=>clickHandler(e)}\n\t\t\t\t/>\n\t\t\t\t<ConfirmDialog\n\t\t\t\t\tisOpen={ isOpen }\n\t\t\t\t\tonConfirm={ handleConfirm }\n\t\t\t\t\tonCancel={ handleCancel }\n\t\t\t\t>\n\t\t\t\t\t{field.warn}\n\t\t\t\t</ConfirmDialog>\n\t\t\t</>\n\t\t)\n\t} else {\n\t\treturn (\n\t\t\t\t<Button\n\t\t\t\t\tstyle='secondary'\n\t\t\t\t\tlabel={text}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\thref={field.url}\n\t\t\t\t/>\n\t\t)\n\t}\n}\nexport default ButtonControl\n","import './Buttons.scss'\nimport {memo, useState} from 'react';\nimport * as cmplz_api from '../../utils/api';\nimport useFields from '../Fields/FieldsData';\nimport useMenu from '../../Menu/MenuData';\nimport {\n\t__experimentalConfirmDialog as ConfirmDialog\n} from '@wordpress/components';\n// import AreYouSureModal from '../AreYouSureModal';\n\nconst Button = ({\n\ttype = 'action',\n\tstyle = 'tertiary',\n\tlabel,\n\tonClick,\n\thref = '',\n\ttarget = '',\n\tdisabled,\n\taction,\n\tfield,\n\tchildren\n}) =>\n{\n\tif ( !label && !children ) return null;\n\tconst buttonLabel = field && field.button_text ? field.button_text : label;\n\tconst content = buttonLabel ? buttonLabel : children;\n\tconst {fetchFieldsData, showSavedSettingsNotice} = useFields();\n\tconst {selectedSubMenuItem } = useMenu();\n\tconst [ isOpen, setIsOpen ] = useState( false );\n\tconst classes = `button cmplz-button button--${style} button-${type}`;\n\n\tconst clickHandler = async (e) => {\n\t\tif (type === 'action' && onClick) {\n\t\t\tonClick(e);\n\t\t\treturn;\n\t\t}\n\t\tif (type === 'action' && action) {\n\t\t\tif (field && field.warn) {\n\t\t\t\tsetIsOpen( true );\n\t\t\t} else {\n\t\t\t\tawait executeAction();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\twindow.location.href=field.url;\n\t}\n\n\tconst handleConfirm = async () => {\n\t\tsetIsOpen( false );\n\t\tawait executeAction();\n\t};\n\n\tconst handleCancel = () => {\n\t\tsetIsOpen( false );\n\t};\n\n\tconst executeAction = async (e) => {\n\t\tlet data = {};\n\t\tawait cmplz_api.doAction(field.action, data).then((response) => {\n\t\t\tif (response.success) {\n\t\t\t\tfetchFieldsData(selectedSubMenuItem);\n\t\t\t\tshowSavedSettingsNotice(response.message);\n\t\t\t}\n\t\t});\n\t}\n\tconst warningText = field && field.warn ? field.warn : '';\n\tif ( type === 'action' ) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<ConfirmDialog\n\t\t\t\t\tisOpen={ isOpen }\n\t\t\t\t\tonConfirm={ handleConfirm }\n\t\t\t\t\tonCancel={ handleCancel }\n\t\t\t\t>\n\t\t\t\t\t{warningText}\n\t\t\t\t</ConfirmDialog>\n\t\t\t\t{/*Commented out because the below still needs css */}\n\t\t\t\t{/*<AreYouSureModal isOpen={isOpen} onConfirm={handleConfirm} onCancel={handleCancel} >*/}\n\t\t\t\t{/*\t{warningText}*/}\n\t\t\t\t{/*</AreYouSureModal>*/}\n\n\t\t\t\t<button\n\t\t\t\t\tclassName={classes}\n\t\t\t\t\tonClick={clickHandler}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t>\n\t\t\t\t\t{content}\n\n\t\t\t\t</button>\n\t\t\t</>\n\n\n\t\t)\n\t}\n\tif (type === 'link') {\n\t\treturn (\n\t\t\t<a\n\t\t\t\tclassName={classes}\n\t\t\t\thref={href}\n\t\t\t\ttarget={target}\n\t\t\t\t>\n\t\t\t\t{content}\n\t\t\t</a>\n\t\t)\n\t}\n}\n\nexport default memo(Button);\n","// extracted by mini-css-extract-plugin\nexport {};"],"names":["Button","cmplz_api","useFields","useMenu","useState","__experimentalConfirmDialog","ConfirmDialog","ButtonControl","_ref","label","field","disabled","fetchFieldsData","showSavedSettingsNotice","selectedSubMenuItem","isOpen","setIsOpen","text","button_text","action","clickHandler","e","warn","executeAction","handleConfirm","handleCancel","data","doAction","then","response","success","message","createElement","Fragment","style","onClick","onConfirm","onCancel","href","url","memo","type","target","children","buttonLabel","content","classes","window","location","warningText","className"],"sourceRoot":""}