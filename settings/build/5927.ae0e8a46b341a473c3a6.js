"use strict";(self.webpackChunkcomplianz_gdpr=self.webpackChunkcomplianz_gdpr||[]).push([[5927,8189,881,2588,4573],{68189:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var n=a(69307),l=a(20384),c=a(65736),r=a(34573),o=a(99057),i=a(56293),s=a(99196),d=a(382),m=a(32588);const u=e=>{const{getFieldValue:t,showSavedSettingsNotice:a}=(0,i.default)(),{saving:l,purposesOptions:r,services:u,updateCookie:p,toggleDeleteCookie:_,saveCookie:v}=(0,o.UseSyncData)(),[g,b]=(0,s.useState)({ID:e.ID,value:e.name}),[E,h]=(0,s.useState)({ID:e.ID,value:e.retention}),[f,y]=(0,s.useState)({ID:e.ID,value:e.cookieFunction});let z="yes"===t("use_cdb_api"),k=!!z&&1==e.sync,N=k;l&&(N=!0);let w=!1;e.slug.length>0&&(w="https://cookiedatabase.org/cookie/"+(e.service?e.service:"unknown-service")+"/"+e.slug);const D=(e,t,a)=>{p(t,a,e)};(0,s.useEffect)((()=>{const e=setTimeout((()=>{p(g.ID,"name",g.value)}),500);return()=>{clearTimeout(e)}}),[g]),(0,s.useEffect)((()=>{const e=setTimeout((()=>{p(f.ID,"cookieFunction",f.value)}),500);return()=>{clearTimeout(e)}}),[f]),(0,s.useEffect)((()=>{const e=setTimeout((()=>{p(E.ID,"retention",E.value)}),700);return()=>{clearTimeout(e)}}),[E]);const C=(e,t,a)=>{p(t,a,e)};let I=-1!==e.name.indexOf("cmplz_")||k,S=1!=e.deleted?"cmplz-reset-button":"",T=u.map(((e,t)=>({value:e.ID,label:e.name})));return(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{className:"cmplz-details-row cmplz-details-row__checkbox"},(0,n.createElement)(d.default,{id:e.ID+"_cdb_api",disabled:!z,value:k,onChange:t=>C(t,e.ID,"sync"),options:{sync:(0,c.__)("Sync cookie with cookiedatabase.org","complianz-gdpr")}})),(0,n.createElement)("div",{className:"cmplz-details-row cmplz-details-row__checkbox"},(0,n.createElement)(d.default,{id:e.ID+"showOnPolicy",disabled:N,value:e.showOnPolicy,onChange:t=>C(t,e.ID,"showOnPolicy"),options:{showOnPolicy:(0,c.__)("Show cookie on Cookie Policy","complianz-gdpr")}})),(0,n.createElement)("div",{className:"cmplz-details-row"},(0,n.createElement)("label",null,(0,c.__)("Name","complianz-gdpr")),(0,n.createElement)("input",{disabled:N,onChange:t=>((e,t,a)=>{let n={ID:t,value:e.target.value};b(n)})(t,e.ID),type:"text",placeholder:(0,c.__)("Name","complianz-gdpr"),value:g.value})),(0,n.createElement)("div",{className:"cmplz-details-row"},(0,n.createElement)("label",null,(0,c.__)("Service","complianz-gdpr")),(0,n.createElement)(m.default,{disabled:N,value:e.serviceID,options:T,onChange:t=>D(t,e.ID,"serviceID")})),(0,n.createElement)("div",{className:"cmplz-details-row"},(0,n.createElement)("label",null,(0,c.__)("Expiration","complianz-gdpr")),(0,n.createElement)("input",{disabled:I,onChange:t=>((e,t,a)=>{let n={ID:t,value:e.target.value};h(n)})(t,e.ID),type:"text",placeholder:(0,c.__)("1 year","complianz-gdpr"),value:E.value})),(0,n.createElement)("div",{className:"cmplz-details-row"},(0,n.createElement)("label",null,(0,c.__)("Cookie function","complianz-gdpr")),(0,n.createElement)("input",{disabled:N,onChange:t=>((e,t,a)=>{let n={ID:t,value:e.target.value};y(n)})(t,e.ID),type:"text",placeholder:(0,c.__)("e.g. store user ID","complianz-gdpr"),value:f.value})),(0,n.createElement)("div",{className:"cmplz-details-row"},(0,n.createElement)("label",null,(0,c.__)("Purpose","complianz-gdpr")),(0,n.createElement)(m.default,{disabled:N,value:e.purpose,options:r,onChange:t=>D(t,e.ID,"purpose")})),w&&(0,n.createElement)("div",{className:"cmplz-details-row"},(0,n.createElement)("a",{href:w,target:"_blank"},(0,c.__)("View cookie on cookiedatabase.org","complianz-gdpr"))),(0,n.createElement)("div",{className:"cmplz-details-row cmplz-details-row__buttons"},(0,n.createElement)("button",{disabled:l,onClick:t=>(async e=>{await v(e),a((0,c.__)("Saved cookie","complianz-gd[r"))})(e.ID),className:"button button-default"},(0,c.__)("Save","complianz-gdpr")),(0,n.createElement)("button",{className:"button button-default "+S,onClick:t=>(async e=>{await _(e)})(e.ID)},1==e.deleted&&(0,c.__)("Restore","complianz-gdpr"),1!=e.deleted&&(0,c.__)("Delete","complianz-gdpr"))))},p=e=>{let{cookie:t}=e,a="";t.deleted?a=" | "+(0,c.__)("Deleted","complianz-gdpr"):t.showOnPolicy?t.isMembersOnly&&(a=" | "+(0,c.__)("Logged in users only, ignored","complianz-gdpr")):a=" | "+(0,c.__)("Admin, ignored","complianz-gdpr");let o=t.name;return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(r.default,{summary:o,comment:a,icons:(0,n.createElement)(n.Fragment,null,t.complete&&(0,n.createElement)(l.default,{tooltip:(0,c.__)("The data for this cookie is complete","complianz-gdpr"),name:"success",color:"green"}),!t.complete&&(0,n.createElement)(l.default,{tooltip:(0,c.__)("This cookie has missing fields","complianz-gdpr"),name:"times",color:"red"}),t.sync&&t.synced&&(0,n.createElement)(l.default,{name:"rotate",color:"green"}),!t.synced||!t.sync&&(0,n.createElement)(l.default,{tooltip:(0,c.__)("This cookie is not synchronized with cookiedatabase.org.","complianz-gdpr"),name:"rotate-error",color:"red"}),t.showOnPolicy&&(0,n.createElement)(l.default,{tooltip:(0,c.__)("This cookie will be on your Cookie Policy","complianz-gdpr"),name:"file",color:"green"}),!t.showOnPolicy&&(0,n.createElement)(l.default,{tooltip:(0,c.__)("This cookie is not shown on the Cookie Policy","complianz-gdpr"),name:"file-disabled",color:"grey"}),t.old&&(0,n.createElement)(l.default,{tooltip:(0,c.__)("This cookie has not been detected on your site in the last three months","complianz-gdpr"),name:"calendar-error",color:"red"}),!t.old&&(0,n.createElement)(l.default,{tooltip:(0,c.__)("This cookie has recently been detected","complianz-gdpr"),name:"calendar",color:"green"})),details:u(t),style:(()=>{if(t.deleted)return Object.assign({},{backgroundColor:"var(--rsp-red-faded)"})})()}))}},45927:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var n=a(69307),l=a(68189),c=a(34573),r=a(99057),o=a(65736),i=a(20384),s=a(56293),d=a(382),m=a(32588);const u=e=>{const{getFieldValue:t,showSavedSettingsNotice:a}=(0,s.default)(),{saving:l,deleteService:c,serviceTypeOptions:i,updateService:u,saveService:p}=(0,r.UseSyncData)();let _="yes"===t("use_cdb_api");if(!e)return null;let v=!!_&&1==e.sync,g=v;l&&(g=!0);let b=!1;e.slug.length>0&&(b="https://cookiedatabase.org/service/"+e.slug);const E=(e,t,a)=>{u(t,a,e)},h=(e,t,a)=>{u(t,a,e)};return(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{className:"cmplz-details-row cmplz-details-row__checkbox"},(0,n.createElement)(d.default,{id:e.ID+"thirdParty",disabled:g,value:e.thirdParty,onChange:t=>h(t,e.ID,"thirdParty"),options:{thirdParty:(0,o.__)("Data is shared with this service","complianz-gdpr")}})),(0,n.createElement)("div",{className:"cmplz-details-row cmplz-details-row__checkbox"},(0,n.createElement)(d.default,{id:e.ID+"sync",disabled:!_,value:v,onChange:t=>h(t,e.ID,"sync"),options:{sync:(0,o.__)("Sync service with cookiedatabase.org","complianz-gdpr")}})),(0,n.createElement)("div",{className:"cmplz-details-row"},(0,n.createElement)("label",null,(0,o.__)("Name","complianz-gdpr")),(0,n.createElement)("input",{disabled:g,onChange:t=>E(t.target.value,e.ID,"name"),type:"text",placeholder:(0,o.__)("Name","complianz-gdpr"),value:e.name})),(0,n.createElement)("div",{className:"cmplz-details-row"},(0,n.createElement)("label",null,(0,o.__)("Service Types","complianz-gdpr")),(0,n.createElement)(m.default,{disabled:g,value:e.serviceType,options:i,onChange:t=>E(t,e.ID,"serviceType")})),(0,n.createElement)("div",{className:"cmplz-details-row"},(0,n.createElement)("label",null,(0,o.__)("Privacy Statement URL","complianz-gdpr")),(0,n.createElement)("input",{disabled:g,onChange:t=>E(t.target.value,e.ID,"privacyStatementURL"),type:"text",placeholder:(0,o.__)("https://domain.com/privacy","complianz-gdpr"),value:e.privacyStatementURL})),b&&(0,n.createElement)("div",{className:"cmplz-details-row"},(0,n.createElement)("a",{href:b,target:"_blank"},(0,o.__)("View service on cookiedatabase.org","complianz-gdpr"))),(0,n.createElement)("div",{className:"cmplz-details-row cmplz-details-row__buttons"},(0,n.createElement)("button",{disabled:l,onClick:t=>(async e=>{await p(e),a((0,o.__)("Saved service","complianz-gd[r"))})(e.ID),className:"button button-default"},(0,o.__)("Save","complianz-gdpr")),(0,n.createElement)("button",{className:"button button-default cmplz-reset-button",onClick:t=>(async e=>{await c(e)})(e.ID)},(0,o.__)("Delete Service","complianz-gdpr"))))},p=e=>{const{adding:t}=(0,r.UseSyncData)(),a=e.service&&e.service.ID>0&&e.service.hasOwnProperty("name"),s=!e.service||e.service.ID<=0,d=e.service&&e.service.name?e.service.name:(0,o.__)("New Service","complianz-gdpr");return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(c.default,{summary:e.name,icons:e.service?(0,n.createElement)(n.Fragment,null,e.service.complete&&(0,n.createElement)(i.default,{tooltip:(0,o.__)("The data for this service is complete","complianz-gdpr"),name:"success",color:"green"}),!e.service.complete&&(0,n.createElement)(i.default,{tooltip:(0,o.__)("This service has missing fields","complianz-gdpr"),name:"times",color:"red"}),e.service.synced&&(0,n.createElement)(i.default,{tooltip:(0,o.__)("This service has been synchronized with cookiedatabase.org","complianz-gdpr"),name:"rotate",color:"green"}),!e.service.synced&&(0,n.createElement)(i.default,{tooltip:(0,o.__)("This service is not synchronized with cookiedatabase.org","complianz-gdpr"),name:"rotate-error",color:"red"})):(0,n.createElement)(n.Fragment,null),details:(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",null,u(e.service)),e.cookies&&e.cookies.length>0&&(0,n.createElement)("div",{className:"cmplz-panel__cookie_list"},e.cookies.map(((e,t)=>(0,n.createElement)(l.default,{key:t,cookie:e})))),!s&&(0,n.createElement)("div",null,(0,n.createElement)("button",{disabled:t||!a,onClick:t=>((t,a)=>{e.addCookie(t,a)})(e.service.ID,d),className:"button button-default"},(0,o.__)("Add cookie to %s","complianz-gdpr").replace("%s",d),t&&(0,n.createElement)(i.default,{name:"loading",color:"grey"})),!a&&(0,n.createElement)("div",{className:"cmplz-comment"},(0,o.__)("Save service to be able to add cookies","complianz-gdpr"))))}))}},80881:(e,t,a)=>{a.r(t),a.d(t,{default:()=>s});var n=a(69307),l=a(99196),c=a(48399),r=a(56293),o=a(82485),i=a(55609);const s=(0,l.memo)((e=>{let{type:t="action",style:a="tertiary",label:s,onClick:d,href:m="",target:u="",disabled:p,action:_,field:v,children:g}=e;if(!s&&!g)return null;const b=(v&&v.button_text?v.button_text:s)||g,{fetchFieldsData:E,showSavedSettingsNotice:h}=(0,r.default)(),{selectedSubMenuItem:f}=(0,o.default)(),[y,z]=(0,l.useState)(!1),k=`button cmplz-button button--${a} button-${t}`,N=async e=>{await c.doAction(v.action,{}).then((e=>{e.success&&(E(f),h(e.message))}))},w=v&&v.warn?v.warn:"";return"action"===t?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(i.__experimentalConfirmDialog,{isOpen:y,onConfirm:async()=>{z(!1),await N()},onCancel:()=>{z(!1)}},w),(0,n.createElement)("button",{className:k,onClick:async e=>{"action"===t&&d?d(e):"action"===t&&_?v&&v.warn?z(!0):await N():window.location.href=v.url},disabled:p},b)):"link"===t?(0,n.createElement)("a",{className:k,href:m,target:u},b):void 0}))},382:(e,t,a)=>{a.r(t),a.d(t,{default:()=>I});var n=a(69307),l=a(87462),c=a(99196),r=a(28771),o=a(25360),i=a(36206),s=a(77342),d=a(57898),m=a(7546),u=a(29115),p=a(75320);const _="Checkbox",[v,g]=(0,o.b)(_),[b,E]=v(_),h=(0,c.forwardRef)(((e,t)=>{const{__scopeCheckbox:a,name:n,checked:o,defaultChecked:d,required:m,disabled:u,value:_="on",onCheckedChange:v,...g}=e,[E,h]=(0,c.useState)(null),k=(0,r.e)(t,(e=>h(e))),N=(0,c.useRef)(!1),w=!E||Boolean(E.closest("form")),[D=!1,C]=(0,s.T)({prop:o,defaultProp:d,onChange:v}),I=(0,c.useRef)(D);return(0,c.useEffect)((()=>{const e=null==E?void 0:E.form;if(e){const t=()=>C(I.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}}),[E,C]),(0,c.createElement)(b,{scope:a,state:D,disabled:u},(0,c.createElement)(p.WV.button,(0,l.Z)({type:"button",role:"checkbox","aria-checked":y(D)?"mixed":D,"aria-required":m,"data-state":z(D),"data-disabled":u?"":void 0,disabled:u,value:_},g,{ref:k,onKeyDown:(0,i.M)(e.onKeyDown,(e=>{"Enter"===e.key&&e.preventDefault()})),onClick:(0,i.M)(e.onClick,(e=>{C((e=>!!y(e)||!e)),w&&(N.current=e.isPropagationStopped(),N.current||e.stopPropagation())}))})),w&&(0,c.createElement)(f,{control:E,bubbles:!N.current,name:n,value:_,checked:D,required:m,disabled:u,style:{transform:"translateX(-100%)"}}))})),f=e=>{const{control:t,checked:a,bubbles:n=!0,...r}=e,o=(0,c.useRef)(null),i=(0,d.D)(a),s=(0,m.t)(t);return(0,c.useEffect)((()=>{const e=o.current,t=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(t,"checked").set;if(i!==a&&l){const t=new Event("click",{bubbles:n});e.indeterminate=y(a),l.call(e,!y(a)&&a),e.dispatchEvent(t)}}),[i,a,n]),(0,c.createElement)("input",(0,l.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:!y(a)&&a},r,{tabIndex:-1,ref:o,style:{...e.style,...s,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function y(e){return"indeterminate"===e}function z(e){return y(e)?"indeterminate":e?"checked":"unchecked"}const k=h,N=(0,c.forwardRef)(((e,t)=>{const{__scopeCheckbox:a,forceMount:n,...r}=e,o=E("CheckboxIndicator",a);return(0,c.createElement)(u.z,{present:n||y(o.state)||!0===o.state},(0,c.createElement)(p.WV.span,(0,l.Z)({"data-state":z(o.state),"data-disabled":o.disabled?"":void 0},r,{ref:t,style:{pointerEvents:"none",...e.style}})))}));var w=a(65736),D=a(20384),C=a(80881);const I=(0,c.memo)((e=>{let{indeterminate:t,label:a,value:l,id:r,onChange:o,required:i,disabled:s,options:d={}}=e,m=l;Array.isArray(m)||(m=""===m?[]:[m]),t&&(l=!0);const u=m,[p,_]=(0,c.useState)(!1);let v=!1;Object.keys(d).length>10&&(v=!0);const g=e=>u.includes(e),b=()=>{_(!p)};let E=s&&!Array.isArray(s);return(0,n.createElement)("div",{className:"cmplz-checkbox-group"},Object.entries(d).map(((e,c)=>{let[m,_]=e;return(0,n.createElement)("div",{key:m,className:"cmplz-checkbox-group__item"+(!p&&c>10?" cmplz-hidden":"")},(0,n.createElement)(k,{className:"cmplz-checkbox-group__checkbox",id:r+"_"+m,checked:1===Object.keys(d).length?l:g(m),"aria-label":a,disabled:E||Array.isArray(s)&&s.includes(m),required:i,onCheckedChange:e=>((e,t)=>{if(1===Object.keys(d).length)o(!l);else{const e=u.includes(t)?u.filter((e=>e!==t)):[...u,t];o(e)}})(0,m)},(0,n.createElement)(N,{className:"cmplz-checkbox-group__indicator"},(0,n.createElement)(D.default,{name:t?"indeterminate":"check",size:14,color:"dark-blue"}))),(0,n.createElement)("label",{className:"cmplz-checkbox-group__label",htmlFor:r+"_"+m},_))})),!p&&v&&(0,n.createElement)(C.default,{onClick:b},(0,w.__)("Show more","complianz-gdpr")),p&&v&&(0,n.createElement)(C.default,{onClick:b},(0,w.__)("Show less","complianz-gdpr")))}))},32588:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(69307),l=a(99196),c=a(79552),r=a(20384),o=a(65736);const i=(0,l.memo)((e=>{let{value:t=!1,onChange:a,required:l,defaultValue:i,disabled:s,options:d={},canBeEmpty:m=!0,label:u,innerRef:p}=e;if(Array.isArray(d)){let e={};d.map((t=>{e[t.value]=t.label})),d=e}return m?d={0:(0,o.__)("Select an option","complianz-gdpr"),...d}:t||(t=Object.keys(d)[0]),(0,n.createElement)("div",{className:"cmplz-input-group cmplz-select-group",key:u},(0,n.createElement)(c.fC,{value:t,defaultValue:i,onValueChange:a,required:l,disabled:s&&!Array.isArray(s)},(0,n.createElement)(c.xz,{className:"cmplz-select-group__trigger"},(0,n.createElement)(c.B4,null),(0,n.createElement)(r.default,{name:"chevron-down"})),(0,n.createElement)(c.VY,{className:"cmplz-select-group__content",position:"popper"},(0,n.createElement)(c.u_,{className:"cmplz-select-group__scroll-button"},(0,n.createElement)(r.default,{name:"chevron-up"})),(0,n.createElement)(c.l_,{className:"cmplz-select-group__viewport"},(0,n.createElement)(c.ZA,null,Object.entries(d).map((e=>{let[t,a]=e;return(0,n.createElement)(c.ck,{disabled:Array.isArray(s)&&s.includes(t),className:"cmplz-select-group__item",key:t,value:t},(0,n.createElement)(c.eT,null,a))})))),(0,n.createElement)(c.$G,{className:"cmplz-select-group__scroll-button"},(0,n.createElement)(r.default,{name:"chevron-down"})))))}))},34573:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var n=a(69307),l=a(20384);const c=e=>(0,n.createElement)("div",{className:"cmplz-panel__list__item",key:e.id,style:e.style?e.style:{}},(0,n.createElement)("details",null,(0,n.createElement)("summary",null,e.icon&&(0,n.createElement)(l.default,{name:e.icon}),(0,n.createElement)("h5",{className:"cmplz-panel__list__item__title"},e.summary),(0,n.createElement)("div",{className:"cmplz-panel__list__item__comment"},e.comment),(0,n.createElement)("div",{className:"cmplz-panel__list__item__icons"},e.icons),(0,n.createElement)(l.default,{name:"chevron-down",size:18})),(0,n.createElement)("div",{className:"cmplz-panel__list__item__details"},e.details)))},29115:(e,t,a)=>{a.d(t,{z:()=>o});var n=a(99196),l=a(91850),c=a(28771),r=a(9981);const o=e=>{const{present:t,children:a}=e,o=function(e){const[t,a]=(0,n.useState)(),c=(0,n.useRef)({}),o=(0,n.useRef)(e),s=(0,n.useRef)("none"),d=e?"mounted":"unmounted",[m,u]=function(e,t){return(0,n.useReducer)(((e,a)=>{const n=t[e][a];return null!=n?n:e}),e)}(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return(0,n.useEffect)((()=>{const e=i(c.current);s.current="mounted"===m?e:"none"}),[m]),(0,r.b)((()=>{const t=c.current,a=o.current;if(a!==e){const n=s.current,l=i(t);e?u("MOUNT"):"none"===l||"none"===(null==t?void 0:t.display)?u("UNMOUNT"):u(a&&n!==l?"ANIMATION_OUT":"UNMOUNT"),o.current=e}}),[e,u]),(0,r.b)((()=>{if(t){const e=e=>{const a=i(c.current).includes(e.animationName);e.target===t&&a&&(0,l.flushSync)((()=>u("ANIMATION_END")))},a=e=>{e.target===t&&(s.current=i(c.current))};return t.addEventListener("animationstart",a),t.addEventListener("animationcancel",e),t.addEventListener("animationend",e),()=>{t.removeEventListener("animationstart",a),t.removeEventListener("animationcancel",e),t.removeEventListener("animationend",e)}}u("ANIMATION_END")}),[t,u]),{isPresent:["mounted","unmountSuspended"].includes(m),ref:(0,n.useCallback)((e=>{e&&(c.current=getComputedStyle(e)),a(e)}),[])}}(t),s="function"==typeof a?a({present:o.isPresent}):n.Children.only(a),d=(0,c.e)(o.ref,s.ref);return"function"==typeof a||o.isPresent?(0,n.cloneElement)(s,{ref:d}):null};function i(e){return(null==e?void 0:e.animationName)||"none"}o.displayName="Presence"}}]);