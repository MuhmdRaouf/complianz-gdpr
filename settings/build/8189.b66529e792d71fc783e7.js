"use strict";(self.webpackChunkcomplianz_gdpr=self.webpackChunkcomplianz_gdpr||[]).push([[8189,4573],{68189:(e,t,l)=>{l.r(t),l.d(t,{default:()=>d});var a=l(69307),o=l(20384),n=l(65736),c=l(34573),i=l(99057),r=l(56293),s=l(99196);const m=e=>{const{getFieldValue:t,showSavedSettingsNotice:l}=(0,r.default)(),{saving:o,purposesOptions:c,services:m,updateCookie:d,toggleDeleteCookie:p,saveCookie:u}=(0,i.UseSyncData)(),[_,g]=(0,s.useState)({ID:e.ID,value:e.name}),[v,E]=(0,s.useState)({ID:e.ID,value:e.retention}),[h,z]=(0,s.useState)({ID:e.ID,value:e.cookieFunction});let k="yes"===t("use_cdb_api"),y=!!k&&1==e.sync,b=y;o&&(b=!0);let f=!1;e.slug.length>0&&(f="https://cookiedatabase.org/cookie/"+(e.service?e.service:"unknown-service")+"/"+e.slug);const w=(e,t,l)=>{d(t,l,e.target.value)};(0,s.useEffect)((()=>{const e=setTimeout((()=>{d(_.ID,"name",_.value)}),500);return()=>{clearTimeout(e)}}),[_]),(0,s.useEffect)((()=>{const e=setTimeout((()=>{d(h.ID,"cookieFunction",h.value)}),500);return()=>{clearTimeout(e)}}),[h]),(0,s.useEffect)((()=>{const e=setTimeout((()=>{d(v.ID,"retention",v.value)}),700);return()=>{clearTimeout(e)}}),[v]);const D=(e,t,l)=>{d(t,l,e.target.checked)};let I=-1!==e.name.indexOf("cmplz_")||y,C=1!=e.deleted?"cmplz-reset-button":"";return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"cmplz-details-row cmplz-details-row__checkbox"},(0,a.createElement)("label",null,(0,n.__)("Sync cookie with cookiedatabase.org","complianz-gdpr")),(0,a.createElement)("input",{disabled:!k,onChange:t=>D(t,e.ID,"sync"),type:"checkbox",checked:y})),(0,a.createElement)("div",{className:"cmplz-details-row cmplz-details-row__checkbox"},(0,a.createElement)("label",null,(0,n.__)("Show cookie on Cookie Policy","complianz-gdpr")),(0,a.createElement)("input",{disabled:b,onChange:t=>D(t,e.ID,"showOnPolicy"),type:"checkbox",checked:e.showOnPolicy})),(0,a.createElement)("div",{className:"cmplz-details-row"},(0,a.createElement)("label",null,(0,n.__)("Name","complianz-gdpr")),(0,a.createElement)("input",{disabled:b,onChange:t=>((e,t,l)=>{let a={ID:t,value:e.target.value};g(a)})(t,e.ID),type:"text",placeholder:(0,n.__)("Name","complianz-gdpr"),value:_.value})),(0,a.createElement)("div",{className:"cmplz-details-row"},(0,a.createElement)("label",null,(0,n.__)("Service","complianz-gdpr")),(0,a.createElement)("select",{disabled:b,onChange:t=>w(t,e.ID,"serviceID"),value:e.serviceID},(0,a.createElement)("option",{key:-1,value:0},(0,n.__)("Select a service","complianz-gdpr")),m.map(((e,t)=>(0,a.createElement)("option",{key:t,value:e.ID},e.name))))),(0,a.createElement)("div",{className:"cmplz-details-row"},(0,a.createElement)("label",null,(0,n.__)("Expiration","complianz-gdpr")),(0,a.createElement)("input",{disabled:I,onChange:t=>((e,t,l)=>{let a={ID:t,value:e.target.value};E(a)})(t,e.ID),type:"text",placeholder:(0,n.__)("1 year","complianz-gdpr"),value:v.value})),(0,a.createElement)("div",{className:"cmplz-details-row"},(0,a.createElement)("label",null,(0,n.__)("Cookie function","complianz-gdpr")),(0,a.createElement)("input",{disabled:b,onChange:t=>((e,t,l)=>{let a={ID:t,value:e.target.value};z(a)})(t,e.ID),type:"text",placeholder:(0,n.__)("e.g. store user ID","complianz-gdpr"),value:h.value})),(0,a.createElement)("div",{className:"cmplz-details-row"},(0,a.createElement)("label",null,(0,n.__)("Purpose","complianz-gdpr")),(0,a.createElement)("select",{disabled:b,onChange:t=>w(t,e.ID,"purpose"),value:e.purpose},(0,a.createElement)("option",{key:-1,value:0},(0,n.__)("Select a purpose","complianz-gdpr")),c.map(((e,t)=>(0,a.createElement)("option",{key:t,value:e.name},e.name))))),f&&(0,a.createElement)("div",{className:"cmplz-details-row"},(0,a.createElement)("a",{href:f,target:"_blank"},(0,n.__)("View cookie on cookiedatabase.org","complianz-gdpr"))),(0,a.createElement)("div",{className:"cmplz-details-row cmplz-details-row__buttons"},(0,a.createElement)("button",{disabled:o,onClick:t=>(async e=>{await u(e),l((0,n.__)("Saved cookie","complianz-gd[r"))})(e.ID),className:"button button-default"},(0,n.__)("Save","complianz-gdpr")),(0,a.createElement)("button",{className:"button button-default "+C,onClick:t=>(async e=>{await p(e)})(e.ID)},1==e.deleted&&(0,n.__)("Restore","complianz-gdpr"),1!=e.deleted&&(0,n.__)("Delete","complianz-gdpr"))))},d=e=>{let{cookie:t}=e,l="";t.deleted?l=" | "+(0,n.__)("Deleted","complianz-gdpr"):t.showOnPolicy?l=" | "+(0,n.__)("Admin, ignored","complianz-gdpr"):t.isMembersOnly&&(l=" | "+(0,n.__)("Logged in users only, ignored","complianz-gdpr"));let i=t.name;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(c.default,{summary:i,comment:l,icons:(0,a.createElement)(a.Fragment,null,t.complete&&(0,a.createElement)(o.default,{tooltip:(0,n.__)("The data for this cookie is complete","complianz-gdpr"),name:"success",color:"green"}),!t.complete&&(0,a.createElement)(o.default,{tooltip:(0,n.__)("This cookie has missing fields","complianz-gdpr"),name:"times",color:"red"}),t.sync&&t.synced&&(0,a.createElement)(o.default,{name:"rotate",color:"green"}),!t.synced||!t.sync&&(0,a.createElement)(o.default,{tooltip:(0,n.__)("This cookie is not synchronized with cookiedatabase.org.","complianz-gdpr"),name:"rotate-error",color:"red"}),t.showOnPolicy&&(0,a.createElement)(o.default,{tooltip:(0,n.__)("This cookie will be on your Cookie Policy","complianz-gdpr"),name:"file",color:"green"}),!t.showOnPolicy&&(0,a.createElement)(o.default,{tooltip:(0,n.__)("This cookie is not shown on the Cookie Policy","complianz-gdpr"),name:"file-disabled",color:"grey"}),t.old&&(0,a.createElement)(o.default,{tooltip:(0,n.__)("This cookie has not been detected on your site in the last three months","complianz-gdpr"),name:"calendar-error",color:"red"}),!t.old&&(0,a.createElement)(o.default,{tooltip:(0,n.__)("This cookie has recently been detected","complianz-gdpr"),name:"calendar",color:"green"})),details:m(t),style:(()=>{if(t.deleted)return Object.assign({},{backgroundColor:"var(--rsp-red-faded)"})})()}))}},34573:(e,t,l)=>{l.r(t),l.d(t,{default:()=>n});var a=l(69307),o=l(20384);const n=e=>(0,a.createElement)("div",{className:"cmplz-panel__list__item",key:e.id,style:e.style?e.style:{}},(0,a.createElement)("details",null,(0,a.createElement)("summary",null,e.icon&&(0,a.createElement)(o.default,{name:e.icon}),(0,a.createElement)("h5",{className:"cmplz-panel__list__item__title"},e.summary),(0,a.createElement)("div",{className:"cmplz-panel__list__item__comment"},e.comment),(0,a.createElement)("div",{className:"cmplz-panel__list__item__icons"},e.icons),(0,a.createElement)(o.default,{name:"chevron-down",size:18})),(0,a.createElement)("div",{className:"cmplz-panel__list__item__details"},e.details)))}}]);