"use strict";(globalThis.webpackChunkcomplianz_gdpr=globalThis.webpackChunkcomplianz_gdpr||[]).push([[6937,3275,6239,1789,1871,835],{63275:(e,t,n)=>{n.r(t),n.d(t,{UseMenuData:()=>r});var l=n(30270),a=n(48399),i=n(12902),s=n(55678),c=n(65736);const r=(0,l.Ue)(((e,t)=>({menuDataLoaded:!1,saving:!1,menu:[],menuChanged:!1,changedMenuType:"per_document",emptyMenuLink:"#",requiredDocuments:[],createdDocuments:[],genericDocuments:[],documentsNotInMenu:[],pageTypes:[],regions:[],fetchMenuData:async()=>{const t=await m(!1);let n=t.required_documents.filter((e=>e.page_id));e({menuDataLoaded:!0,emptyMenuLink:t.empty_menu_link,menu:t.menu,requiredDocuments:t.required_documents,genericDocuments:t.generic_documents_list,createdDocuments:n,pageTypes:t.page_types,documentsNotInMenu:t.documents_not_in_menu,regions:t.regions})},updateMenu:(t,n)=>{let l=isNaN(t)?"per_type":"per_document";e({menuType:l}),e("per_type"===l?(0,i.ZP)((e=>{let l=e.genericDocuments.findIndex((function(e,n){return e.page_id===t||e.type===t})),a=e.createdDocuments.findIndex((function(e,n){return e.page_id===t||e.type===t}));-1!==l&&(e.genericDocuments[l].menu_id=n,-1!==a&&(e.createdDocuments[a].menu_id=-1),e.menuChanged=!0)})):(0,i.ZP)((e=>{let l=e.genericDocuments.findIndex((function(e,n){return e.page_id===t||e.type===t})),a=e.createdDocuments.findIndex((function(e,n){return e.page_id===t||e.type===t}));-1!==a&&(e.createdDocuments[a].menu_id=n,-1!==l&&(e.genericDocuments[l].menu_id=-1),e.menuChanged=!0)})))},saveDocumentsMenu:async(n,l)=>{if(e({saving:!0}),t().menuChanged||n){let n={};n.genericDocuments=t().genericDocuments.filter((e=>e.can_region_redirect)),n.createdDocuments=t().createdDocuments;const i=a.doAction("save_documents_menu_data",n).then((t=>(e({saving:!1}),t))).catch((e=>{console.error(e)}));l&&s.toast.promise(i,{pending:(0,c.__)("Saving menu...","complianz-gdpr"),success:(0,c.__)("Menu saved","complianz-gdpr"),error:(0,c.__)("Something went wrong","complianz-gdpr")})}else l&&s.toast.info((0,c.__)("Settings have not been changed","complianz-gdpr"))}}))),m=()=>a.doAction("documents_menu_data",{generate:!1}).then((e=>e)).catch((e=>{console.error(e)}))},76239:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var l=n(69307),a=n(43684),i=n(65736);const s=e=>{let t=e.help;t.title||(t.title=t.text,t.text=!1);let n=e.noticesExpanded?"open":"",s=t.url&&-1!==t.url.indexOf("complianz.io")?"_blank":"_self";return(0,l.createElement)(l.Fragment,null,t.title&&t.text&&(0,l.createElement)("details",{className:"cmplz-wizard-help-notice cmplz-"+t.label.toLowerCase(),open:n},(0,l.createElement)("summary",null,t.title," ",(0,l.createElement)(a.default,{name:"chevron-down"})),(0,l.createElement)("div",{dangerouslySetInnerHTML:{__html:t.text}}),t.url&&(0,l.createElement)("div",{className:"cmplz-help-more-info"},(0,l.createElement)("a",{target:s,href:t.url},(0,i.__)("More info","complianz-gdpr")))),t.title&&!t.text&&(0,l.createElement)("div",{className:"cmplz-wizard-help-notice cmplz-"+t.label.toLowerCase()},(0,l.createElement)("p",null,t.title)))}},71789:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var l=n(30270),a=n(48399);const i=(0,l.Ue)(((e,t)=>({licenseStatus:cmplz_settings.licenseStatus,processing:!1,licenseNotices:[],noticesLoaded:!1,getLicenseNotices:async()=>{const{licenseStatus:t,notices:n}=await a.doAction("license_notices",{}).then((e=>e));e((e=>({noticesLoaded:!0,licenseNotices:n,licenseStatus:t})))},activateLicense:async t=>{let n={};n.license=t,e({processing:!0});const{licenseStatus:l,notices:i}=await a.doAction("activate_license",n);e((e=>({processing:!1,licenseNotices:i,licenseStatus:l})))},deactivateLicense:async()=>{e({processing:!0});const{licenseStatus:t,notices:n}=await a.doAction("deactivate_license");e((e=>({processing:!1,licenseNotices:n,licenseStatus:t})))}})))},46937:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var l=n(69307),a=n(20835),i=n(1871),s=n(76239),c=n(65736),r=n(56293),m=n(82485),o=n(63275),d=n(5830),u=n(82387),p=n(66182);const g=()=>{const[e,t]=(0,l.useState)(!0),{progressLoaded:g,notices:_,fetchProgressData:f}=(0,u.default)(),{getFieldNotices:h,fieldNotices:z,fieldNoticesLoaded:v,fieldsLoaded:E,saveFields:b,changedFields:N,fields:y,notCompletedRequiredFields:k,completableFields:w,fetchAllFieldsCompleted:D,nextButtonDisabled:L}=(0,r.default)(),{subMenuLoaded:M,saveButtonsRequired:x,subMenu:S,selectedSubMenuItem:C,selectedMainMenuItem:I,nextMenuItem:F,previousMenuItem:A}=(0,m.default)(),{saveBanner:P,setBannerDataLoaded:T}=(0,d.default)(),{saveDocumentsMenu:q}=(0,o.UseMenuData)(),[U,B]=(0,l.useState)(null);(0,l.useEffect)((()=>{"banner"!==I||U||n.e(2870).then(n.bind(n,72870)).then((e=>{let{default:t}=e;B((()=>t))}))}),[I]),(0,l.useEffect)((()=>{h(),D()}),[y]);const O=async(e,t)=>{-1!==N.findIndex((e=>"regions"===e.id))&&T(!1),"document-menu"===C?(await b(C,t,!1),await q(N.length>0,t)):"banner"===I?await P(y):(await b(C,t,e),await f())},{menu_items:R}=S;if(!M||!E||0===R.length)return(0,l.createElement)(p.default,null);let H=y.filter((e=>e.menu_id===C)),Z=[];for(const e of H)(0,a.in_array)(e.group_id,Z)||Z.push(e.group_id);let $=(0,c.__)("Save","complianz-gdpr"),j=[];if(v)for(const e of z)H.filter((t=>e.field_id===t.id)).length>0&&j.push(e);if(g)for(const e of _){let t=!1;if(e.show_with_options&&"warning"===e.status&&(t=H.filter((t=>e.show_with_options.includes(t.id))).length>0),t||e.menu_id===C){let t={};t.title=!!e.title&&e.title,t.label=e.label,t.id=e.id,t.text=e.message,t.url=e.url,t.linked_field=e.show_with_option,j.push(t)}}for(const e of H.filter((e=>e.help&&!e.conditionallyDisabled))){let t=e.help;0===j.filter((e=>e.id&&e.id===t.id)).length&&j.push(e.help)}j=j.filter((e=>"completed"!==e.label.toLowerCase()));let G=y.filter((e=>"enable_cookie_banner"===e.id&&"yes"===e.value)).length>0,V=L?`#${I}/${C}`:F,J=G?"#banner":"#dashboard";return(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"cmplz-wizard-settings cmplz-column-2"},Z.map(((e,t)=>(0,l.createElement)(i.default,{key:t,index:t,group:e,fields:H}))),(0,l.createElement)("div",{className:"cmplz-grid-item-footer"},"wizard"===I&&(0,l.createElement)("div",{className:"cmplz-grid-item-footer-progress-bar"},(0,l.createElement)("div",{className:"cmplz-bar",style:(()=>{let e=k.length>0?Math.round((w.length-k.length)/w.length*100):100;return Object.assign({},{width:e+"%"})})()})),"wizard"!==I&&(0,l.createElement)("div",{className:"cmplz-grid-item-footer-upsell-bar"},!cmplz_settings.is_premium&&(0,l.createElement)("a",{className:"button button-default",href:"https://complianz.io/pricing",target:"_blank"},(0,c.__)("Get Premium","complianz-gdpr"))),(0,l.createElement)("div",{className:"cmplz-grid-item-footer-buttons"},"#"!==A&&(0,l.createElement)("a",{href:A},(0,c.__)("Previous","complianz-gdpr")),x()&&(0,l.createElement)("button",{className:"button button-default",onClick:e=>O(!1,!0)},$),C!==R[R.length-1].id&&(0,l.createElement)(l.Fragment,null,x()&&(0,l.createElement)("a",{disabled:L,className:"button button-primary",href:V,onClick:e=>O(!1,!1)},(0,c.__)("Save and Continue","complianz-gdpr")),!x()&&(0,l.createElement)("a",{className:"button button-primary",href:V,onClick:e=>O(!1,!1)},(0,c.__)("Continue","complianz-gdpr"))),"wizard"===I&&C===R[R.length-1].id&&(0,l.createElement)("a",{disabled:L,className:"button button-primary",href:J,onClick:e=>O(!0,!1)},(0,c.__)("Finish","complianz-gdpr"))))),(0,l.createElement)("div",{className:"cmplz-wizard-help"},(0,l.createElement)("div",{className:"cmplz-help-header"},(0,l.createElement)("h3",{className:"cmplz-h4"},(0,c.__)("Notifications","complianz-gdpr")),(0,l.createElement)("div",{className:"cmplz-help-control",onClick:()=>{t(!e)}},!e&&(0,c.__)("Expand all","complianz-gdpr"),e&&(0,c.__)("Collapse all","complianz-gdpr"))),j.map(((t,n)=>(0,l.createElement)(s.default,{key:n,noticesExpanded:e,help:t,fieldId:t.id})))),"banner"===I&&U&&(0,l.createElement)(U,null))}},1871:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var l=n(69307),a=n(99950),i=n(65736),s=n(82485),c=n(71789),r=n(56293),m=n(5830);const o=e=>{const{highLightField:t,getFieldValue:o}=(0,r.default)(),{licenseStatus:d}=(0,c.default)(),{bannerDataLoaded:u}=(0,m.default)();let p="https://complianz.io/pricing/";const{subMenu:g,getMenuRegions:_,selectedSubMenuItem:f}=(0,s.default)();let h=_(),z=o("regions");Array.isArray(z)||(z=[z]),h=h.filter((e=>z.includes(e)));const[v,E]=(0,l.useState)(null);(0,l.useEffect)((()=>{Promise.resolve().then(n.bind(n,93019)).then((e=>{let{default:t}=e;E((()=>t))}))}),[]);let b,N=[];for(const t of e.fields)t.group_id===e.group&&N.push(t);for(const e of g.menu_items)if(e.id===f?b=e:e.menu_items&&(b=e.menu_items.filter((e=>e.id===f))[0]),b)break;for(const t of g.menu_items)if(t.id===f&&t.hasOwnProperty("groups")){let n=t.groups.filter((t=>t.id===e.group));n.length>0&&(b=n[0])}if(!b)return null;let y=b.premium_text?b.premium_text:(0,i.__)("Learn more about %sPremium%s","complianz-gdpr");cmplz_settings.is_premium&&(y="empty"===d||"deactivated"===d?cmplz_settings.messageInactive:cmplz_settings.messageInvalid);let k="valid"!==d&&b.premium;k=cmplz_settings.is_premium&&"valid"!==d&&"license"!==b.id,p=b.upgrade?b.upgrade:p;let w=b.helpLink_text?b.helpLink_text:(0,i.__)("Instructions","complianz-gdpr"),D=k?"cmplz-disabled":"";return(0,l.createElement)("div",{className:"cmplz-grid-item cmplz-"+b.id+" "+D},b.title&&(0,l.createElement)("div",{className:"cmplz-grid-item-header"},(0,l.createElement)("h3",{className:"cmplz-h4"},b.title),h.length>0&&(0,l.createElement)("div",{className:"cmplz-grid-item-controls"},h.map(((e,t)=>(0,l.createElement)("div",{key:t},(0,l.createElement)("img",{className:"cmplz-settings-region",src:cmplz_settings.plugin_url+"/assets/images/"+e+".svg"}))))),0===h.length&&b.helpLink&&(0,l.createElement)("div",{className:"cmplz-grid-item-controls"},(0,l.createElement)(a.default,{target:"_blank",className:"cmplz-helplink",text:w,url:b.helpLink}))),(0,l.createElement)("div",{className:"cmplz-grid-item-content"},b.intro&&(0,l.createElement)("div",{className:"cmplz-settings-block-intro",dangerouslySetInnerHTML:{__html:b.intro}}),v&&N.map(((e,n)=>(0,l.createElement)(v,{key:e.id,field:e,highLightField:t})))),k&&(0,l.createElement)("div",{className:"cmplz-locked"},(0,l.createElement)("div",{className:"cmplz-locked-overlay"},(0,l.createElement)("span",{className:"cmplz-task-status cmplz-premium"},(0,i.__)("Upgrade","complianz-gdpr")),(0,l.createElement)("span",null,cmplz_settings.is_premium&&(0,l.createElement)("span",null,y," ",(0,l.createElement)("a",{className:"cmplz-locked-link",href:"#settings/license"},(0,i.__)("Check license","complianz-gdpr"))),!cmplz_settings.is_premium&&(0,l.createElement)(a.default,{target:"_blank",text:y,url:p})))),"banner"===g.id&&!u&&(0,l.createElement)("div",{className:"cmplz-locked"},(0,l.createElement)("div",{className:"cmplz-locked-overlay"})))}},20835:(e,t,n)=>{n.r(t),n.d(t,{in_array:()=>l});const l=(e,t)=>{let n=t.length;for(let l=0;l<n;l++)if(t[l]==e)return!0;return!1}}}]);