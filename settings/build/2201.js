"use strict";(globalThis.webpackChunkcomplianz_gdpr=globalThis.webpackChunkcomplianz_gdpr||[]).push([[2201,9511],{82201:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var o=n(69307),a=n(65736),c=n(9511),r=n(43684);const d=(0,n(99196).memo)((e=>{let{label:t,field:n}=e;const{generateProofOfConsent:d,generating:l}=(0,c.default)();return(0,o.createElement)("div",{className:"cmplz-field-button"},(0,a.__)("Create Proof of Consent","complianz-gdpr"),(0,o.createElement)("button",{disabled:l,className:"button button-default cmplz-field-button",onClick:()=>d()},(0,a.__)("Generate","complianz-gdpr"),l&&(0,o.createElement)(r.default,{name:"loading",color:"grey"})))}))},9511:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var o=n(30270),a=n(48399);const c=(0,o.Ue)(((e,t)=>({documentsLoaded:!1,fetching:!1,generating:!1,documents:[],downloadUrl:"",regions:[],fields:[],deleteDocuments:async n=>{let o=t().documents.filter((e=>n.includes(e.id)));e((e=>({documents:e.documents.filter((e=>!n.includes(e.id)))})));let c={};c.documents=o,await a.doAction("delete_proof_of_consent_documents",c).then((e=>e)).catch((e=>{console.error(e)}))},generateProofOfConsent:async()=>{e({generating:!0}),await a.doAction("generate_proof_of_consent",{}).then((e=>e)).catch((e=>{console.error(e)})),await t().fetchData(),e({generating:!1})},fetchData:async()=>{if(t().fetching)return;e({fetching:!0});const{documents:n,regions:o,download_url:c}=await a.doAction("get_proof_of_consent_documents",{}).then((e=>e)).catch((e=>{console.error(e)}));e((e=>({documentsLoaded:!0,documents:n,regions:o,downloadUrl:c,fetching:!1})))}})))}}]);