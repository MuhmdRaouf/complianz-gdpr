"use strict";(self.webpackChunkcomplianz_gdpr=self.webpackChunkcomplianz_gdpr||[]).push([[7853],{17853:function(e,t,i){i.r(t);var n=i(30270),s=i(12902),o=i(48399),d=i(75169);const c=(0,n.Ue)(((e,t)=>({documentsLoaded:!1,region:"",fileName:"",serviceName:"",fetching:!1,updating:!1,loadingFields:!1,documents:[],regions:[],fields:[],editDocumentId:!1,resetEditDocumentId:t=>{e({editDocumentId:!1,region:"",serviceName:""})},editDocument:async(t,i)=>{t.preventDefault(),e({updating:!0}),await o.doAction("load_processing_agreement",{id:i}).then((t=>{e({fields:t.fields,region:t.region,serviceName:t.serviceName,updating:!1,fileName:t.file_name})})).catch((e=>{console.error(e)})),e({editDocumentId:i})},setRegion:t=>{e({region:t})},setServiceName:t=>{e({serviceName:t})},updateField:(i,n)=>{let o=!1,c=!1;e((0,s.ZP)((e=>{e.fields.forEach((function(e,t){e.id===i&&(c=t,o=!0)})),!1!==c&&(e.fields[c].value=n)})));let a=(0,d.updateFieldsListWithConditions)(t().fields);e({fields:a})},save:async(i,n)=>{e({updating:!0});let s=t().editDocumentId;await o.doAction("save_processing_agreement",{fields:t().fields,region:i,serviceName:n,post_id:s}).then((t=>(e({updating:!1}),t))).catch((e=>{console.error(e)})),t().fetchData()},deleteDocuments:async i=>{let n=t().documents.filter((e=>i.includes(e.id)));e((e=>({documents:e.documents.filter((e=>!i.includes(e.id)))})));let s={};s.documents=n,await o.doAction("delete_processing_agreement",s).then((e=>e)).catch((e=>{console.error(e)}))},fetchData:async()=>{if(t().fetching)return;e({fetching:!0});const{documents:i,regions:n}=await o.doAction("get_processing_agreements",{}).then((e=>e)).catch((e=>{console.error(e)}));e((()=>({documentsLoaded:!0,documents:i,regions:n,fetching:!1})))},fetchFields:async t=>{let i={region:t};e({loadingFields:!0});const{fields:n}=await o.doAction("get_processing_agreement_fields",i).then((e=>e)).catch((e=>{console.error(e)}));let s=(0,d.updateFieldsListWithConditions)(n);e((e=>({fields:s,loadingFields:!1})))}})));t.default=c}}]);