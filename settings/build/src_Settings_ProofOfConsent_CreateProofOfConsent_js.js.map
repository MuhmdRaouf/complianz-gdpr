{"version":3,"file":"src_Settings_ProofOfConsent_CreateProofOfConsent_js.js","mappings":"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","sources":["webpack://complianz-gdpr/./src/Settings/ProofOfConsent/CreateProofOfConsent.js","webpack://complianz-gdpr/./src/Settings/ProofOfConsent/useProofOfConsentData.js"],"sourcesContent":["import { __ } from '@wordpress/i18n';\nimport useProofOfConsentData from \"./useProofOfConsentData\";\nimport Icon from \"../../utils/Icon\";\nimport {memo} from \"react\";\nconst CreateProofOfConsent = ({label, field}) => {\n\tconst { generateProofOfConsent, generating} = useProofOfConsentData();\n\n\treturn (\n\t\t<div className={'cmplz-field-button'}>\n\t\t\t{__(\"Create Proof of Consent\",\"complianz-gdpr\")}\n\t\t\t<button disabled={generating} className=\"button button-default cmplz-field-button\" onClick={()=>generateProofOfConsent()} >\n\t\t\t\t{__(\"Generate\",\"complianz-gdpr\")}\n\t\t\t\t{generating && <Icon name = \"loading\" color = 'grey' />}\n\t\t\t</button>\n\t\t</div>\n\t)\n}\nexport default memo(CreateProofOfConsent);\n","import {create} from 'zustand';\nimport * as cmplz_api from \"../../utils/api\";\nconst useProofOfConsentData = create(( set, get ) => ({\n\tdocumentsLoaded: false,\n\tfetching:false,\n\tgenerating:false,\n\tdocuments: [],\n\tdownloadUrl: '',\n\tregions: [],\n\tfields: [],\n\tdeleteDocuments: async (ids) => {\n\t\t//get array of documents to delete\n\t\tlet deleteDocuments = get().documents.filter(document => ids.includes(document.id));\n\t\t//remove the ids from the documents array\n\t\tset((state) => ({\n\t\t\tdocuments: state.documents.filter(document => !ids.includes(document.id)),\n\t\t}));\n\t\tlet data = {};\n\t\tdata.documents = deleteDocuments;\n\t\tawait cmplz_api.doAction('delete_proof_of_consent_documents', data).then((response) => {\n\t\t\treturn response;\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t});\n\n\t},\n\tgenerateProofOfConsent: async () => {\n\t\tset({generating:true});\n\t\tlet data = {};\n\t\tawait cmplz_api.doAction('generate_proof_of_consent', data).then((response) => {\n\n\t\t\treturn response;\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t});\n\t\tawait get().fetchData();\n\t\tset({generating:false});\n\n\t},\n\tfetchData: async ( ) => {\n\t\tif (get().fetching) return;\n\t\tset({fetching:true});\n\t\tlet data = {}\n\t\tconst { documents,regions, download_url} = await cmplz_api.doAction('get_proof_of_consent_documents', data).then((response) => {\n\t\t\treturn response;\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t});\n\t\tset((state) => ({\n\t\t\tdocumentsLoaded: true,\n\t\t\tdocuments: documents,\n\t\t\tregions: regions,\n\t\t\tdownloadUrl: download_url,\n\t\t\tfetching:false,\n\t\t}));\n\t},\n}));\n\nexport default useProofOfConsentData;\n"],"names":["__","useProofOfConsentData","Icon","memo","CreateProofOfConsent","_ref","label","field","generateProofOfConsent","generating","createElement","className","disabled","onClick","name","color","create","cmplz_api","set","get","documentsLoaded","fetching","documents","downloadUrl","regions","fields","deleteDocuments","ids","filter","document","includes","id","state","data","doAction","then","response","catch","error","console","fetchData","download_url"],"sourceRoot":""}