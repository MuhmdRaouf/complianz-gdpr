{"version":3,"file":"src_Settings_ProofOfConsent_ProofOfConsentControl_js.js","mappings":"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","sources":["webpack://complianz-gdpr/./src/Settings/ProofOfConsent/ProofOfConsentControl.js","webpack://complianz-gdpr/./src/Settings/ProofOfConsent/useProofOfConsentData.js","webpack://complianz-gdpr/./src/Settings/Inputs/Input.scss?1cff","webpack://complianz-gdpr/./src/Settings/ProofOfConsent/ProofOfConsentControl.scss?9a3d"],"sourcesContent":["import {useState, useEffect} from \"@wordpress/element\";\nimport { __ } from '@wordpress/i18n';\nimport useProofOfConsentData from \"./useProofOfConsentData\";\nimport {memo} from \"react\";\n// import * as Checkbox from '@radix-ui/react-checkbox';\n// import Icon from '../../utils/Icon';\nimport './ProofOfConsentControl.scss';\nimport '../Inputs/Input.scss';\n\nconst ProofOfConsentControl = () => {\n\tconst { documents, downloadUrl, deleteDocuments, documentsLoaded, fetchData} = useProofOfConsentData();\n\tconst [ btnDisabled, setBtnDisabled ] = useState( '' );\n\tconst [ selectedDocuments, setSelectedDocuments ] = useState( [] );\n\tconst disabled = !cmplz_settings.is_premium;\n\tconst paginationPerPage = 10;\n\tconst [ pagination, setPagination] = useState({});\n\tconst [ indeterminate, setIndeterminate] = useState(false);\n\tconst [ entirePageSelected, setEntirePageSelected ] = useState( false );\n\tconst handlePageChange = (page) => {\n\t\tsetPagination({ ...pagination, currentPage: page });\n\t};\n\tconst [DataTable, setDataTable] = useState(null);\n\tuseEffect( () => {\n\t\timport('react-data-table-component').then(({ default: DataTable }) => {\n\t\t\tsetDataTable(() => DataTable);\n\t\t});\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (!documentsLoaded) fetchData();\n\t}, [documentsLoaded])\n\n\n\tconst customStyles = {\n\t\theadCells: {\n\t\t\tstyle: {\n\t\t\t\tpaddingLeft: '0',\n\t\t\t\tpaddingRight: '0',\n\t\t\t},\n\t\t},\n\t\tcells: {\n\t\t\tstyle: {\n\t\t\t\tpaddingLeft: '0',\n\t\t\t\tpaddingRight: '0',\n\t\t\t},\n\t\t},\n\t};\n\n\tconst onDeleteDocuments  = async (ids) => {\n\t\tsetSelectedDocuments([]);\n\t\tawait deleteDocuments(ids);\n\t}\n\n\tconst downloadDocuments = async () => {\n\t\tlet selectedDocumentsCopy = documents.filter(document => selectedDocuments.includes(document.id));\n\t\tsetSelectedDocuments([]);\n\t\tconst downloadNext = async () => {\n\t\t\tif (selectedDocumentsCopy.length > 0) {\n\t\t\t\tconst document = selectedDocumentsCopy.shift();\n\t\t\t\tconst url = downloadUrl + '/' + document.file;\n\t\t\t\tsetBtnDisabled(true);\n\t\t\t\ttry {\n\t\t\t\t\tlet request = new XMLHttpRequest();\n\t\t\t\t\trequest.responseType = 'blob';\n\t\t\t\t\trequest.open('get', url, true);\n\t\t\t\t\trequest.send();\n\t\t\t\t\trequest.onreadystatechange = function() {\n\t\t\t\t\t\tif (this.readyState === 4 && this.status === 200) {\n\t\t\t\t\t\t\tlet obj = window.URL.createObjectURL(this.response);\n\t\t\t\t\t\t\tlet element = window.document.createElement('a');\n\t\t\t\t\t\t\telement.setAttribute('href',obj);\n\t\t\t\t\t\t\telement.setAttribute('download', document.filename);\n\t\t\t\t\t\t\twindow.document.body.appendChild(element);\n\t\t\t\t\t\t\t//onClick property\n\t\t\t\t\t\t\telement.click();\n\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\twindow.URL.revokeObjectURL(obj);\n\t\t\t\t\t\t\t}, 60 * 1000);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tawait downloadNext();\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error(error);\n\t\t\t\t\tsetBtnDisabled(false);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tawait downloadNext();\n\t\tsetBtnDisabled(false);\n\t};\n\tconst handleSelectEntirePage = (e) => {\n\t\tlet selected = e.target.checked;\n\t\tif ( selected ) {\n\t\t\tsetEntirePageSelected(true);\n\t\t\t//add all records on this page to the selectedRecords array\n\t\t\tlet currentPage = pagination.currentPage ? pagination.currentPage : 1;\n\t\t\t//get records from currentPage * paginationPerPage to (currentPage+1) * paginationPerPage\n\t\t\tlet filtered = handleFiltering(documents);\n\t\t\tlet recordsOnPage = filtered.slice((currentPage-1) * paginationPerPage, currentPage * paginationPerPage);\n\t\t\tsetSelectedDocuments(recordsOnPage.map(document => document.id));\n\t\t} else {\n\t\t\tsetEntirePageSelected(false);\n\t\t\tsetSelectedDocuments([]);\n\t\t}\n\t\tsetIndeterminate(false);\n\t}\n\tconst onSelectDocument = (selected, id) => {\n\t\tlet docs = [...selectedDocuments];\n\t\tif (selected) {\n\t\t\tif ( !docs.includes(id) ){\n\t\t\t\tdocs.push(id);\n\t\t\t\tsetSelectedDocuments(docs);\n\t\t\t}\n\t\t} else {\n\t\t\t//remove the document from the selected documents\n\t\t\tdocs = [...selectedDocuments.filter(documentId => documentId!==id)];\n\t\t\tsetSelectedDocuments(docs);\n\t\t}\n\t\t//check if all records on this page are selected\n\t\tlet currentPage = pagination.currentPage ? pagination.currentPage : 1;\n\t\t//get records from currentPage * paginationPerPage to (currentPage+1) * paginationPerPage\n\t\tlet filtered = handleFiltering(documents);\n\t\tlet recordsOnPage = filtered.slice((currentPage-1) * paginationPerPage, currentPage * paginationPerPage);\n\t\tlet allSelected = true;\n\t\tlet hasOneSelected = false;\n\t\trecordsOnPage.forEach(record => {\n\t\t\tif ( !docs.includes(record.id) ) {\n\t\t\t\tallSelected = false;\n\t\t\t} else {\n\t\t\t\thasOneSelected = true;\n\t\t\t}\n\t\t});\n\n\t\tif (allSelected ) {\n\t\t\tsetEntirePageSelected(true);\n\t\t\tsetIndeterminate(false);\n\t\t} else if (!hasOneSelected) {\n\t\t\tsetIndeterminate(false);\n\t\t} else {\n\t\t\tsetEntirePageSelected(false);\n\t\t\tsetIndeterminate(true);\n\t\t}\n\t}\n\n\tconst handleFiltering = (documents) => {\n\t\t// //sort the plugins alphabetically by filename\n\t\tdocuments.sort((a, b) => {\n\t\t\tif (a.file < b.file) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif (a.file > b.file) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\treturn 0;\n\t\t});\n\t\treturn documents;\n\t}\n\tconst columns = [\n\t\t{\n\t\t\tname: <input type=\"checkbox\" className={indeterminate? 'indeterminate' : ''} checked={entirePageSelected} onChange={(e) => handleSelectEntirePage(e)} />,\n\t\t\t// name: (<div className={'cmplz-checkbox-group'}>\n\t\t\t// \t<div className={'cmplz-checkbox-group__item'} >\n\t\t\t// \t\t<Checkbox.Root\n\t\t\t// \t\t\tclassName={indeterminate? 'cmplz-checkbox-group__checkbox indeterminate' : 'cmplz-checkbox-group__checkbox'}\n\t\t\t// \t\t\tonCheckedChange={handleSelectEntirePage}\n\t\t\t// \t\t>\n\t\t\t// \t\t\t<Checkbox.Indicator className=\"cmplz-checkbox-group__indicator\">\n\t\t\t// \t\t\t\t{indeterminate && <Icon className={'bullet'} size={14} color={'dark-blue'} />}\n\t\t\t// \t\t\t\t{!indeterminate && entirePageSelected && \t<Icon name={'check'} size={14} color={'dark-blue'} />}\n\t\t\t// \t\t\t</Checkbox.Indicator>\n\t\t\t// \t\t</Checkbox.Root>\n\t\t\t// \t</div>\n\t\t\t// </div>),\n\t\t\tselector: row => row.selectControl,\n\t\t},\n\t\t{\n\t\t\tname: __('Document',\"complianz-gdpr\"),\n\t\t\tselector: row => row.file,\n\t\t\tsortable: true,\n\t\t},\n\t\t{\n\t\t\tname: __('Region',\"complianz-gdpr\"),\n\t\t\tselector: row => <img alt=\"region\" width=\"20px\" height=\"20px\" src={cmplz_settings.plugin_url+'assets/images/'+row.region+'.svg'} />,\n\t\t\tsortable: true,\n\t\t},\n\t\t{\n\t\t\tname: __('Consent',\"complianz-gdpr\"),\n\t\t\tselector: row => row.consent,\n\t\t\tsortable: true,\n\t\t},\n\t\t{\n\t\t\tname: __('Date',\"complianz-gdpr\"),\n\t\t\tselector: row => row.time,\n\t\t\tsortable: true,\n\t\t},\n\t];\n\tlet filteredDocuments = [...documents];\n\tfilteredDocuments = handleFiltering(filteredDocuments);\n\n\t//add the controls to the plugins\n\tlet data = [];\n\tfilteredDocuments.forEach(document => {\n\t\tlet documentCopy = {...document}\n\t\tdocumentCopy.selectControl = <input type=\"checkbox\" checked={selectedDocuments.includes(documentCopy.id)} onChange={(e) => onSelectDocument( !selectedDocuments.includes(documentCopy.id), documentCopy.id )} />;\n\t\t// documentCopy.selectControl = (<div className={'cmplz-checkbox-group'}>\n\t\t// \t<div className={'cmplz-checkbox-group__item'} >\n\t\t// \t\t<Checkbox.Root\n\t\t// \t\t\tclassName={indeterminate? 'cmplz-checkbox-group__checkbox indeterminate' : 'cmplz-checkbox-group__checkbox'}\n\t\t// \t\t\tonCheckedChange={() => onSelectDocument(selectedDocuments.includes(documentCopy.id), documentCopy.id)}\n\t\t// \t\t>\n\t\t// \t\t\t<Checkbox.Indicator className=\"cmplz-checkbox-group__indicator\">\n\t\t// \t\t\t\t{indeterminate && <Icon className={'check'} size={14} color={'dark-blue'} />}\n\t\t// \t\t\t</Checkbox.Indicator>\n\t\t// \t\t</Checkbox.Root>\n\t\t// \t</div>\n\t\t// </div>);\n\t\tdata.push(documentCopy);\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t{ (disabled ) && <>\n\t\t\t\t<div className=\"cmplz-settings-overlay\">\n\t\t\t\t\t<div className=\"cmplz-settings-overlay-message\"></div>\n\t\t\t\t</div>\n\t\t\t</>}\n\t\t\t{\n\t\t\t\tselectedDocuments.length>0 &&\n\t\t\t\t\t<div className=\"cmplz-selected-document\">\n\t\t\t\t\t\t{selectedDocuments.length>1 && __(\"%s items selected\", \"complianz-gdpr\").replace(\"%s\", selectedDocuments.length)}\n\t\t\t\t\t\t{selectedDocuments.length===1 && __(\"1 item selected\", \"complianz-gdpr\")}\n\t\t\t\t\t\t<div className=\"cmplz-selected-document-controls\">\n\t\t\t\t\t\t\t<button disabled={btnDisabled} className=\"button button-default cmplz-btn-reset\" onClick={() => downloadDocuments()}>{__(\"Download Proof of Consent\", \"complianz-gdpr\")}</button>\n\t\t\t\t\t\t\t<button className=\"button button-default cmplz-reset-button\" onClick={() => onDeleteDocuments(selectedDocuments)}>{__(\"Delete\", \"complianz-gdpr\")}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t}\n\t\t\t{!disabled && DataTable && <>\n\t\t\t\t<DataTable\n\t\t\t\t\tclassName=\"cmplz-data-table\"\n\t\t\t\t\tcolumns={columns}\n\t\t\t\t\tdata={data}\n\t\t\t\t\tdense\n\t\t\t\t\tpagination\n\t\t\t\t\tpaginationPerPage={paginationPerPage}\n\t\t\t\t\tonChangePage={handlePageChange}\n\t\t\t\t\tpaginationState={pagination}\n\t\t\t\t\tnoDataComponent={<div className=\"cmplz-no-documents\">{__(\"No documents\", \"really-simple-ssl\")}</div>}\n\t\t\t\t\tpersistTableHead\n\t\t\t\t\ttheme=\"really-simple-plugins\"\n\t\t\t\t\tcustomStyles={customStyles}\n\t\t\t\t/></>\n\t\t\t}\n\t\t</>\n\t)\n}\nexport default memo(ProofOfConsentControl);\n","import {create} from 'zustand';\nimport * as cmplz_api from \"../../utils/api\";\nconst useProofOfConsentData = create(( set, get ) => ({\n\tdocumentsLoaded: false,\n\tfetching:false,\n\tgenerating:false,\n\tdocuments: [],\n\tdownloadUrl: '',\n\tregions: [],\n\tfields: [],\n\tdeleteDocuments: async (ids) => {\n\t\t//get array of documents to delete\n\t\tlet deleteDocuments = get().documents.filter(document => ids.includes(document.id));\n\t\t//remove the ids from the documents array\n\t\tset((state) => ({\n\t\t\tdocuments: state.documents.filter(document => !ids.includes(document.id)),\n\t\t}));\n\t\tlet data = {};\n\t\tdata.documents = deleteDocuments;\n\t\tawait cmplz_api.doAction('delete_proof_of_consent_documents', data).then((response) => {\n\t\t\treturn response;\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t});\n\n\t},\n\tgenerateProofOfConsent: async () => {\n\t\tset({generating:true});\n\t\tlet data = {};\n\t\tawait cmplz_api.doAction('generate_proof_of_consent', data).then((response) => {\n\n\t\t\treturn response;\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t});\n\t\tawait get().fetchData();\n\t\tset({generating:false});\n\n\t},\n\tfetchData: async ( ) => {\n\t\tif (get().fetching) return;\n\t\tset({fetching:true});\n\t\tlet data = {}\n\t\tconst { documents,regions, download_url} = await cmplz_api.doAction('get_proof_of_consent_documents', data).then((response) => {\n\t\t\treturn response;\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t});\n\t\tset((state) => ({\n\t\t\tdocumentsLoaded: true,\n\t\t\tdocuments: documents,\n\t\t\tregions: regions,\n\t\t\tdownloadUrl: download_url,\n\t\t\tfetching:false,\n\t\t}));\n\t},\n}));\n\nexport default useProofOfConsentData;\n","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};"],"names":["useState","useEffect","__","useProofOfConsentData","memo","ProofOfConsentControl","documents","downloadUrl","deleteDocuments","documentsLoaded","fetchData","btnDisabled","setBtnDisabled","selectedDocuments","setSelectedDocuments","disabled","cmplz_settings","is_premium","paginationPerPage","pagination","setPagination","indeterminate","setIndeterminate","entirePageSelected","setEntirePageSelected","handlePageChange","page","currentPage","DataTable","setDataTable","then","_ref","default","customStyles","headCells","style","paddingLeft","paddingRight","cells","onDeleteDocuments","ids","downloadDocuments","selectedDocumentsCopy","filter","document","includes","id","downloadNext","length","shift","url","file","request","XMLHttpRequest","responseType","open","send","onreadystatechange","readyState","status","obj","window","URL","createObjectURL","response","element","createElement","setAttribute","filename","body","appendChild","click","setTimeout","revokeObjectURL","error","console","handleSelectEntirePage","e","selected","target","checked","filtered","handleFiltering","recordsOnPage","slice","map","onSelectDocument","docs","push","documentId","allSelected","hasOneSelected","forEach","record","sort","a","b","columns","name","type","className","onChange","selector","row","selectControl","sortable","alt","width","height","src","plugin_url","region","consent","time","filteredDocuments","data","documentCopy","Fragment","replace","onClick","dense","onChangePage","paginationState","noDataComponent","persistTableHead","theme","create","cmplz_api","set","get","fetching","generating","regions","fields","state","doAction","catch","generateProofOfConsent","download_url"],"sourceRoot":""}