"use strict";(self.webpackChunkcomplianz_gdpr=self.webpackChunkcomplianz_gdpr||[]).push([[3863,2175,881,2588,5671],{32175:function(e,t,n){n.r(t),n.d(t,{UseCookieScanData:function(){return a}});var r=n(30270),c=n(48399);const a=(0,r.Ue)(((e,t)=>({initialLoadCompleted:!1,setInitialLoadCompleted:t=>e({initialLoadCompleted:t}),iframeLoaded:!1,loading:!1,nextPage:!1,progress:0,cookies:[],lastLoadedIframe:"",setIframeLoaded:t=>e({iframeLoaded:t}),setLastLoadedIframe:t=>e((e=>({lastLoadedIframe:t}))),setProgress:t=>e({progress:t}),fetchProgress:()=>(e({loading:!0}),c.doAction("get_scan_progress",{}).then((t=>(e({initialLoadCompleted:!0,loading:!1,nextPage:t.next_page,progress:t.progress,cookies:t.cookies}),t))))})))},80881:function(e,t,n){n.r(t);var r=n(69307),c=n(99196),a=n(48399),s=n(56293),l=n(82485),o=n(55609),i=n(32175),d=n(82387);t.default=(0,c.memo)((e=>{let{type:t="action",style:n="tertiary",label:u,onClick:p,href:m="",target:f="",disabled:h,action:b,field:g,children:_}=e;if(!u&&!_)return null;const k=(g&&g.button_text?g.button_text:u)||_,{fetchFieldsData:E,showSavedSettingsNotice:y}=(0,s.default)(),{setInitialLoadCompleted:v,setProgress:w}=(0,i.UseCookieScanData)(),{setProgressLoaded:C}=(0,d.default)(),{selectedSubMenuItem:N}=(0,l.default)(),[z,S]=(0,c.useState)(!1),A=`button cmplz-button button--${n} button-${t}`,O=async e=>{await a.doAction(g.action,{}).then((e=>{e.success&&(E(N),"reset_settings"===e.id&&(v(!1),w(0),C(!1)),y(e.message))}))},x=g&&g.warn?g.warn:"";return"action"===t?(0,r.createElement)(r.Fragment,null,(0,r.createElement)(o.__experimentalConfirmDialog,{isOpen:z,onConfirm:async()=>{S(!1),await O()},onCancel:()=>{S(!1)}},x),(0,r.createElement)("button",{className:A,onClick:async e=>{"action"===t&&p?p(e):"action"===t&&b?g&&g.warn?S(!0):await O():window.location.href=g.url},disabled:h},k)):"link"===t?(0,r.createElement)("a",{className:A,href:m,target:f},k):void 0}))},382:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var r=n(69307),c=n(87462),a=n(99196),s=n(28771),l=n(25360),o=n(36206),i=n(77342),d=n(57898),u=n(7546),p=n(29115),m=n(75320);const f="Checkbox",[h,b]=(0,l.b)(f),[g,_]=h(f),k=(0,a.forwardRef)(((e,t)=>{const{__scopeCheckbox:n,name:r,checked:l,defaultChecked:d,required:u,disabled:p,value:f="on",onCheckedChange:h,...b}=e,[_,k]=(0,a.useState)(null),w=(0,s.e)(t,(e=>k(e))),C=(0,a.useRef)(!1),N=!_||Boolean(_.closest("form")),[z=!1,S]=(0,i.T)({prop:l,defaultProp:d,onChange:h}),A=(0,a.useRef)(z);return(0,a.useEffect)((()=>{const e=null==_?void 0:_.form;if(e){const t=()=>S(A.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}}),[_,S]),(0,a.createElement)(g,{scope:n,state:z,disabled:p},(0,a.createElement)(m.WV.button,(0,c.Z)({type:"button",role:"checkbox","aria-checked":y(z)?"mixed":z,"aria-required":u,"data-state":v(z),"data-disabled":p?"":void 0,disabled:p,value:f},b,{ref:w,onKeyDown:(0,o.M)(e.onKeyDown,(e=>{"Enter"===e.key&&e.preventDefault()})),onClick:(0,o.M)(e.onClick,(e=>{S((e=>!!y(e)||!e)),N&&(C.current=e.isPropagationStopped(),C.current||e.stopPropagation())}))})),N&&(0,a.createElement)(E,{control:_,bubbles:!C.current,name:r,value:f,checked:z,required:u,disabled:p,style:{transform:"translateX(-100%)"}}))})),E=e=>{const{control:t,checked:n,bubbles:r=!0,...s}=e,l=(0,a.useRef)(null),o=(0,d.D)(n),i=(0,u.t)(t);return(0,a.useEffect)((()=>{const e=l.current,t=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(t,"checked").set;if(o!==n&&c){const t=new Event("click",{bubbles:r});e.indeterminate=y(n),c.call(e,!y(n)&&n),e.dispatchEvent(t)}}),[o,n,r]),(0,a.createElement)("input",(0,c.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:!y(n)&&n},s,{tabIndex:-1,ref:l,style:{...e.style,...i,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function y(e){return"indeterminate"===e}function v(e){return y(e)?"indeterminate":e?"checked":"unchecked"}const w=k,C=(0,a.forwardRef)(((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,l=_("CheckboxIndicator",n);return(0,a.createElement)(p.z,{present:r||y(l.state)||!0===l.state},(0,a.createElement)(m.WV.span,(0,c.Z)({"data-state":v(l.state),"data-disabled":l.disabled?"":void 0},s,{ref:t,style:{pointerEvents:"none",...e.style}})))}));var N=n(65736),z=n(23361),S=n(80881),A=(0,a.memo)((e=>{let{indeterminate:t,label:n,value:c,id:s,onChange:l,required:o,disabled:i,options:d={}}=e;const[u,p]=(0,a.useState)(!1);let m=c;Array.isArray(m)||(m=""===m?[]:[m]),(0,a.useEffect)((()=>{let e=1===Object.keys(d).length&&"true"===Object.keys(d)[0];p(e)}),[]),t&&(c=!0);const f=m,[h,b]=(0,a.useState)(!1);let g=!1;Object.keys(d).length>10&&(g=!0);const _=e=>u?c:f.includes(e),k=()=>{b(!h)};let E=i&&!Array.isArray(i);return 0===d.length?(0,r.createElement)(r.Fragment,null,(0,N.__)("No options found","complianz-gdpr")):(0,r.createElement)("div",{className:"cmplz-checkbox-group"},Object.entries(d).map(((e,a)=>{let[d,p]=e;return(0,r.createElement)("div",{key:d,className:"cmplz-checkbox-group__item"+(!h&&a>10?" cmplz-hidden":"")},(0,r.createElement)(w,{className:"cmplz-checkbox-group__checkbox",id:s+"_"+d,checked:_(d),"aria-label":n,disabled:E||Array.isArray(i)&&i.includes(d),required:o,onCheckedChange:e=>((e,t)=>{if(u)l(!c);else{const e=f.includes(t)?f.filter((e=>e!==t)):[...f,t];l(e)}})(0,d)},(0,r.createElement)(C,{className:"cmplz-checkbox-group__indicator"},(0,r.createElement)(z.default,{name:t?"indeterminate":"check",size:14,color:"dark-blue"}))),(0,r.createElement)("label",{className:"cmplz-checkbox-group__label",htmlFor:s+"_"+d},p))})),!h&&g&&(0,r.createElement)(S.default,{onClick:k},(0,N.__)("Show more","complianz-gdpr")),h&&g&&(0,r.createElement)(S.default,{onClick:k},(0,N.__)("Show less","complianz-gdpr")))}))},32588:function(e,t,n){n.r(t);var r=n(69307),c=n(99196),a=n(79552),s=n(23361),l=n(65736);t.default=(0,c.memo)((e=>{let{value:t=!1,onChange:n,required:c,defaultValue:o,disabled:i,options:d={},canBeEmpty:u=!0,label:p,innerRef:m}=e;if(Array.isArray(d)){let e={};d.map((t=>{e[t.value]=t.label})),d=e}return u?(""===t||!1===t||0===t)&&(d={0:(0,l.__)("Select an option","complianz-gdpr"),...d}):t||(t=Object.keys(d)[0]),(0,r.createElement)("div",{className:"cmplz-input-group cmplz-select-group",key:p},(0,r.createElement)(a.fC,{value:t,defaultValue:o,onValueChange:n,required:c,disabled:i&&!Array.isArray(i)},(0,r.createElement)(a.xz,{className:"cmplz-select-group__trigger"},(0,r.createElement)(a.B4,null),(0,r.createElement)(s.default,{name:"chevron-down"})),(0,r.createElement)(a.VY,{className:"cmplz-select-group__content",position:"popper"},(0,r.createElement)(a.u_,{className:"cmplz-select-group__scroll-button"},(0,r.createElement)(s.default,{name:"chevron-up"})),(0,r.createElement)(a.l_,{className:"cmplz-select-group__viewport"},(0,r.createElement)(a.ZA,null,Object.entries(d).map((e=>{let[t,n]=e;return(0,r.createElement)(a.ck,{disabled:Array.isArray(i)&&i.includes(t),className:"cmplz-select-group__item",key:t,value:t},(0,r.createElement)(a.eT,null,n))})))),(0,r.createElement)(a.$G,{className:"cmplz-select-group__scroll-button"},(0,r.createElement)(s.default,{name:"chevron-down"})))))}))},38857:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var r=n(69307),c=n(99196),a=n(87462),s=n(36206),l=n(28771),o=n(25360),i=n(77342),d=n(57898),u=n(7546),p=n(75320);const m="Switch",[f,h]=(0,o.b)(m),[b,g]=f(m),_=(0,c.forwardRef)(((e,t)=>{const{__scopeSwitch:n,name:r,checked:o,defaultChecked:d,required:u,disabled:m,value:f="on",onCheckedChange:h,...g}=e,[_,y]=(0,c.useState)(null),v=(0,l.e)(t,(e=>y(e))),w=(0,c.useRef)(!1),C=!_||Boolean(_.closest("form")),[N=!1,z]=(0,i.T)({prop:o,defaultProp:d,onChange:h});return(0,c.createElement)(b,{scope:n,checked:N,disabled:m},(0,c.createElement)(p.WV.button,(0,a.Z)({type:"button",role:"switch","aria-checked":N,"aria-required":u,"data-state":E(N),"data-disabled":m?"":void 0,disabled:m,value:f},g,{ref:v,onClick:(0,s.M)(e.onClick,(e=>{z((e=>!e)),C&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())}))})),C&&(0,c.createElement)(k,{control:_,bubbles:!w.current,name:r,value:f,checked:N,required:u,disabled:m,style:{transform:"translateX(-100%)"}}))})),k=e=>{const{control:t,checked:n,bubbles:r=!0,...s}=e,l=(0,c.useRef)(null),o=(0,d.D)(n),i=(0,u.t)(t);return(0,c.useEffect)((()=>{const e=l.current,t=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(t,"checked").set;if(o!==n&&c){const t=new Event("click",{bubbles:r});c.call(e,n),e.dispatchEvent(t)}}),[o,n,r]),(0,c.createElement)("input",(0,a.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:n},s,{tabIndex:-1,ref:l,style:{...e.style,...i,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function E(e){return e?"checked":"unchecked"}const y=_,v=(0,c.forwardRef)(((e,t)=>{const{__scopeSwitch:n,...r}=e,s=g("SwitchThumb",n);return(0,c.createElement)(p.WV.span,(0,a.Z)({"data-state":E(s.checked),"data-disabled":s.disabled?"":void 0},r,{ref:t}))}));var w=(0,c.memo)((e=>{let{value:t,onChange:n,required:c,disabled:a,className:s,label:l}=e,o=t;return"0"!==t&&"1"!==t||(o="1"===t),(0,r.createElement)("div",{className:"cmplz-input-group cmplz-switch-group"},(0,r.createElement)(y,{className:"cmplz-switch-root "+s,checked:o,onCheckedChange:n,disabled:a,required:c},(0,r.createElement)(v,{className:"cmplz-switch-thumb"})))}))},13863:function(e,t,n){n.r(t);var r=n(69307),c=n(65736),a=(n(38857),n(32588)),s=n(85671),l=n(382);t.default=e=>{const{setScript:t,blockedScripts:n,fetching:o}=(0,s.default)(),i=n,d=e.script,u=e=>{if(!d.dependency||0===d.dependency.length)return"";let t=Object.entries(d.dependency);for(const[n,r]of t)if(n===e)return r;return""},p=(e,t)=>{let n={...e};for(const[e,r]of Object.entries(n))if(r===t){delete n[e];break}return n};let m=d.hasOwnProperty("urls")?Object.entries(d.urls):[""];return(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{className:"cmplz-details-row cmplz-details-row__checkbox"},(0,r.createElement)(l.default,{id:d.id+"dependency",disabled:o,value:d.enable_dependency,onChange:n=>((n,r)=>{let c={...d};c.enable_dependency=n,t(c,e.type)})(n),options:{true:(0,c.__)("Enable dependency","complianz-gdpr")}})),!!d.enable_dependency&&(0,r.createElement)("div",{className:"cmplz-details-row cmplz-details-row"},m.length>1&&m.map(((n,s)=>{let[l,m]=n;return(0,r.createElement)("div",{key:s,className:"cmplz-scriptcenter-dependencies"},(0,r.createElement)(a.default,{disabled:o,value:u(m),options:p(i,m),onChange:n=>((n,r)=>{let c={...d},a={...c.dependency};a[r]=n,c.dependency=a,t(c,e.type)})(n,m)}),(0,r.createElement)("div",null,(0,c.__)("waits for: ","complianz-gdpr"),m||(0,c.__)("Empty URL","complianz-gdpr")))})),m.length<=1&&(0,r.createElement)(r.Fragment,null,(0,c.__)("Add a URL to create a dependency between two URLs","complianz-gdpr"))))}},85671:function(e,t,n){n.r(t);var r=n(30270),c=n(12902),a=n(48399);const s=(0,r.Ue)(((e,t)=>({integrationsLoaded:!1,fetching:!1,services:[],plugins:[],scripts:[],placeholders:[],blockedScripts:[],setScript:(t,n)=>{e((0,c.ZP)((e=>{if("block_script"===n){let n=e.blockedScripts;if(t.urls){for(const[e,r]of Object.entries(t.urls)){if(!r||0===r.length)continue;let e=!1;for(const[t,c]of Object.entries(n))r===t&&(e=!0);e||(n[r]=r)}e.blockedScripts=n}}const r=e.scripts[n].findIndex((e=>e.id===t.id));-1!==r&&(e.scripts[n][r]=t)})))},fetchIntegrationsData:async()=>{if(t().fetching)return;e({fetching:!0});const{services:n,plugins:r,scripts:c,placeholders:a,blocked_scripts:s}=await l();let o=c;o.block_script&&o.block_script.length>0&&o.block_script.forEach(((e,t)=>{e.id=t})),o.add_script&&o.add_script.length>0&&o.add_script.forEach(((e,t)=>{e.id=t})),o.whitelist_script&&o.whitelist_script.length>0&&o.whitelist_script.forEach(((e,t)=>{e.id=t})),e((()=>({integrationsLoaded:!0,services:n,plugins:r,scripts:o,fetching:!1,placeholders:a,blockedScripts:s})))},addScript:n=>{e({fetching:!0}),e((0,c.ZP)((e=>{e.scripts[n].push({name:"general",id:e.scripts[n].length,enable:!0})})));let r=t().scripts;return a.doAction("update_scripts",{scripts:r}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},saveScript:(n,r)=>{e({fetching:!0}),e((0,c.ZP)((e=>{const t=e.scripts[r].findIndex((e=>e.id===n.id));-1!==t&&(e.scripts[r][t]=n)})));let s=t().scripts;return a.doAction("update_scripts",{scripts:s}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},deleteScript:(n,r)=>{e({fetching:!0}),e((0,c.ZP)((e=>{const t=e.scripts[r].findIndex((e=>e.id===n.id));-1!==t&&e.scripts[r].splice(t,1)})));let s=t().scripts;return a.doAction("update_scripts",{scripts:s}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},updatePluginStatus:async(t,n)=>{e({fetching:!0}),e((0,c.ZP)((e=>{const r=e.plugins.findIndex((e=>e.id===t));-1!==r&&(e.plugins[r].enabled=n)})));const r=await a.doAction("update_plugin_status",{plugin:t,enabled:n}).then((e=>e)).catch((e=>{console.error(e)}));return e({fetching:!1}),r},updatePlaceholderStatus:async(t,n,r)=>{e({fetching:!0}),r&&e((0,c.ZP)((e=>{const r=e.plugins.findIndex((e=>e.id===t));-1!==r&&(e.plugins[r].placeholder=n?"enabled":"disabled")})));const s=await a.doAction("update_placeholder_status",{id:t,enabled:n}).then((e=>e)).catch((e=>{console.error(e)}));return e({fetching:!1}),s}})));t.default=s;const l=()=>a.doAction("get_integrations_data",{}).then((e=>e)).catch((e=>{console.error(e)}))},29115:function(e,t,n){n.d(t,{z:function(){return l}});var r=n(99196),c=n(91850),a=n(28771),s=n(9981);const l=e=>{const{present:t,children:n}=e,l=function(e){const[t,n]=(0,r.useState)(),a=(0,r.useRef)({}),l=(0,r.useRef)(e),i=(0,r.useRef)("none"),d=e?"mounted":"unmounted",[u,p]=function(e,t){return(0,r.useReducer)(((e,n)=>{const r=t[e][n];return null!=r?r:e}),e)}(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return(0,r.useEffect)((()=>{const e=o(a.current);i.current="mounted"===u?e:"none"}),[u]),(0,s.b)((()=>{const t=a.current,n=l.current;if(n!==e){const r=i.current,c=o(t);e?p("MOUNT"):"none"===c||"none"===(null==t?void 0:t.display)?p("UNMOUNT"):p(n&&r!==c?"ANIMATION_OUT":"UNMOUNT"),l.current=e}}),[e,p]),(0,s.b)((()=>{if(t){const e=e=>{const n=o(a.current).includes(e.animationName);e.target===t&&n&&(0,c.flushSync)((()=>p("ANIMATION_END")))},n=e=>{e.target===t&&(i.current=o(a.current))};return t.addEventListener("animationstart",n),t.addEventListener("animationcancel",e),t.addEventListener("animationend",e),()=>{t.removeEventListener("animationstart",n),t.removeEventListener("animationcancel",e),t.removeEventListener("animationend",e)}}p("ANIMATION_END")}),[t,p]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:(0,r.useCallback)((e=>{e&&(a.current=getComputedStyle(e)),n(e)}),[])}}(t),i="function"==typeof n?n({present:l.isPresent}):r.Children.only(n),d=(0,a.e)(l.ref,i.ref);return"function"==typeof n||l.isPresent?(0,r.cloneElement)(i,{ref:d}):null};function o(e){return(null==e?void 0:e.animationName)||"none"}l.displayName="Presence"}}]);