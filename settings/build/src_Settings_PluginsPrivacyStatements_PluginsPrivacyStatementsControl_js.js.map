{"version":3,"file":"src_Settings_PluginsPrivacyStatements_PluginsPrivacyStatementsControl_js.js","mappings":"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","sources":["webpack://complianz-gdpr/./src/Settings/Panel.js","webpack://complianz-gdpr/./src/Settings/PluginsPrivacyStatements/PluginsPrivacyStatementsControl.js","webpack://complianz-gdpr/./src/Settings/PluginsPrivacyStatements/PluginsPrivacyStatementsData.js","webpack://complianz-gdpr/./src/Settings/PluginsPrivacyStatements/SinglePrivacyStatement.js"],"sourcesContent":["import Icon from \"../utils/Icon\";\nconst Panel = (props) => {\n\treturn (\n\t\t<>\n\t\t  <div className=\"cmplz-panel__list__item\" key={props.id} style={props.style ? props.style : {}}>\n\t\t\t<details>\n\t\t\t  <summary>\n\t\t\t  \t<div className=\"cmplz-panel__list__item__title\">{props.summary}</div>\n\t\t\t    <div className=\"cmplz-panel__list__item__comment\">{props.comment}</div>\n\t\t\t    <div className=\"cmplz-panel__list__item__icons\">{props.icons}</div>\n\t\t\t\t<Icon name={'chevron-down'} size={18} />\n\t\t\t  </summary>\n\t\t\t  <div className=\"cmplz-panel__list__item__details\">\n\t\t\t  \t{props.details}\n\t\t\t  </div>\n\t\t\t</details>\n\t\t  </div>\n\t\t</>\n\n\t);\n}\n\nexport default Panel\n","import {useEffect, useState} from \"@wordpress/element\";\n\nimport useFields from \"../Fields/FieldsData\";\nimport usePrivacyStatementData from \"./PluginsPrivacyStatementsData\";\nimport SinglePrivacyStatement from \"./SinglePrivacyStatement\";\nimport { __ } from '@wordpress/i18n';\nimport Placeholder from \"../../Placeholder/Placeholder\";\nimport {memo} from \"react\";\n\nconst PluginsPrivacyStatementsControl = () => {\n\tconst [privacyStatementGenerated, setPrivacyStatementGenerated] = useState(true);\n\tconst { getFieldValue, fields} = useFields();\n\tconst {privacyStatementsLoaded, fetchPrivacyStatementsData, privacyStatements} = usePrivacyStatementData();\n\n\tuseEffect (  () => {\n\t\tlet generated = getFieldValue('privacy-statement') ==='generated';\n\t\tsetPrivacyStatementGenerated( generated );\n\t\tif ( !privacyStatementsLoaded && generated) {\n\t\t\tfetchPrivacyStatementsData();\n\t\t}\n\t},[fields])\n\n\n\n\tif (!privacyStatementsLoaded && privacyStatementGenerated) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Placeholder lines=\"3\"></Placeholder>\n\t\t\t</>\n\t\t)\n\t}\n\treturn (\n\t\t<>\n\t\t\t<div >\n\t\t\t\t{\n\t\t\t\t\tprivacyStatementGenerated && privacyStatements.length===0 &&\n\t\t\t\t\t<>\n\t\t\t\t\t\t{  __(\"No plugins with suggested statements found.\", 'complianz-gdpr' )}\n\t\t\t\t\t</>\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\t!privacyStatementGenerated &&\n\t\t\t\t\t<>\n\t\t\t\t\t\t{__(\"You have chosen to generate your own Privacy Statement, which means the option to add custom text to it is not applicable.\", 'complianz-gdpr' )}\n\t\t\t\t\t</>\n\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\tprivacyStatementGenerated &&\n\t\t\t\t\t<>\n\t\t\t\t\t\t{ Array.isArray(privacyStatements) && privacyStatements.map( (plugin, i) => <SinglePrivacyStatement key={i} plugin={plugin}/> )}\n\t\t\t\t\t</>\n\n\t\t\t\t}\n\t\t\t</div>\n\t\t</>\n\n\t);\n\n}\n\nexport default memo(PluginsPrivacyStatementsControl)\n","import {create} from 'zustand';\nimport * as cmplz_api from \"../../utils/api\";\nconst usePrivacyStatementData = create(( set, get ) => ({\n\tprivacyStatementsLoaded: false,\n\tprivacyStatements : [],\n\n\tfetchPrivacyStatementsData: async () => {\n\t\tconst {privacyStatements}   = await cmplz_api.doAction('wp_privacy_policy_data' ).then( ( response ) => {\n\t\t\treturn response;\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t});\n\t\tset({privacyStatementsLoaded: true, privacyStatements:privacyStatements });\n\t}\n}));\n\nexport default usePrivacyStatementData;\n","import Panel from \"../Panel\";\nimport { __ } from '@wordpress/i18n';\nimport Icon from \"../../utils/Icon\";\nimport {memo} from \"react\";\nimport useFields from \"../Fields/FieldsData\";\n/**\n * Render a help notice in the sidebar\n */\nconst SinglePrivacyStatement = (props) => {\n\tconst {updateField, setChangedField, getFieldValue} = useFields();\n\n\tconst Details = () =>{\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div className=\"cmplz-details-row\" dangerouslySetInnerHTML={{__html:props.plugin.policy_text}}>\n\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n\n\tconst addPolicyHandler = (text, e) => {\n\t\te.preventDefault();\n\t\tlet newText = getFieldValue('custom_privacy_policy_text');\n\t\tnewText += text;\n\t\tupdateField('custom_privacy_policy_text', newText);\n\t\tsetChangedField('custom_privacy_policy_text', newText);\n\t}\n\n\tconst Icons = () => {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<a href=\"#\" onClick = { (e) => addPolicyHandler(props.plugin.policy_text, e) }>\n\t\t\t\t\t<Icon tooltip={__( \"Add to annex of Privacy Statement\", \"complianz-gdpr\" )} name = 'plus'  />\n\t\t\t\t</a>\n\t\t\t\t{ props.plugin.consent_api !== 'na' &&\n\t\t\t\t\t<>\n\t\t\t\t\t\t{ !props.plugin.consent_api && <Icon tooltip={__( \"Does not conform with the Consent API\", \"complianz-gdpr\" )} name = 'circle' color=\"red\"  />}\n\t\t\t\t\t\t{ props.plugin.consent_api && <Icon tooltip={__( \"Conforms to the Consent API\", \"complianz-gdpr\" )} name = 'circle' color=\"green\"  /> }\n\t\t\t\t\t</>\n\n\t\t\t\t}\n\t\t\t</>\n\t\t)\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<Panel summary={props.plugin.plugin_name} icons={Icons()} details={Details()} />\n\t\t</>\n\t);\n\n}\n\nexport default memo(SinglePrivacyStatement)\n"],"names":["Icon","Panel","props","createElement","Fragment","className","key","id","style","summary","comment","icons","name","size","details","useEffect","useState","useFields","usePrivacyStatementData","SinglePrivacyStatement","__","Placeholder","memo","PluginsPrivacyStatementsControl","privacyStatementGenerated","setPrivacyStatementGenerated","getFieldValue","fields","privacyStatementsLoaded","fetchPrivacyStatementsData","privacyStatements","generated","lines","length","Array","isArray","map","plugin","i","create","cmplz_api","set","get","doAction","then","response","catch","error","console","updateField","setChangedField","Details","dangerouslySetInnerHTML","__html","policy_text","addPolicyHandler","text","e","preventDefault","newText","Icons","href","onClick","tooltip","consent_api","color","plugin_name"],"sourceRoot":""}