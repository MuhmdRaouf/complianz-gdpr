{"version":3,"file":"src_Settings_FinishControl_js.js","mappings":"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","sources":["webpack://complianz-gdpr/./src/Settings/FinishControl.js"],"sourcesContent":["// import Icon from \"../utils/Icon\";\nimport { __ } from '@wordpress/i18n';\nimport useFields from \"./Fields/FieldsData\";\nimport * as cmplz_api from \"../utils/api\";\nimport {useEffect, useState} from \"@wordpress/element\";\nimport {memo} from \"react\";\n\n/**\n * Render a help notice in the sidebar\n */\nconst FinishControl = () => {\n\tconst {fields, updateField, setChangedField, updateFieldsData, addHelpNotice, fetchAllFieldsCompleted, allRequiredFieldsCompleted, notCompletedRequiredFields} = useFields();\n\tconst [cookiebannerRequired, setCookiebannerRequired] = useState(true);\n\n\tuseEffect ( () => {\n\t\t\tlet data = {};\n\t\t\tcmplz_api.doAction( 'get_cookiebanner_required', data).then( ( response ) => {\n\t\t\t\tsetCookiebannerRequired(response.required);\n\t\t\t});\n\t},[fields]);\n\n\tuseEffect ( () => {\n\t\tupdateField('cookie_banner_required', cookiebannerRequired);\n\t\tsetChangedField('cookie_banner_required', cookiebannerRequired);\n\t\tupdateFieldsData();\n\t}, [cookiebannerRequired])\n\n\tuseEffect ( () => {\n\t\tif ( cookiebannerRequired ) {\n\t\t\tlet explanation =\n\t\t\t\t__( \"The cookie banner and cookie blocker are required on your website.\",\"complianz-gdpr\")\n\t\t\t\t+\" \"+__( \"You can enable them both here, then you should check your website if your configuration is working properly.\",\"complianz-gdpr\")\n\t\t\t\t+\" \"+__(\"Please read the below article to debug any issues while in safe mode. Safe mode is available under settings.\",\"complianz-gdpr\")\n\t\t\t\t+' '+__(\"You will find tips and tricks on your dashboard after you have configured your cookie banner.\", 'complianz-gdpr' )\n\t\t\taddHelpNotice('last-step-feedback', 'default', explanation, __('A consent banner is required', 'complianz-gdpr'), 'https://complianz.io/debugging-manual');\n\t\t} else {\n\t\t\tlet explanation = __( \"Your site does not require a cookie banner. If you think you need a cookie banner, please review your wizard settings.\",\"complianz-gdpr\")\n\t\t\taddHelpNotice('last-step-feedback', 'warning', explanation, __('A consent banner is not required', 'complianz-gdpr'));\n\t\t}\n\t},[ cookiebannerRequired ]);\n\n\tuseEffect ( () => {\n\t\tfetchAllFieldsCompleted();\n\t}, [fields ]);\n\n\treturn (\n\t\t<>\n\t\t\t{ allRequiredFieldsCompleted && <div>{__( \"Click '%s' to complete the configuration. You can come back to change your configuration at any time.\", 'complianz-gdpr' ).replace('%s', __( \"Finish\", 'complianz-gdpr' ) ) }</div>}\n\t\t\t{ !allRequiredFieldsCompleted &&\n\t\t\t\t<div>\n\t\t\t\t\t{ cookiebannerRequired && <p>{\n\t\t\t\t\t\t__( \"The cookie banner and the cookie blocker are now ready to be enabled.\", \"complianz-gdpr\") + ' ' +\n\t\t\t\t\t\t__( \"Please check your website after finishing the wizard to verify that your configuration is working properly.\", \"complianz-gdpr\")\n\t\t\t\t\t}\n\t\t\t\t\t</p> }\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{__(\"Not all required fields are completed yet.\", \"complianz-gdpr\")\n\t\t\t\t\t\t+ \" \" +\n\t\t\t\t\t\t__(\"Please check the wizard to complete all required questions.\", 'complianz-gdpr')}\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>{__(\"The following required fields have not been completed:\", 'complianz-gdpr' )}</p>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t{notCompletedRequiredFields.map( (field, i) => <li key={i}>{field.parent_label ? field.parent_label : field.label}</li>)}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t}\n\n\t\t</>\n\n\t);\n\n}\n\nexport default memo(FinishControl)\n"],"names":["__","useFields","cmplz_api","useEffect","useState","memo","FinishControl","fields","updateField","setChangedField","updateFieldsData","addHelpNotice","fetchAllFieldsCompleted","allRequiredFieldsCompleted","notCompletedRequiredFields","cookiebannerRequired","setCookiebannerRequired","data","doAction","then","response","required","explanation","createElement","Fragment","replace","map","field","i","key","parent_label","label"],"sourceRoot":""}