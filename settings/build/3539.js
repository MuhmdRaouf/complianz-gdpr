"use strict";(globalThis.webpackChunkcomplianz_gdpr=globalThis.webpackChunkcomplianz_gdpr||[]).push([[3539,3909,4064],{83539:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var l=a(69307),s=a(65736),c=a(53909),n=a(14531),r=a(82387),i=a(56293);const o=()=>{const{percentageCompleted:e,filter:t,notices:a,progressLoaded:o,fetchProgressData:m,error:d,addNotice:p}=(0,r.default)(),{fetchAllFieldsCompleted:u,allRequiredFieldsCompleted:h,fields:_}=(0,i.default)();(0,l.useEffect)((()=>{(async()=>{o||await m(),u()})()}),[t,_]);let g="";if(e<80&&(g+="cmplz-orange"),!o||d)return(0,l.createElement)(n.default,{lines:"9",error:d});let f=a;if("remaining"===t&&(f=f.filter((function(e){return"completed"!==e.status}))),!h&&0===f.filter((e=>"all_fields_completed"===e.id)).length){let e={id:"all_fields_completed",status:"urgent",message:(0,s.__)('Not all fields have been entered, or you have not clicked the "finish" button yet.',"complianz-gdpr")};f.push(e)}return h&&(f=f.filter((e=>"all_fields_completed"!==e.id))),f.sort((function(e,t){return e.status===t.status?0:e.status<t.status?1:-1})),(0,l.createElement)("div",{className:"cmplz-progress-block"},(0,l.createElement)("div",{className:"cmplz-progress-bar"},(0,l.createElement)("div",{className:"cmplz-progress"},(0,l.createElement)("div",{className:"cmplz-bar "+g,style:Object.assign({},{width:e+"%"})}))),(0,l.createElement)("div",{className:"cmplz-progress-text"},(0,l.createElement)("h1",{className:"cmplz-progress-percentage"},e,"%"),(0,l.createElement)("h5",{className:"cmplz-progress-text-span"},e<100&&(0,s.__)("Consent Management is activated on your site.","complianz-gdpr")+" ",e<100&&1===a.length&&(0,s.__)("You still have 1 task open.","complianz-gdpr"),e<100&&a.length>1&&(0,s.__)("You still have %s tasks open.","complianz-gdpr").replace("%s",a.length),100===e&&(0,s.__)("Well done! Your website is ready for your selected regions.","complianz-gdpr"))),(0,l.createElement)("div",{className:"cmplz-scroll-container"},f.map(((e,t)=>(0,l.createElement)(c.default,{key:t,notice:e})))))}},53909:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var l=a(69307),s=a(65736),c=a(43684),n=a(9818),r=a(48399),i=a(14064),o=a(56293),m=a(82387),d=a(82485);const p=e=>{const{dismissNotice:t,fetchProgressData:a}=(0,m.default)(),{getField:p,setHighLightField:u,fetchFieldsData:h}=(0,o.default)(),{setSelectedSubMenuItem:_}=(0,d.default)();let g=e.notice,f="premium"===g.icon,z=g.url&&-1!==g.url.indexOf("complianz.io"),b=g.status.charAt(0).toUpperCase()+g.status.slice(1);return(0,l.createElement)("div",{className:"cmplz-task-element"},(0,l.createElement)("span",{className:"cmplz-task-status cmplz-"+g.status},b),(0,l.createElement)("p",{className:"cmplz-task-message",dangerouslySetInnerHTML:{__html:g.message}}),z&&g.url&&(0,l.createElement)("a",{target:"_blank",href:g.url},(0,s.__)("More info","complianz-gdpr")),g.clear_cache_id&&(0,l.createElement)("span",{className:"cmplz-task-enable button button-secondary",onClick:()=>(async e=>{let t={};t.cache_id=e,r.doAction("clear_cache",t).then((async e=>{(0,n.dispatch)("core/notices").createNotice("success",(0,s.__)("Re-started test","complianz-gdpr"),{__unstableHTML:!0,id:"cmplz_clear_cache",type:"snackbar",isDismissible:!0}).then((0,i.default)(3e3)).then((e=>{(0,n.dispatch)("core/notices").removeNotice("rsssl_clear_cache")})),await h(),await a()}))})(g.clear_cache_id)},(0,s.__)("Re-check","complianz-gdpr")),!f&&!z&&g.url&&(0,l.createElement)("a",{className:"cmplz-task-enable button button-secondary",href:g.url},(0,s.__)("Fix","complianz-gdpr")),!f&&g.highlight_field_id&&(0,l.createElement)("span",{className:"cmplz-task-enable button button-secondary",onClick:()=>(async()=>{u(e.notice.highlight_field_id);let t=p(e.notice.highlight_field_id);await _(t.menu_id)})()},(0,s.__)("Fix","complianz-gdpr")),g.plusone&&(0,l.createElement)("span",{className:"cmplz-plusone"},"1"),g.dismissible&&"completed"!==g.status&&(0,l.createElement)("div",{className:"cmplz-task-dismiss"},(0,l.createElement)("button",{type:"button",onClick:e=>t(g.id)},(0,l.createElement)(c.default,{name:"times"}))))}},14064:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});const l=e=>function(t){return new Promise((a=>setTimeout((()=>a(t)),e)))}}}]);