"use strict";(self.webpackChunkcomplianz_gdpr=self.webpackChunkcomplianz_gdpr||[]).push([[2870,5972],{72870:(e,t,r)=>{r.r(t),r.d(t,{default:()=>o});var n=r(69307),c=r(56293),l=r(5830),s=r(37839),a=r(75972);const o=()=>{const e=(0,n.useRef)(null),{fields:t,updateField:r,getFieldValue:o,getField:i,setChangedField:p,changedFields:u}=(0,c.default)(),{setBannerContainerClass:d,bannerContainerClass:m,cssLoading:f,cssLoaded:y,generatePreviewCss:g,pageLinks:z,selectedBanner:_,selectedBannerId:S,fetchBannerData:v,setBannerDataLoaded:b,bannerDataLoaded:k,bannerHtml:h,manageConsentHtml:w,consentType:q,vendorCount:E}=(0,l.default)(),[L,x]=(0,n.useState)(null),[P,A]=(0,n.useState)(0),[C,I]=(0,n.useState)(!1),[O,T]=(0,n.useState)(!1);(0,n.useEffect)((()=>{let e="tcf"===o("uses_ad_cookies_personalized")||"yes"===o("uses_ad_cookies_personalized");I(e)}),[o("uses_ad_cookies_personalized")]),(0,n.useEffect)((()=>{k||v()}),[k]),(0,n.useEffect)((()=>{v()}),[o("a_b_testing_buttons")]),(0,s.Z)((()=>{R()})),(0,n.useEffect)((()=>{k&&(r("consent_type",q),p("consent_type",q))}),[q]),(0,n.useEffect)((()=>{b(!1),A(P+1)}),[o("uses_ad_cookies_personalized")]),(0,n.useEffect)((()=>{r("consent_type",q)}),[q]),(0,n.useEffect)((()=>{H(),A(P+1)}),[u]),(0,n.useEffect)((()=>{S>0&&(F(),A(P+1))}),[S,q,k,C]),(0,n.useEffect)((()=>{S>0&&D()}),[P]);const F=()=>{let e=V();for(const t of e)if(_.hasOwnProperty(t.id)){let e=_[t.id];(0===e.length||e.hasOwnProperty("text")&&0===e.text.length)&&(e=t.default),r(t.id,e)}r("manage_consent",_.revoke)},H=()=>{let e=V();for(const t of e)_.hasOwnProperty(t.id)&&(_[t.id]=t.value)},M=async()=>{clearTimeout(L);let e=V();if(O){const t=setTimeout((async()=>{await g(e)}),500);x(t)}else await g(e),T(!0)},D=async()=>{await M(),"optin"===q&&j()&&await M(),1==o("soft_cookiewall")&&(d("cmplz-soft-cookiewall"),setTimeout((function(){d("")}),4e3)),W(!0)};(0,n.useEffect)((()=>{if(!C)return;const t=e.current;if(e.current&&"optin"===q&&t){let e=i("tcf_purposes"),r=(0,a.filterArray)(e.options,e.value);const n=(0,a.getPurposes)("marketing",!1),c=(0,a.getPurposes)("statistics",!1),l=(0,a.filterArray)(r,n),s=(0,a.filterArray)(r,c);let o=i("tcf_features"),p=(0,a.filterArray)(o.options,o.value),u=i("tcf_specialFeatures"),d=(0,a.filterArray)(u.options,u.value),m=i("tcf_specialPurposes"),f=(0,a.filterArray)(m.options,m.value);const y=t.querySelector(".cmplz-tcf .cmplz-marketing .cmplz-description"),g=t.querySelector(".cmplz-tcf .cmplz-statistics .cmplz-description"),z=t.querySelector(".cmplz-tcf .cmplz-features .cmplz-description"),_=t.querySelector(".cmplz-tcf .cmplz-specialfeatures .cmplz-title"),S=t.querySelector(".cmplz-tcf .cmplz-specialpurposes .cmplz-title");let v=t.querySelector(".cmplz-tcf .cmplz-features"),b=t.querySelector(".cmplz-tcf .cmplz-specialpurposes"),k=t.querySelector(".cmplz-tcf .cmplz-specialfeatures"),h=t.querySelector(".cmplz-tcf .cmplz-statistics");0===p.length&&v&&(v.style.display="none"),0===f.length&&b&&(b.style.display="none"),0===d.length&&k&&(k.style.display="none"),0===s.length&&h&&(h.style.display="none"),y&&(y.innerHTML=(0,a.concatenateString)(l)),g&&(g.innerHTML=(0,a.concatenateString)(s)),z&&(z.innerHTML=(0,a.concatenateString)(p)),_&&(_.innerHTML=(0,a.concatenateString)(d)),S&&(S.innerHTML=(0,a.concatenateString)(f))}}),[C,P,k,q,f,t]);const B=(e,t,r)=>{let n=new RegExp(t,"g");return e.replace(n,r)},W=e=>{let t=document.querySelector(".cmplz-manage-consent"),r=document.querySelector("#cmplz-cookiebanner-container .cmplz-cookiebanner");t&&(t.style.display="none"),r&&e&&"optin"===q&&"view-preferences"===o("use_categories")&&(r.querySelector(".cmplz-view-preferences").style.display="block",r.querySelector(".cmplz-save-preferences").style.display="none"),document.addEventListener("click",(e=>{e.target.closest(".cmplz-manage-consent")&&(r&&(r.style.display="block"),t&&(t.style.display="none")),(e.target.closest(".cmplz-close")||e.target.closest(".cmplz-accept")||e.target.closest(".cmplz-deny"))&&(r&&(r.style.display="none"),t&&(t.style.display="block")),r&&e.target.closest(".cmplz-view-preferences")&&(r.classList.add("cmplz-categories-visible"),r.querySelector(".cmplz-categories").style.display="block",r.querySelector(".cmplz-categories").classList.add("cmplz-fade-in"),r.querySelector(".cmplz-view-preferences").style.display="none",r.querySelector(".cmplz-save-preferences").style.display="block"),r&&e.target.closest(".cmplz-save-preferences")&&(r.classList.remove("cmplz-categories-visible"),r.querySelector(".cmplz-categories").style.display="none",r.querySelector(".cmplz-categories").classList.remove("cmplz-fade-in"),r.querySelector(".cmplz-view-preferences").style.display="block",r.querySelector(".cmplz-save-preferences").style.display="none")}))},R=()=>{let e=document.querySelector("#cmplz-cookiebanner-container");e&&e.querySelectorAll(".cmplz-links a:not(.cmplz-external), .cmplz-buttons a:not(.cmplz-external)").forEach((e=>{e.classList.add("cmplz-hidden");for(let r in z)z.hasOwnProperty(r)&&e.classList.contains(r)&&(e.setAttribute("href",z[r].url+e.getAttribute("data-relative_url")),"{title}"===e.innerText&&(e.innerText=(t=z[r].title,(new DOMParser).parseFromString(t,"text/html").documentElement.textContent)),e.classList.remove("cmplz-hidden"));var t})),W(!1)},V=()=>t.filter((e=>"banner"===e.data_target)),j=()=>{if("bottom"===o("position"))return!1;if(C)return!1;if(!0===o("disable_width_correction"))return!1;if(!document.querySelector(".cmplz-categories"))return;document.querySelector(".cmplz-categories").style.display="block";let e=document.querySelector(".cmplz-categories").offsetWidth;document.querySelector(".cmplz-categories").style.display="none";let t=document.querySelector(".cmplz-message").offsetWidth,n=document.querySelector(".cmplz-cookiebanner").offsetWidth,c=1.3*n,l=0,s=0,a=!1,i=window.getComputedStyle(document.querySelector(".cmplz-cookiebanner"),null).getPropertyValue("padding-left"),p=window.getComputedStyle(document.querySelector(".cmplz-cookiebanner"),null).getPropertyValue("padding-left");if(-1!==i.indexOf("px")&&-1!==p.indexOf("px")&&(a=parseInt(i.replace("px",""))+parseInt(p.replace("px",""))),e>0&&a&&n-a>e){let t=n-42-e;l=parseInt(n)+parseInt(t)}let u=0;if(u=document.querySelectorAll(".cmplz-buttons .cmplz-btn").offsetWidth,u>t){let e=u-42-t;s=parseInt(u)+parseInt(e)}let d=0;return d=s>l?s:l,d>n&&d<c&&(d%2!=0&&d++,r("banner_width",d),!0)},Z=e=>{let t={use_logo:"logo",category_all:"category_marketing",category_stats:"category_statistics",category_prefs:"category_preferences",accept_informational:"accept_optout",accept:"accept_optin",view_preferences:"manage_options",save_preferences:"save_settings"};return t.hasOwnProperty(e)?t[e]:e};if(!k)return(0,n.createElement)(n.Fragment,null);let N=h,G=w,J=V();N=B(N,"{consent_type}",q),N=B(N,"{id}",_.ID),N=B(N,"{vendor_count}",E),G=B(G,"{id}",_.ID);let K=1==o("hide_preview")||1==o("disable_cookiebanner");for(const e of J){if("title"===e.id)continue;let t=Z(e.id);if(_.hasOwnProperty(e.id)){let r=_[e.id];N="text_checkbox"===e.type&&r&&r.hasOwnProperty("text")?B(N,"{"+t+"}",r.text):"banner_logo"===e.type?B(N,"{"+t+"}",_.logo_options[r]?_.logo_options[r]:""):B(N,"{"+t+"}",r)}"revoke"===e.id&&(G=B(G,"{manage_consent}",_.revoke))}return!y||K?(0,n.createElement)(n.Fragment,null):(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{id:"cmplz-preview-banner-container",ref:e},(0,n.createElement)("div",{id:"cmplz-cookiebanner-container",className:m,dangerouslySetInnerHTML:{__html:N}}),(0,n.createElement)("div",{id:"cmplz-manage-consent","data-nosnippet":"true",dangerouslySetInnerHTML:{__html:G}})))}},75972:(e,t,r)=>{r.r(t),r.d(t,{concatenateString:()=>l,filterArray:()=>c,getPurposes:()=>n});const n=(e,t)=>"functional"===e||"preferences"===e?[]:"marketing"===e?t?[1,2,3,4,5,6,7,8,9,10]:[1,2,3,4,5,6,10]:"statistics"===e?[1,7,8,9]:void 0,c=(e,t)=>{e||(e={}),Array.isArray(t)||(t=Object.keys(e));const r=t.map((e=>parseInt(e)));return Object.keys(e).filter((e=>r.includes(parseInt(e)))).map((t=>e[t]))},l=e=>{let t="";const r=e.length-1;for(var n in e)e.hasOwnProperty(n)&&(t+=e[n],t+=n<r?", ":".");return t}},37839:(e,t,r)=>{r.d(t,{Z:()=>c});var n=r(99196);const c=function(e,t){var r,c=(r=(0,n.useRef)(!0)).current?(r.current=!1,!0):r.current;(0,n.useEffect)((function(){if(!c)return e()}),t)}}}]);