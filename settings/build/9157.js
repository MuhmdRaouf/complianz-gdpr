"use strict";(globalThis.webpackChunkcomplianz_gdpr=globalThis.webpackChunkcomplianz_gdpr||[]).push([[9157,5671,849],{85671:(e,t,l)=>{l.r(t),l.d(t,{default:()=>c});var n=l(30270),a=l(12902),i=l(48399);const c=(0,n.Ue)(((e,t)=>({integrationsLoaded:!1,fetching:!1,services:[],plugins:[],scripts:[],placeholders:[],blockedScripts:[],setScript:(t,l)=>{e((0,a.ZP)((e=>{if("block_script"===l){let l=e.blockedScripts;if(t.urls){for(const[e,n]of Object.entries(t.urls)){if(!n||0===n.length)continue;let e=!1;for(const[t,a]of Object.entries(l))n===t&&(e=!0);e||(l[n]=n)}e.blockedScripts=l}}const n=e.scripts[l].findIndex((e=>e.id===t.id));-1!==n&&(e.scripts[l][n]=t)})))},fetchIntegrationsData:async()=>{if(t().fetching)return;e({fetching:!0});const{services:l,plugins:n,scripts:a,placeholders:i,blocked_scripts:c}=await r();let s=a;s.block_script.forEach(((e,t)=>{e.id=t})),s.add_script.forEach(((e,t)=>{e.id=t})),s.whitelist_script.forEach(((e,t)=>{e.id=t})),e((()=>({integrationsLoaded:!0,services:l,plugins:n,scripts:s,fetching:!1,placeholders:i,blockedScripts:c})))},addScript:l=>{e({fetching:!0}),e((0,a.ZP)((e=>{e.scripts[l].push({name:"general",id:e.scripts[l].length,enable:!0})})));let n=t().scripts;return i.doAction("update_scripts",{scripts:n}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},saveScript:(l,n)=>{e({fetching:!0}),e((0,a.ZP)((e=>{const t=e.scripts[n].findIndex((e=>e.id===l.id));-1!==t&&(e.scripts[n][t]=l)})));let c=t().scripts;return i.doAction("update_scripts",{scripts:c}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},deleteScript:(l,n)=>{e({fetching:!0}),e((0,a.ZP)((e=>{const t=e.scripts[n].findIndex((e=>e.id===l.id));-1!==t&&e.scripts[n].splice(t,1)})));let c=t().scripts;return i.doAction("update_scripts",{scripts:c}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},updatePluginStatus:async(t,l)=>(e((0,a.ZP)((e=>{const n=e.plugins.findIndex((e=>e.id===t));-1!==n&&(e.plugins[n].enabled=l)}))),i.doAction("update_plugin_status",{plugin:t,enabled:l}).then((e=>e)).catch((e=>{console.error(e)}))),updatePlaceholderStatus:async(t,l,n)=>(n&&e((0,a.ZP)((e=>{const n=e.plugins.findIndex((e=>e.id===t));-1!==n&&(e.plugins[n].placeholder=l?"enabled":"disabled")}))),i.doAction("update_placeholder_status",{id:t,enabled:l}).then((e=>e)).catch((e=>{console.error(e)})))}))),r=()=>i.doAction("get_integrations_data",{}).then((e=>e)).catch((e=>{console.error(e)}))},49157:(e,t,l)=>{l.r(t),l.d(t,{default:()=>o});var n=l(69307),a=l(85671),i=l(65736),c=l(56293),r=l(60849),s=l(55609);const o=(0,l(99196).memo)((()=>{const{updatePlaceholderStatus:e,updatePluginStatus:t,integrationsLoaded:o,plugins:d,fetchIntegrationsData:p}=(0,a.default)(),[u,g]=(0,n.useState)(""),[h,m]=(0,n.useState)(!1),[f,b]=(0,n.useState)(""),{getFieldValue:_}=(0,c.default)(),[E,v]=(0,n.useState)(null);(0,n.useEffect)((()=>{l.e(44).then(l.bind(l,90044)).then((e=>{let{default:t}=e;v((()=>t))}))}),[]),(0,n.useEffect)((()=>{o||p(),o&&(1==_("safe_mode")?(b((0,i.__)("Safe Mode enabled. To manage integrations, disable Safe Mode in the general settings.","complianz-gdpr")),m(!0)):0===d.length&&(b((0,i.__)("No active plugins detected in the integrations list.","complianz-gdpr")),m(!0)))}),[o]),(0,n.useEffect)((()=>{}),[d]);const z=[{name:(0,i.__)("Plugin","complianz-gdpr"),selector:e=>e.label,sortable:!0},{name:(0,i.__)("Placeholder","complianz-gdpr"),selector:e=>e.placeholderControl,sortable:!0,sortFunction:(e,t)=>{const l=e.placeholder,n=t.placeholder;return l>n?1:n>l?-1:0}},{name:(0,i.__)("Status","complianz-gdpr"),selector:e=>e.enabledControl,sortable:!0,sortFunction:(e,t)=>{const l=e.enabled,n=t.enabled;return l>n?1:n>l?-1:0}}];let S=d.filter((e=>e.label.toLowerCase().includes(u.toLowerCase())));S.sort(((e,t)=>e.label<t.label?-1:e.label>t.label?1:0));let y=[];return S.forEach((l=>{let a={...l};a.enabledControl=(0,n.createElement)(s.ToggleControl,{checked:l.enabled,onChange:e=>(async(e,l)=>{await t(e.id,l),await p()})(l,e)}),a.placeholderControl=(0,n.createElement)(s.ToggleControl,{label:"none"===l.placeholder?(0,i.__)("N/A","complianz-gdpr"):(0,i.__)("Placeholder","complianz-gdpr"),disabled:"none"===l.placeholder,checked:"enabled"===l.placeholder,onChange:t=>(async(t,l)=>{await e(t.id,l,!0)})(l,t)}),y.push(a)})),(0,n.createElement)(n.Fragment,null,(0,n.createElement)("p",null,(0,i.__)("Below you will find the plugins currently detected and integrated with Complianz. Most plugins work by default, but you can also add a plugin to the script center or add it to the integration list.","complianz-gdpr"),(0,r.default)("https://complianz.io/developers-guide-for-third-party-integrations"),(0,i.__)("Enabled plugins will be blocked on the front-end of your website until the user has given consent (opt-in), or after the user has revoked consent (opt-out). When possible a placeholder is activated. You can also disable or configure the placeholder to your liking.","complianz-gdpr"),(0,r.default)("https://complianz.io/blocking-recaptcha-manually/")),(0,n.createElement)("div",{className:"cmplz-table-header"},d.length>5&&(0,n.createElement)("input",{type:"text",placeholder:(0,i.__)("Search","complianz-gdpr"),value:u,onChange:e=>g(e.target.value)})),(h||0===S.length)&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{className:"cmplz-settings-overlay"},(0,n.createElement)("div",{className:"cmplz-settings-overlay-message"},f))),0===y.length&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{className:"cmplz-integrations-placeholder"},(0,n.createElement)("div",null),(0,n.createElement)("div",null),(0,n.createElement)("div",null),(0,n.createElement)("div",null),(0,n.createElement)("div",null),(0,n.createElement)("div",null))),!h&&y.length>0&&E&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)(E,{columns:z,data:y,dense:!0,pagination:!0,paginationPerPage:5,noDataComponent:(0,n.createElement)("div",{className:"cmplz-no-documents"},(0,i.__)("No plugins","complianz-gdpr")),persistTableHead:!0,theme:"really-simple-plugins",customStyles:{headCells:{style:{paddingLeft:"0",paddingRight:"0"}},cells:{style:{paddingLeft:"0",paddingRight:"0"}}}})))}))},60849:(e,t,l)=>{l.r(t),l.d(t,{default:()=>c});var n=l(69307),a=l(65736),i=l(99950);const c=e=>(0,n.createElement)(n.Fragment,null," ",(0,n.createElement)(i.default,{url:e,text:(0,a.__)("For more information, please read this %sarticle%s.","complianz-gdpr")})," ")}}]);