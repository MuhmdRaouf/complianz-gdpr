{"version":3,"file":"src_Settings_Export_ExportControl_js.js","mappings":";;;;;;;;;;;;;;;;;;;;AAA4C;AACP;AACV;AAE3B,SAASG,aAAaA,CAAAC,IAAA,EAAmB;EAAA,IAAlB;IAAEC,KAAK;IAAEC;EAAM,CAAC,GAAAF,IAAA;EACtC,MAAM,CAACG,QAAQ,EAAEC,WAAW,CAAC,GAAGR,4DAAQ,CAAC,KAAK,CAAC;EAE/C,MAAMS,QAAQ,GAAGA,CAAA,KAAM;IACtB,IAAIF,QAAQ,EAAE;IACdC,WAAW,CAAC,IAAI,CAAC;IACjB,IAAIE,OAAO,GAAG,IAAIC,cAAc,CAAC,CAAC;IAClCD,OAAO,CAACE,YAAY,GAAG,MAAM;IAC7BF,OAAO,CAACG,IAAI,CAAC,KAAK,EAAER,KAAK,CAACS,GAAG,EAAE,IAAI,CAAC;IACpCJ,OAAO,CAACK,IAAI,CAAC,CAAC;IACdL,OAAO,CAACM,kBAAkB,GAAG,YAAW;MACvC,IAAI,IAAI,CAACC,UAAU,KAAK,CAAC,IAAI,IAAI,CAACC,MAAM,KAAK,GAAG,EAAE;QACjD,IAAIC,GAAG,GAAGC,MAAM,CAACC,GAAG,CAACC,eAAe,CAAC,IAAI,CAACC,QAAQ,CAAC;QACnD,IAAIC,OAAO,GAAGJ,MAAM,CAACK,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;QAChDF,OAAO,CAACG,YAAY,CAAC,MAAM,EAACR,GAAG,CAAC;QAChCK,OAAO,CAACG,YAAY,CAAC,UAAU,EAAE,uBAAuB,CAAC;QACzDP,MAAM,CAACK,QAAQ,CAACG,IAAI,CAACC,WAAW,CAACL,OAAO,CAAC;QACzC;QACAA,OAAO,CAACM,KAAK,CAAC,CAAC;QACfC,UAAU,CAAC,YAAW;UACrBX,MAAM,CAACC,GAAG,CAACW,eAAe,CAACb,GAAG,CAAC;QAChC,CAAC,EAAE,EAAE,GAAG,IAAI,CAAC;MACd;IACD,CAAC;IAEDT,OAAO,CAACuB,UAAU,GAAG,UAASC,CAAC,EAAE;MAChC1B,WAAW,CAAC,IAAI,CAAC;IAClB,CAAC;EACF,CAAC;EAED,OACCkB,iEAAA;IAAKS,SAAS,EAAC;EAAwB,GACrCT,iEAAA;IAAQS,SAAS,EAAC,uBAAuB;IAACC,OAAO,EAAEA,CAAA,KAAM3B,QAAQ,CAAC;EAAE,GAAER,mDAAE,CAAC,QAAQ,EAAC,gBAAgB,CAAU,CACzG,CAAC;AAER;AAEA,iEAAeC,2CAAI,CAACC,aAAa,CAAC","sources":["webpack://complianz-gdpr/./src/Settings/Export/ExportControl.js"],"sourcesContent":["import {useState} from \"@wordpress/element\";\nimport { __ } from '@wordpress/i18n';\nimport {memo} from \"react\";\n\nfunction ExportControl({ field, label }) {\n\tconst [disabled, setDisabled] = useState(false);\n\n\tconst Download = () => {\n\t\tif (disabled) return;\n\t\tsetDisabled(true);\n\t\tlet request = new XMLHttpRequest();\n\t\trequest.responseType = 'blob';\n\t\trequest.open('get', field.url, true);\n\t\trequest.send();\n\t\trequest.onreadystatechange = function() {\n\t\t\tif (this.readyState === 4 && this.status === 200) {\n\t\t\t\tvar obj = window.URL.createObjectURL(this.response);\n\t\t\t\tvar element = window.document.createElement('a');\n\t\t\t\telement.setAttribute('href',obj);\n\t\t\t\telement.setAttribute('download', 'complianz-export.json');\n\t\t\t\twindow.document.body.appendChild(element);\n\t\t\t\t//onClick property\n\t\t\t\telement.click();\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\twindow.URL.revokeObjectURL(obj);\n\t\t\t\t}, 60 * 1000);\n\t\t\t}\n\t\t};\n\n\t\trequest.onprogress = function(e) {\n\t\t\tsetDisabled(true);\n\t\t};\n\t}\n\n\treturn (\n\t\t<div className=\"cmplz-export-container\">\n\t\t\t\t<button className=\"button button-default\" onClick={() => Download()}>{__(\"Export\",\"complianz-gdpr\")}</button>\n\t\t</div>\n\t)\n}\n\nexport default memo(ExportControl)\n"],"names":["useState","__","memo","ExportControl","_ref","field","label","disabled","setDisabled","Download","request","XMLHttpRequest","responseType","open","url","send","onreadystatechange","readyState","status","obj","window","URL","createObjectURL","response","element","document","createElement","setAttribute","body","appendChild","click","setTimeout","revokeObjectURL","onprogress","e","className","onClick"],"sourceRoot":""}