{"version":3,"file":"src_Dashboard_OtherPlugins_OtherPluginsData_js.js","mappings":"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","sources":["webpack://complianz-gdpr/./src/Dashboard/OtherPlugins/OtherPluginsData.js"],"sourcesContent":["import {create} from 'zustand';\nimport * as rsssl_api from \"../../utils/api\";\nimport {__} from \"@wordpress/i18n\";\nconst useOtherPlugins = create(( set, get ) => ({\n    error:false,\n    dataLoaded:false,\n    pluginData:[],\n    updatePluginData:(slug, newPluginItem) => {\n        let pluginData = get().pluginData;\n        pluginData.forEach(function(pluginItem, i) {\n            if (pluginItem.slug===slug) {\n                pluginData[i] = newPluginItem;\n            }\n        });\n        set(state => ({\n            dataLoaded:true,\n            pluginData:pluginData,\n        }))\n    },\n    getPluginData: (slug) => {\n        let pluginData = get().pluginData;\n        return pluginData.filter((pluginItem) => {\n            return (pluginItem.slug===slug)\n        })[0];\n    },\n    fetchOtherPluginsData: async () => {\n        const {pluginData, error} = await rsssl_api.doAction('otherpluginsdata').then((response) => {\n            let pluginData = [];\n            pluginData = response.plugins;\n            let error = response.error;\n            if (!error) {\n                pluginData.forEach(function (pluginItem, i) {\n                    pluginData[i].pluginActionNice = pluginActionNice(pluginItem.pluginAction);\n                });\n            }\n\n            return {pluginData, error};\n        })\n        set(state => ({\n            dataLoaded:true,\n            pluginData:pluginData,\n            error:error,\n        }))\n    },\n    pluginActions: (slug, pluginAction, e) => {\n        if (e) e.preventDefault();\n        let data = {};\n        data.slug = slug;\n        data.pluginAction = pluginAction;\n        let pluginItem = get().getPluginData(slug);\n        if ( pluginAction==='download' ) {\n            pluginItem.pluginAction = \"downloading\";\n        } else if (pluginAction==='activate') {\n            pluginItem.pluginAction = \"activating\";\n        }\n        pluginItem.pluginActionNice = pluginActionNice(pluginItem.pluginAction);\n        get().updatePluginData(slug, pluginItem);\n        if (pluginAction==='installed' || pluginAction === 'upgrade-to-premium') {\n            return;\n        }\n        rsssl_api.doAction('plugin_actions', data).then( ( response ) => {\n            pluginItem = response;\n            get().updatePluginData(slug, pluginItem);\n            get().pluginActions(slug, pluginItem.pluginAction);\n        })\n    },\n}));\n\nexport default useOtherPlugins;\n\nconst pluginActionNice = (pluginAction) => {\n    const statuses = {\n        'download': __(\"Install\", \"really-simple-ssl\"),\n        'activate': __(\"Activate\", \"really-simple-ssl\"),\n        'activating': __(\"Activating...\", \"really-simple-ssl\"),\n        'downloading': __(\"Downloading...\", \"really-simple-ssl\"),\n        'upgrade-to-premium': __(\"Downloading...\", \"really-simple-ssl\"),\n    };\n    return statuses[pluginAction];\n}\n\n"],"names":["create","rsssl_api","__","useOtherPlugins","set","get","error","dataLoaded","pluginData","updatePluginData","slug","newPluginItem","forEach","pluginItem","i","state","getPluginData","filter","fetchOtherPluginsData","doAction","then","response","plugins","pluginActionNice","pluginAction","pluginActions","e","preventDefault","data","statuses"],"sourceRoot":""}