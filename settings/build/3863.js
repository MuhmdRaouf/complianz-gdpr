"use strict";(globalThis.webpackChunkcomplianz_gdpr=globalThis.webpackChunkcomplianz_gdpr||[]).push([[3863,2588,5671],{32588:(e,t,c)=>{c.r(t),c.d(t,{default:()=>i});var n=c(69307),r=c(99196),l=c(61592),a=c(43684),s=c(65736);const i=(0,r.memo)((e=>{let{value:t=!1,onChange:c,required:r,defaultValue:i,disabled:d,options:o={},innerRef:p}=e;return(0,n.createElement)("div",{className:"cmplz-input-group cmplz-select-group"},(0,n.createElement)(l.fC,{value:t,defaultValue:i,onValueChange:c,required:r,disabled:d&&!Array.isArray(d)},(0,n.createElement)(l.xz,{className:"cmplz-select-group__trigger"},(0,n.createElement)(l.B4,null),(0,n.createElement)(a.default,{name:"chevron-down"})),(0,n.createElement)(l.VY,{className:"cmplz-select-group__content",position:"popper"},(0,n.createElement)(l.u_,{className:"cmplz-select-group__scroll-button"},(0,n.createElement)(a.default,{name:"chevron-up"})),(0,n.createElement)(l.l_,{className:"cmplz-select-group__viewport"},(0,n.createElement)(l.ZA,null,(0,n.createElement)(l.ck,{className:"cmplz-select-group__item",key:0,value:""},(0,n.createElement)(l.eT,null,(0,s.__)("Select an option","complianz-gdpr"))),Object.entries(o).map((e=>{let[t,c]=e;return(0,n.createElement)(l.ck,{disabled:Array.isArray(d)&&d.includes(t),className:"cmplz-select-group__item",key:t,value:t},(0,n.createElement)(l.eT,null,c))})))),(0,n.createElement)(l.$G,{className:"cmplz-select-group__scroll-button"},(0,n.createElement)(a.default,{name:"chevron-down"})))))}))},64884:(e,t,c)=>{c.r(t),c.d(t,{default:()=>w});var n=c(69307),r=c(99196),l=c(87462),a=c(76652),s=c(17255),i=c(32707),d=c(39920),o=c(67571),p=c(42935),u=c(40192);const m="Switch",[h,f]=(0,i.b)(m),[b,g]=h(m),_=(0,r.forwardRef)(((e,t)=>{const{__scopeSwitch:c,name:n,checked:i,defaultChecked:o,required:p,disabled:m,value:h="on",onCheckedChange:f,...g}=e,[_,v]=(0,r.useState)(null),y=(0,s.e)(t,(e=>v(e))),w=(0,r.useRef)(!1),z=!_||Boolean(_.closest("form")),[S=!1,C]=(0,d.T)({prop:i,defaultProp:o,onChange:f});return(0,r.createElement)(b,{scope:c,checked:S,disabled:m},(0,r.createElement)(u.WV.button,(0,l.Z)({type:"button",role:"switch","aria-checked":S,"aria-required":p,"data-state":k(S),"data-disabled":m?"":void 0,disabled:m,value:h},g,{ref:y,onClick:(0,a.M)(e.onClick,(e=>{C((e=>!e)),z&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())}))})),z&&(0,r.createElement)(E,{control:_,bubbles:!w.current,name:n,value:h,checked:S,required:p,disabled:m,style:{transform:"translateX(-100%)"}}))})),E=e=>{const{control:t,checked:c,bubbles:n=!0,...a}=e,s=(0,r.useRef)(null),i=(0,o.D)(c),d=(0,p.t)(t);return(0,r.useEffect)((()=>{const e=s.current,t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"checked").set;if(i!==c&&r){const t=new Event("click",{bubbles:n});r.call(e,c),e.dispatchEvent(t)}}),[i,c,n]),(0,r.createElement)("input",(0,l.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:c},a,{tabIndex:-1,ref:s,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function k(e){return e?"checked":"unchecked"}const v=_,y=(0,r.forwardRef)(((e,t)=>{const{__scopeSwitch:c,...n}=e,a=g("SwitchThumb",c);return(0,r.createElement)(u.WV.span,(0,l.Z)({"data-state":k(a.checked),"data-disabled":a.disabled?"":void 0},n,{ref:t}))})),w=(0,r.memo)((e=>{let{value:t,onChange:c,required:r,disabled:l}=e,a=t;return"0"!==t&&"1"!==t||(a="1"===t),(0,n.createElement)(v,{className:"cmplz-switch-root",checked:a,onCheckedChange:c,disabled:l,required:r},(0,n.createElement)(y,{className:"cmplz-switch-thumb"}))}))},13863:(e,t,c)=>{c.r(t),c.d(t,{default:()=>i});var n=c(69307),r=c(65736),l=c(64884),a=c(32588),s=c(85671);const i=e=>{const{setScript:t,blockedScripts:c,fetching:i}=(0,s.default)(),d=c,o=e.script,p=e=>{if(!o.dependency||0===o.dependency.length)return"";let t=Object.entries(o.dependency);for(const[c,n]of t)if(c===e)return n;return""},u=(e,t)=>{let c={...e};for(const[e,n]of Object.entries(c))if(n===t){delete c[e];break}return c};let m=Object.entries(o.urls);return(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{className:"cmplz-details-row cmplz-details-row__checkbox"},(0,n.createElement)(l.default,{disabled:i,value:o.enable_dependency,onChange:c=>((c,n)=>{let r={...o};r.enable_dependency=c,t(r,e.type)})(c)}),(0,n.createElement)("label",null,(0,r.__)("Dependency","complianz-gdpr"))),!!o.enable_dependency&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{className:"cmplz-details-row cmplz-details-row"},m.map(((c,l)=>{let[s,m]=c;return(0,n.createElement)("div",{key:l,className:"cmplz-scriptcenter-dependencies"},(0,n.createElement)(a.default,{disabled:i,value:p(m),options:u(d,m),onChange:c=>((c,n)=>{let r={...o},l={...r.dependency};l[n]=c,r.dependency=l,t(r,e.type)})(c,m)}),(0,n.createElement)("div",null,(0,r.__)("waits for: ","complianz-gdpr"),m||(0,r.__)("Empty URL","complianz-gdpr")))})))))}},85671:(e,t,c)=>{c.r(t),c.d(t,{default:()=>a});var n=c(30270),r=c(12902),l=c(48399);const a=(0,n.Ue)(((e,t)=>({integrationsLoaded:!1,fetching:!1,services:[],plugins:[],scripts:[],placeholders:[],blockedScripts:[],setScript:(t,c)=>{e((0,r.ZP)((e=>{if("block_script"===c){let c=e.blockedScripts;if(t.urls){for(const[e,n]of Object.entries(t.urls)){if(!n||0===n.length)continue;let e=!1;for(const[t,r]of Object.entries(c))n===t&&(e=!0);e||(c[n]=n)}e.blockedScripts=c}}const n=e.scripts[c].findIndex((e=>e.id===t.id));-1!==n&&(e.scripts[c][n]=t)})))},fetchIntegrationsData:async()=>{if(t().fetching)return;e({fetching:!0});const{services:c,plugins:n,scripts:r,placeholders:l,blocked_scripts:a}=await s();let i=r;i.block_script.forEach(((e,t)=>{e.id=t})),i.add_script.forEach(((e,t)=>{e.id=t})),i.whitelist_script.forEach(((e,t)=>{e.id=t})),e((()=>({integrationsLoaded:!0,services:c,plugins:n,scripts:i,fetching:!1,placeholders:l,blockedScripts:a})))},addScript:c=>{e({fetching:!0}),e((0,r.ZP)((e=>{e.scripts[c].push({name:"general",id:e.scripts[c].length,enable:!0})})));let n=t().scripts;return l.doAction("update_scripts",{scripts:n}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},saveScript:(c,n)=>{e({fetching:!0}),e((0,r.ZP)((e=>{const t=e.scripts[n].findIndex((e=>e.id===c.id));-1!==t&&(e.scripts[n][t]=c)})));let a=t().scripts;return l.doAction("update_scripts",{scripts:a}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},deleteScript:(c,n)=>{e({fetching:!0}),e((0,r.ZP)((e=>{const t=e.scripts[n].findIndex((e=>e.id===c.id));-1!==t&&e.scripts[n].splice(t,1)})));let a=t().scripts;return l.doAction("update_scripts",{scripts:a}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},updatePluginStatus:async(t,c)=>(e((0,r.ZP)((e=>{const n=e.plugins.findIndex((e=>e.id===t));-1!==n&&(e.plugins[n].enabled=c)}))),l.doAction("update_plugin_status",{plugin:t,enabled:c}).then((e=>e)).catch((e=>{console.error(e)}))),updatePlaceholderStatus:async(t,c,n)=>(n&&e((0,r.ZP)((e=>{const n=e.plugins.findIndex((e=>e.id===t));-1!==n&&(e.plugins[n].placeholder=c?"enabled":"disabled")}))),l.doAction("update_placeholder_status",{id:t,enabled:c}).then((e=>e)).catch((e=>{console.error(e)})))}))),s=()=>l.doAction("get_integrations_data",{}).then((e=>e)).catch((e=>{console.error(e)}))}}]);