"use strict";(globalThis.webpackChunkcomplianz_gdpr=globalThis.webpackChunkcomplianz_gdpr||[]).push([[2032,924],{82032:(e,t,o)=>{o.r(t),o.d(t,{default:()=>p});var a=o(69307),s=o(924),l=o(99196),n=o(43684),i=o(65736),r=o(55609),c=o(56293);const p=(0,l.memo)((()=>{const{progress:e,active:t,start:o,next:p,total:g,copySites:m}=(0,s.default)(),[u,d]=(0,l.useState)(!1),{addHelpNotice:y,removeHelpNotice:f}=(0,c.default)();return(0,l.useEffect)((()=>{e<100?t&&((async()=>{await m(!1)})(),y("copy-multisite","warning",(0,i.__)("Complianz is currently copying settings of site %1$s to %2$s of %3$s sites.","complianz-gdpr").replace("%1$s",o).replace("%2$s",p).replace("%3$s",g),(0,i.__)("Copying settings...","complianz-gdpr"),!1)):f("copy-multisite")}),[e]),console.log("progress",e),console.log("active",t),(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"cmplz-export-container"},(0,a.createElement)(r.__experimentalConfirmDialog,{isOpen:u,onConfirm:async()=>{d(!1),await m(!0)},onCancel:()=>{d(!1)}},(0,i.__)("Are you sure? This will overwrite the settings in all your subsites with the Complianz settings of this site.","complianz-gdpr")),(0,a.createElement)("button",{className:"button button-default",onClick:()=>d(!0)},(0,i.__)("Start","complianz-gdpr"),t&&(0,a.createElement)(a.Fragment,null,"Â ",e,"%",(0,a.createElement)(n.default,{name:"loading",color:"grey"})))))}))},924:(e,t,o)=>{o.r(t),o.d(t,{default:()=>l});var a=o(30270),s=o(48399);const l=(0,a.Ue)(((e,t)=>({progress:0,total:0,start:0,next:0,active:!1,copySites:async t=>{let o={restart:t};e({active:!0});const{start:a,next:l,total:n}=await s.doAction("copy_multisite",o).then((e=>(console.log(e),e)));let i=Math.round(l/n*100);e({progress:i,start:a,next:l,total:n}),console.log(i),i>=100&&(console.log("done"),e({active:!1}))}})))}}]);