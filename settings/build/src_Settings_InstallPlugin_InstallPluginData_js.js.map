{"version":3,"file":"src_Settings_InstallPlugin_InstallPluginData_js.js","mappings":";;;;;;;;;;;;;;;AAA+B;AACc;AAC7C,MAAME,oBAAoB,GAAGF,+CAAM,CAAC,CAAEG,GAAG,EAAEC,GAAG,MAAO;EACpDC,gBAAgB,EAAC,KAAK;EACtBC,YAAY,EAAE,QAAQ;EACtBC,YAAY,EAAE,GAAG;EACjBC,MAAM,EAAE,EAAE;EACVC,YAAY,EAAC,KAAK;EAClBC,iBAAiB,EAAEA,CAACC,IAAI,EAAEC,MAAM,KAAK;IACpC,IAAIC,IAAI,GAAG,CAAC,CAAC;IACbV,GAAG,CAAC;MAACE,gBAAgB,EAAC;IAAI,CAAC,CAAC;IAC5BQ,IAAI,CAACP,YAAY,GAAG,OAAOM,MAAM,KAAK,WAAW,GAAGA,MAAM,GAAGR,GAAG,CAAC,CAAC,CAACE,YAAY;IAC/EO,IAAI,CAACF,IAAI,GAAGA,IAAI;IAChB,IAAIG,UAAU,GAAG,KAAK;IACtB,IAAID,IAAI,CAACP,YAAY,KAAK,UAAU,EAAE;MACrCQ,UAAU,GAAG,UAAU;IACxB;IACAb,gDAAkB,CAAC,gBAAgB,EAAEY,IAAI,CAAC,CAACG,IAAI,CAAIC,QAAQ,IAAM;MAChEd,GAAG,CAAC;QACHG,YAAY,EAACW,QAAQ,CAACX,YAAY;QAClCC,YAAY,EAACU,QAAQ,CAACC;MACvB,CAAC,CAAC,CAAC;;MAEH;MACA,IAAIC,CAAC,GAAGC,IAAI,CAACC,KAAK,CAAEJ,QAAQ,CAACK,WAAW,CAACd,MAAM,GAAG,EAAE,EAAE,CAAE,CAAC,GAAG,CAAC;MAC7DL,GAAG,CAAC;QACHK,MAAM,EAACW,CAAC;QACRI,WAAW,EAACN,QAAQ,CAACK,WAAW,CAACE,YAAY;QAC7CnB,gBAAgB,EAAC,KAAK;QACtBI,YAAY,EAAC;MACd,CAAC,CAAC;MACF;MACA,IAAIK,UAAU,KAAK,UAAU,IAAIG,QAAQ,CAACX,YAAY,KAAG,WAAW,EAAG;QACtEF,GAAG,CAAC,CAAC,CAACM,iBAAiB,CAACO,QAAQ,CAACX,YAAY,CAAC;MAC/C;IAED,CAAC,CAAC;EACH;AACD,CAAC,CAAC,CAAC;AAEH,iEAAeJ,oBAAoB","sources":["webpack://complianz-gdpr/./src/Settings/InstallPlugin/InstallPluginData.js"],"sourcesContent":["import {create} from 'zustand';\nimport * as cmplz_api from \"../../utils/api\";\nconst UseInstallPluginData = create(( set, get ) => ({\n\tapiRequestActive:false,\n\tpluginAction: 'status',\n\twordPressUrl: '#',\n\trating: [],\n\tstatusLoaded:false,\n\tstartPluginAction: (slug, action) => {\n\t\tlet data = {};\n\t\tset({apiRequestActive:true});\n\t\tdata.pluginAction = typeof action !== 'undefined' ? action : get().pluginAction;\n\t\tdata.slug = slug;\n\t\tlet nextAction = false;\n\t\tif (data.pluginAction === 'download') {\n\t\t\tnextAction = 'activate';\n\t\t}\n\t\tcmplz_api.doAction('plugin_actions', data).then( ( response ) => {\n\t\t\tset({\n\t\t\t\tpluginAction:response.pluginAction,\n\t\t\t\twordPressUrl:response.wordpress_url,\n\t\t\t});//'installed', 'download', 'activate', 'upgrade-to-premium'\n\n\t\t\t//convert to percentage\n\t\t\tlet p = Math.round( response.star_rating.rating / 10, 0 ) / 2;\n\t\t\tset({\n\t\t\t\trating:p,\n\t\t\t\tratingCount:response.star_rating.rating_count,\n\t\t\t\tapiRequestActive:false,\n\t\t\t\tstatusLoaded:true,\n\t\t\t});\n\t\t\t//if the plugin is installed, go ahead and activate as well\n\t\t\tif (nextAction === 'activate' && response.pluginAction!=='installed' ) {\n\t\t\t\tget().startPluginAction(response.pluginAction);\n\t\t\t}\n\n\t\t});\n\t},\n}));\n\nexport default UseInstallPluginData;\n\n"],"names":["create","cmplz_api","UseInstallPluginData","set","get","apiRequestActive","pluginAction","wordPressUrl","rating","statusLoaded","startPluginAction","slug","action","data","nextAction","doAction","then","response","wordpress_url","p","Math","round","star_rating","ratingCount","rating_count"],"sourceRoot":""}