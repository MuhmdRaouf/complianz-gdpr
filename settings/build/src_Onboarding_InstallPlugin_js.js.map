{"version":3,"file":"src_Onboarding_InstallPlugin_js.js","mappings":"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","sources":["webpack://complianz-gdpr/./src/Onboarding/InstallPlugin.js","webpack://complianz-gdpr/./src/Onboarding/OnboardingData.js"],"sourcesContent":["import Icon from \"../utils/Icon\";\nimport { __ } from '@wordpress/i18n';\nimport useOnboardingData from \"./OnboardingData\";\n\nconst InstallPlugin = ({plugin, processing}) => {\n\tconst { pluginAction } = useOnboardingData();\n\n\tconst installPlugin = async (slug) => {\n\t\tawait pluginAction(slug, 'install_plugin');\n\t\tawait pluginAction(slug, 'activate_plugin');\n\t}\n\n\tconst activatePlugin = async (slug) => {\n\t\tawait pluginAction(slug, 'activate_plugin');\n\t}\n\n\tlet iconColor = 'grey';\n\tlet iconName = processing || plugin.processing ? 'loading' : 'info';\n\n\tif (plugin.status === 'activated') {\n\t\ticonColor = 'green';\n\t\ticonName = 'circle-check';\n\t}\n\treturn (\n\t\t<div className=\"cmplz-onboarding-item\">\n\t\t\t<Icon name={iconName} color={iconColor} size={14} />\n\t\t\t{plugin.description}&nbsp;\n\t\t\t{ plugin.status==='not-installed' && <><a href=\"#\" onClick={(e) => installPlugin(plugin.slug) }>\n\t\t\t\t{!plugin.processing && __(\"Install\", \"complianz-gdpr\")}\n\t\t\t\t{plugin.processing && __(\"installing...\", \"complianz-gdpr\")}\n\t\t\t</a></>}\n\t\t\t{ plugin.status==='installed' && <><a href=\"#\" onClick={(e) => activatePlugin(plugin.slug) }>\n\t\t\t\t{!plugin.processing && __(\"Activate\", \"complianz-gdpr\")}\n\t\t\t\t{plugin.processing && __(\"activating...\", \"complianz-gdpr\")}\n\t\t\t</a></>}\n\t\t\t{ plugin.status==='activated' && <>{__(\"Installed!\", \"complianz-gdpr\")}</>}\n\t\t</div>\n\t)\n}\nexport default InstallPlugin;\n","import {create} from 'zustand';\nimport {produce} from 'immer';\nimport { __ } from '@wordpress/i18n';\n\nimport * as cmplz_api from \"../utils/api\";\nconst useOnboardingData = create(( set, get ) => ({\n\tloaded:false,\n\tplugins: [\n\t\t{\n\t\t\t'slug' :'complianz-terms-conditions',\n\t\t\t'description':__(\"Need Terms & Conditions? Configure now.\",\"complianz-gdpr\"),\n\t\t\t'status': 'not-installed',\n\t\t\t'processing': false,\n\t\t},\n\t\t{\n\t\t\t'slug' :'burst-statistics',\n\t\t\t'description':__(\"Privacy-Friendly Analytics? Here you go!\",\"complianz-gdpr\"),\n\t\t\t'status': 'not-installed',\n\t\t\t'processing': false,\n\t\t},\n\t\t {\n\t\t\t'slug' :'really-simple-ssl',\n\t\t\t 'description':__(\"Really Simple Security? Install now!\",\"complianz-gdpr\"),\n\t\t\t 'status': 'not-installed',\n\t\t\t 'processing': false,\n\t\t },\n\t],\n\tisUpgrade:false,\n\tprocessing: true,\n\temail: '',\n\tincludeTips:false,\n\tsendTestEmail:true,\n\tactionStatus: '',\n\tmodalVisible:true,\n\tsetIncludeTips: (includeTips) => {\n\t\tset(state => ({ includeTips }))\n\t},\n\tsetSendTestEmail: (sendTestEmail) => {\n\t\tset(state => ({ sendTestEmail }))\n\t},\n\tsetEmail: (email) => {\n\t\tset(state => ({ email }))\n\t},\n\tdismissModal: () => {\n\t\tconst url = new URL(window.location.href);\n\t\turl.searchParams.delete('onboarding');\n\t\twindow.history.pushState({}, '', url.href);\n\t\tset(state => ({ modalVisible:false }))\n\n\t},\n\tsaveEmail: async () => {\n\t\tlet data={};\n\t\tdata.email = get().email;\n\t\tdata.includeTips = get().includeTips;\n\t\tdata.sendTestEmail = get().sendTestEmail;\n\t\tset((state) => ({processing:true}));\n\t\tawait cmplz_api.doAction('update_email', data).then(( response ) => {\n\t\t\treturn response;\n\t\t});\n\t\tset(() => ({processing:false}));\n\t},\n\tgetRecommendedPluginsStatus: async () => {\n\t\tconst data = {};\n\t\tdata.plugins = get().plugins;\n\t\tconst {plugins, isUpgrade} = await cmplz_api.doAction('get_recommended_plugins_status', data).then( async ( response ) => {\n\t\t\treturn response\n\t\t});\n\t\tset({processing:false, plugins: plugins, isUpgrade:isUpgrade,loaded:true});\n\t},\n\tsetProcessing: (slug, processing) => {\n\t\tset(\n\t\t\tproduce((state) => {\n\t\t\t\tconst pluginIndex = state.plugins.findIndex(plugin => {\n\t\t\t\t\treturn plugin.slug===slug;\n\t\t\t\t});\n\n\t\t\t\tif ( pluginIndex!==-1 ){\n\t\t\t\t\tstate.plugins[pluginIndex].processing = processing;\n\t\t\t\t}\n\t\t\t})\n\t\t)\n\t},\n\tpluginAction: async (slug, action) => {\n\t\tconst data = {};\n\t\tdata.slug = slug;\n\t\tdata.plugins = get().plugins;\n\t\tget().setProcessing(slug, true);\n\t\tconst {plugins} = await cmplz_api.doAction(action, data).then( async ( response ) => {\n\t\t\treturn response\n\t\t});\n\t\tset({plugins: plugins});\n\t},\n}));\n\n\nexport default useOnboardingData;\n"],"names":["Icon","__","useOnboardingData","InstallPlugin","_ref","plugin","processing","pluginAction","installPlugin","slug","activatePlugin","iconColor","iconName","status","createElement","className","name","color","size","description","Fragment","href","onClick","e","create","produce","cmplz_api","set","get","loaded","plugins","isUpgrade","email","includeTips","sendTestEmail","actionStatus","modalVisible","setIncludeTips","state","setSendTestEmail","setEmail","dismissModal","url","URL","window","location","searchParams","delete","history","pushState","saveEmail","data","doAction","then","response","getRecommendedPluginsStatus","setProcessing","pluginIndex","findIndex","action"],"sourceRoot":""}