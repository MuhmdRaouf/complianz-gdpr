{"version":3,"file":"src_Dashboard_Documents_SingleDocument_js.js","mappings":"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","sources":["webpack://complianz-gdpr/./src/Dashboard/Documents/SingleDocument.js"],"sourcesContent":["import {SelectControl} from \"@wordpress/components\";\nimport Icon from \"../../utils/Icon\";\nimport { __ } from '@wordpress/i18n';\n\nimport {\n\tuseState, useEffect\n} from '@wordpress/element';\nconst SingleDocument = (props) => {\n\tconst [url, setUrl] = useState(false);\n\tconst [disabled, setDisabled] = useState(false);\n\tconst [options, setOptions] = useState(false);\n\n\tuseEffect( () => {\n\t\tlet options = props.options;\n\t\tif ( options.length===0) {\n\t\t\tlet emptyOption = {label:__(\"Generate a %s\",\"complianz-gdpr\").replace('%s',props.name), value:0};\n\t\t\toptions.unshift(emptyOption);\n\t\t} else {\n\t\t\t//if options does not include an option with value 0, add it.\n\t\t\tif ( !options.filter( (option) => option.value === 0).length>0 ) {\n\t\t\t\tlet emptyOption = {label:__(\"Select a %s\",\"complianz-gdpr\").replace('%s',props.name), value:0};\n\t\t\t\toptions.unshift(emptyOption);\n\t\t\t}\n\n\t\t}\n\t\tsetOptions(options);\n\n\t}, [props.options] );\n\n\tconst Download = () => {\n\t\tif (disabled) return;\n\t\tsetDisabled(true);\n\t\tlet request = new XMLHttpRequest();\n\t\trequest.responseType = 'blob';\n\t\trequest.open('get', url, true);\n\t\trequest.send();\n\t\trequest.onreadystatechange = function() {\n\t\t\tif (this.readyState == 4 && this.status == 200) {\n\t\t\t\tvar obj = window.URL.createObjectURL(this.response);\n\n\t\t\t\tvar element = window.document.createElement('a');\n\t\t\t\telement.setAttribute('href',obj);\n\t\t\t\telement.setAttribute('download', options.filter( (option) => option.value ===url)[0].label);\n\t\t\t\twindow.document.body.appendChild(element);\n\t\t\t\t//onClick property\n\t\t\t\telement.click();\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\twindow.URL.revokeObjectURL(obj);\n\t\t\t\t}, 60 * 1000);\n\t\t\t}\n\t\t};\n\n\t\trequest.onprogress = function(e) {\n\t\t\tsetDisabled(true);\n\t\t};\n\t}\n\treturn (\n\t\t<div className=\"cmplz-single-document-other-documents\">\n\t\t\t<SelectControl\n\t\t\t\tonChange={ ( fieldValue ) => setUrl(fieldValue) }\n\t\t\t\tvalue= { url }\n\t\t\t\toptions={ options }\n\t\t\t/>\n\t\t\t<div onClick={()=> Download()}>\n\t\t\t\t<Icon name={'file-download'} color={ (url!=0 && !disabled) ? 'black' : 'grey'} tooltip={__(\"Download file\",\"complianz-gdpr\")} size={14} />\n\t\t\t</div>\n\t\t\t{options.length>0 &&\n\t\t\t\t<a href={props.link}><Icon name={'circle-chevron-right'} color=\"black\" tooltip={__(\"Go to overview\",\"complianz-gdpr\")} size={14} /></a>}\n\t\t\t{options.length===0 &&\n\t\t\t\t<a href={props.link}><Icon name={'plus'} color=\"black\" tooltip={__(\"Create new\",\"complianz-gdpr\")} size={14} /></a>}\n\n\t\t</div>\n\t)\n}\nexport default SingleDocument\n"],"names":["SelectControl","Icon","__","useState","useEffect","SingleDocument","props","url","setUrl","disabled","setDisabled","options","setOptions","length","emptyOption","label","replace","name","value","unshift","filter","option","Download","request","XMLHttpRequest","responseType","open","send","onreadystatechange","readyState","status","obj","window","URL","createObjectURL","response","element","document","createElement","setAttribute","body","appendChild","click","setTimeout","revokeObjectURL","onprogress","e","className","onChange","fieldValue","onClick","color","tooltip","size","href","link"],"sourceRoot":""}