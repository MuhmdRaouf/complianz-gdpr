{"version":3,"file":"src_Dashboard_OtherPlugins_OtherPlugins_js.js","mappings":"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","sources":["webpack://complianz-gdpr/./src/Dashboard/OtherPlugins/OtherPlugins.js","webpack://complianz-gdpr/./src/Dashboard/OtherPlugins/OtherPluginsData.js"],"sourcesContent":["import { useEffect} from \"@wordpress/element\";\nimport { __ } from '@wordpress/i18n';\nimport Placeholder from '../../Placeholder/Placeholder';\nimport useOtherPlugins  from \"./OtherPluginsData\";\nconst OtherPlugins = () => {\n    const {dataLoaded, pluginData, pluginActions, fetchOtherPluginsData, error} = useOtherPlugins();\n    useEffect(() => {\n        if (!dataLoaded) {\n            fetchOtherPluginsData();\n        }\n    }, [] )\n\n    const otherPluginElement = (plugin, i) => {\n        return (\n           <div key={\"plugin\"+i} className={\"cmplz-other-plugins-element cmplz-\"+plugin.slug}>\n               <a href={plugin.wordpress_url} target=\"_blank\" title={plugin.title}>\n                   <div className=\"cmplz-bullet\"></div>\n                   <div className=\"cmplz-other-plugins-content\">{plugin.title}</div>\n               </a>\n               <div className=\"cmplz-other-plugin-status\">\n                {plugin.pluginAction==='upgrade-to-premium' && <><a target=\"_blank\" href={plugin.upgrade_url}>{__(\"Upgrade\", \"complianz-gdpr\")}</a></>}\n                {plugin.pluginAction!=='upgrade-to-premium' && plugin.pluginAction!=='installed' && <>\n                    <a href=\"#\" onClick={ (e) => pluginActions(plugin.slug, plugin.pluginAction, e) } >{plugin.pluginActionNice}</a></>}\n                {plugin.pluginAction==='installed' && <>{__(\"Installed\", \"complianz-gdpr\")}</>}\n               </div>\n           </div>\n        )\n    }\n\n    if ( !dataLoaded || error) {\n        return (<Placeholder lines=\"3\" error={error}></Placeholder>)\n    }\n\n    return (\n        <>\n           <div className=\"cmplz-other-plugins-container\">\n               { pluginData.map((plugin, i) => otherPluginElement(plugin, i)) }\n           </div>\n        </>\n    )\n}\n\nexport default OtherPlugins;\n","import {create} from 'zustand';\nimport * as rsssl_api from \"../../utils/api\";\nimport {__} from \"@wordpress/i18n\";\nconst useOtherPlugins = create(( set, get ) => ({\n    error:false,\n    dataLoaded:false,\n    pluginData:[],\n    updatePluginData:(slug, newPluginItem) => {\n        let pluginData = get().pluginData;\n        pluginData.forEach(function(pluginItem, i) {\n            if (pluginItem.slug===slug) {\n                pluginData[i] = newPluginItem;\n            }\n        });\n        set(state => ({\n            dataLoaded:true,\n            pluginData:pluginData,\n        }))\n    },\n    getPluginData: (slug) => {\n        let pluginData = get().pluginData;\n        return pluginData.filter((pluginItem) => {\n            return (pluginItem.slug===slug)\n        })[0];\n    },\n    fetchOtherPluginsData: async () => {\n        const {pluginData, error} = await rsssl_api.doAction('otherpluginsdata').then((response) => {\n            let pluginData = [];\n            pluginData = response.plugins;\n            let error = response.error;\n            if (!error) {\n                pluginData.forEach(function (pluginItem, i) {\n                    pluginData[i].pluginActionNice = pluginActionNice(pluginItem.pluginAction);\n                });\n            }\n\n            return {pluginData, error};\n        })\n        set(state => ({\n            dataLoaded:true,\n            pluginData:pluginData,\n            error:error,\n        }))\n    },\n    pluginActions: (slug, pluginAction, e) => {\n        if (e) e.preventDefault();\n        let data = {};\n        data.slug = slug;\n        data.pluginAction = pluginAction;\n        let pluginItem = get().getPluginData(slug);\n        if ( pluginAction==='download' ) {\n            pluginItem.pluginAction = \"downloading\";\n        } else if (pluginAction==='activate') {\n            pluginItem.pluginAction = \"activating\";\n        }\n        pluginItem.pluginActionNice = pluginActionNice(pluginItem.pluginAction);\n        get().updatePluginData(slug, pluginItem);\n        if (pluginAction==='installed' || pluginAction === 'upgrade-to-premium') {\n            return;\n        }\n        rsssl_api.doAction('plugin_actions', data).then( ( response ) => {\n            pluginItem = response;\n            get().updatePluginData(slug, pluginItem);\n            get().pluginActions(slug, pluginItem.pluginAction);\n        })\n    },\n}));\n\nexport default useOtherPlugins;\n\nconst pluginActionNice = (pluginAction) => {\n    const statuses = {\n        'download': __(\"Install\", \"really-simple-ssl\"),\n        'activate': __(\"Activate\", \"really-simple-ssl\"),\n        'activating': __(\"Activating...\", \"really-simple-ssl\"),\n        'downloading': __(\"Downloading...\", \"really-simple-ssl\"),\n        'upgrade-to-premium': __(\"Downloading...\", \"really-simple-ssl\"),\n    };\n    return statuses[pluginAction];\n}\n\n"],"names":["useEffect","__","Placeholder","useOtherPlugins","OtherPlugins","dataLoaded","pluginData","pluginActions","fetchOtherPluginsData","error","otherPluginElement","plugin","i","createElement","key","className","slug","href","wordpress_url","target","title","pluginAction","Fragment","upgrade_url","onClick","e","pluginActionNice","lines","map","create","rsssl_api","set","get","updatePluginData","newPluginItem","forEach","pluginItem","state","getPluginData","filter","doAction","then","response","plugins","preventDefault","data","statuses"],"sourceRoot":""}