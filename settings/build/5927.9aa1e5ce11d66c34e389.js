"use strict";(self.webpackChunkcomplianz_gdpr=self.webpackChunkcomplianz_gdpr||[]).push([[5927,8189,4573],{68189:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var l=a(69307),c=a(20384),n=a(65736),o=a(34573),r=a(99057),i=a(56293),s=a(99196);const m=e=>{const{getFieldValue:t,showSavedSettingsNotice:a}=(0,i.default)(),{saving:c,purposesOptions:o,services:m,updateCookie:d,toggleDeleteCookie:p,saveCookie:u}=(0,r.UseSyncData)(),[_,g]=(0,s.useState)({ID:e.ID,value:e.name}),[v,E]=(0,s.useState)({ID:e.ID,value:e.retention}),[h,z]=(0,s.useState)({ID:e.ID,value:e.cookieFunction});let b="yes"===t("use_cdb_api"),y=!!b&&1==e.sync,k=y;c&&(k=!0);let w=!1;e.slug.length>0&&(w="https://cookiedatabase.org/cookie/"+(e.service?e.service:"unknown-service")+"/"+e.slug);const f=(e,t,a)=>{d(t,a,e.target.value)};(0,s.useEffect)((()=>{const e=setTimeout((()=>{d(_.ID,"name",_.value)}),500);return()=>{clearTimeout(e)}}),[_]),(0,s.useEffect)((()=>{const e=setTimeout((()=>{d(h.ID,"cookieFunction",h.value)}),500);return()=>{clearTimeout(e)}}),[h]),(0,s.useEffect)((()=>{const e=setTimeout((()=>{d(v.ID,"retention",v.value)}),700);return()=>{clearTimeout(e)}}),[v]);const D=(e,t,a)=>{d(t,a,e.target.checked)};let I=-1!==e.name.indexOf("cmplz_")||y,N=1!=e.deleted?"cmplz-reset-button":"";return(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"cmplz-details-row cmplz-details-row__checkbox"},(0,l.createElement)("label",null,(0,n.__)("Sync cookie with cookiedatabase.org","complianz-gdpr")),(0,l.createElement)("input",{disabled:!b,onChange:t=>D(t,e.ID,"sync"),type:"checkbox",checked:y})),(0,l.createElement)("div",{className:"cmplz-details-row cmplz-details-row__checkbox"},(0,l.createElement)("label",null,(0,n.__)("Show cookie on Cookie Policy","complianz-gdpr")),(0,l.createElement)("input",{disabled:k,onChange:t=>D(t,e.ID,"showOnPolicy"),type:"checkbox",checked:e.showOnPolicy})),(0,l.createElement)("div",{className:"cmplz-details-row"},(0,l.createElement)("label",null,(0,n.__)("Name","complianz-gdpr")),(0,l.createElement)("input",{disabled:k,onChange:t=>((e,t,a)=>{let l={ID:t,value:e.target.value};g(l)})(t,e.ID),type:"text",placeholder:(0,n.__)("Name","complianz-gdpr"),value:_.value})),(0,l.createElement)("div",{className:"cmplz-details-row"},(0,l.createElement)("label",null,(0,n.__)("Service","complianz-gdpr")),(0,l.createElement)("select",{disabled:k,onChange:t=>f(t,e.ID,"serviceID"),value:e.serviceID},(0,l.createElement)("option",{key:-1,value:0},(0,n.__)("Select a service","complianz-gdpr")),m.map(((e,t)=>(0,l.createElement)("option",{key:t,value:e.ID},e.name))))),(0,l.createElement)("div",{className:"cmplz-details-row"},(0,l.createElement)("label",null,(0,n.__)("Expiration","complianz-gdpr")),(0,l.createElement)("input",{disabled:I,onChange:t=>((e,t,a)=>{let l={ID:t,value:e.target.value};E(l)})(t,e.ID),type:"text",placeholder:(0,n.__)("1 year","complianz-gdpr"),value:v.value})),(0,l.createElement)("div",{className:"cmplz-details-row"},(0,l.createElement)("label",null,(0,n.__)("Cookie function","complianz-gdpr")),(0,l.createElement)("input",{disabled:k,onChange:t=>((e,t,a)=>{let l={ID:t,value:e.target.value};z(l)})(t,e.ID),type:"text",placeholder:(0,n.__)("e.g. store user ID","complianz-gdpr"),value:h.value})),(0,l.createElement)("div",{className:"cmplz-details-row"},(0,l.createElement)("label",null,(0,n.__)("Purpose","complianz-gdpr")),(0,l.createElement)("select",{disabled:k,onChange:t=>f(t,e.ID,"purpose"),value:e.purpose},(0,l.createElement)("option",{key:-1,value:0},(0,n.__)("Select a purpose","complianz-gdpr")),o.map(((e,t)=>(0,l.createElement)("option",{key:t,value:e.name},e.name))))),w&&(0,l.createElement)("div",{className:"cmplz-details-row"},(0,l.createElement)("a",{href:w,target:"_blank"},(0,n.__)("View cookie on cookiedatabase.org","complianz-gdpr"))),(0,l.createElement)("div",{className:"cmplz-details-row cmplz-details-row__buttons"},(0,l.createElement)("button",{disabled:c,onClick:t=>(async e=>{await u(e),a((0,n.__)("Saved cookie","complianz-gd[r"))})(e.ID),className:"button button-default"},(0,n.__)("Save","complianz-gdpr")),(0,l.createElement)("button",{className:"button button-default "+N,onClick:t=>(async e=>{await p(e)})(e.ID)},1==e.deleted&&(0,n.__)("Restore","complianz-gdpr"),1!=e.deleted&&(0,n.__)("Delete","complianz-gdpr"))))},d=e=>{let{cookie:t}=e,a="";t.deleted?a=" | "+(0,n.__)("Deleted","complianz-gdpr"):t.showOnPolicy?a=" | "+(0,n.__)("Admin, ignored","complianz-gdpr"):t.isMembersOnly&&(a=" | "+(0,n.__)("Logged in users only, ignored","complianz-gdpr"));let r=t.name;return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(o.default,{summary:r,comment:a,icons:(0,l.createElement)(l.Fragment,null,t.complete&&(0,l.createElement)(c.default,{tooltip:(0,n.__)("The data for this cookie is complete","complianz-gdpr"),name:"success",color:"green"}),!t.complete&&(0,l.createElement)(c.default,{tooltip:(0,n.__)("This cookie has missing fields","complianz-gdpr"),name:"times",color:"red"}),t.sync&&t.synced&&(0,l.createElement)(c.default,{name:"rotate",color:"green"}),!t.synced||!t.sync&&(0,l.createElement)(c.default,{tooltip:(0,n.__)("This cookie is not synchronized with cookiedatabase.org.","complianz-gdpr"),name:"rotate-error",color:"red"}),t.showOnPolicy&&(0,l.createElement)(c.default,{tooltip:(0,n.__)("This cookie will be on your Cookie Policy","complianz-gdpr"),name:"file",color:"green"}),!t.showOnPolicy&&(0,l.createElement)(c.default,{tooltip:(0,n.__)("This cookie is not shown on the Cookie Policy","complianz-gdpr"),name:"file-disabled",color:"grey"}),t.old&&(0,l.createElement)(c.default,{tooltip:(0,n.__)("This cookie has not been detected on your site in the last three months","complianz-gdpr"),name:"calendar-error",color:"red"}),!t.old&&(0,l.createElement)(c.default,{tooltip:(0,n.__)("This cookie has recently been detected","complianz-gdpr"),name:"calendar",color:"green"})),details:m(t),style:(()=>{if(t.deleted)return Object.assign({},{backgroundColor:"var(--rsp-red-faded)"})})()}))}},45927:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var l=a(69307),c=a(68189),n=a(34573),o=a(99057),r=a(65736),i=a(20384),s=a(56293);const m=e=>{const{getFieldValue:t,showSavedSettingsNotice:a}=(0,s.default)(),{saving:c,deleteService:n,serviceTypeOptions:i,updateService:m,saveService:d}=(0,o.UseSyncData)();let p="yes"===t("use_cdb_api");if(!e)return null;let u=!!p&&1==e.sync,_=u;c&&(_=!0);let g=!1;e.slug.length>0&&(g="https://cookiedatabase.org/service/"+e.slug);const v=(e,t,a)=>{m(t,a,e.target.value)},E=(e,t,a)=>{m(t,a,e.target.checked)};return(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"cmplz-details-row cmplz-details-row__checkbox"},(0,l.createElement)("label",null,(0,r.__)("Data is shared with this service","complianz-gdpr")),(0,l.createElement)("input",{disabled:_,onChange:t=>E(t,e.ID,"thirdParty"),type:"checkbox",checked:e.thirdParty})),(0,l.createElement)("div",{className:"cmplz-details-row cmplz-details-row__checkbox"},(0,l.createElement)("label",null,(0,r.__)("Sync service with cookiedatabase.org","complianz-gdpr")),(0,l.createElement)("input",{disabled:!p,onChange:t=>E(t,e.ID,"sync"),type:"checkbox",checked:u})),(0,l.createElement)("div",{className:"cmplz-details-row"},(0,l.createElement)("label",null,(0,r.__)("Name","complianz-gdpr")),(0,l.createElement)("input",{disabled:_,onChange:t=>v(t,e.ID,"name"),type:"text",placeholder:(0,r.__)("Name","complianz-gdpr"),value:e.name})),(0,l.createElement)("div",{className:"cmplz-details-row"},(0,l.createElement)("label",null,(0,r.__)("Service Types","complianz-gdpr")),(0,l.createElement)("select",{disabled:_,onChange:t=>v(t,e.ID,"serviceType"),value:e.serviceType},(0,l.createElement)("option",{key:-1,value:0},(0,r.__)("Select a service","complianz-gdpr")),i.map(((e,t)=>(0,l.createElement)("option",{key:t,value:e.name},e.name))))),(0,l.createElement)("div",{className:"cmplz-details-row"},(0,l.createElement)("label",null,(0,r.__)("Privacy Statement URL","complianz-gdpr")),(0,l.createElement)("input",{disabled:_,onChange:t=>v(t,e.ID,"privacyStatementURL"),type:"text",placeholder:(0,r.__)("https://domain.com/privacy","complianz-gdpr"),value:e.privacyStatementURL})),g&&(0,l.createElement)("div",{className:"cmplz-details-row"},(0,l.createElement)("a",{href:g,target:"_blank"},(0,r.__)("View service on cookiedatabase.org","complianz-gdpr"))),(0,l.createElement)("div",{className:"cmplz-details-row cmplz-details-row__buttons"},(0,l.createElement)("button",{disabled:c,onClick:t=>(async e=>{await d(e),a((0,r.__)("Saved service","complianz-gd[r"))})(e.ID),className:"button button-default"},(0,r.__)("Save","complianz-gdpr")),(0,l.createElement)("button",{className:"button button-default cmplz-reset-button",onClick:t=>(async e=>{console.log("delete service",e),await n(e)})(e.ID)},(0,r.__)("Delete Service","complianz-gdpr"))))},d=e=>{const{adding:t}=(0,o.UseSyncData)(),a=e.service&&e.service.ID>0&&e.service.hasOwnProperty("name"),s=!e.service||e.service.ID<=0,d=e.service&&e.service.name?e.service.name:(0,r.__)("New Service","complianz-gdpr");return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(n.default,{summary:e.name,icons:e.service?(0,l.createElement)(l.Fragment,null,e.service.complete&&(0,l.createElement)(i.default,{tooltip:(0,r.__)("The data for this service is complete","complianz-gdpr"),name:"success",color:"green"}),!e.service.complete&&(0,l.createElement)(i.default,{tooltip:(0,r.__)("This service has missing fields","complianz-gdpr"),name:"times",color:"red"}),e.service.synced&&(0,l.createElement)(i.default,{tooltip:(0,r.__)("This service has been synchronized with cookiedatabase.org","complianz-gdpr"),name:"rotate",color:"green"}),!e.service.synced&&(0,l.createElement)(i.default,{tooltip:(0,r.__)("This service is not synchronized with cookiedatabase.org","complianz-gdpr"),name:"rotate-error",color:"red"})):(0,l.createElement)(l.Fragment,null),details:(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",null,m(e.service)),e.cookies&&e.cookies.length>0&&(0,l.createElement)("div",{className:"cmplz-panel__cookie_list"},e.cookies.map(((e,t)=>(0,l.createElement)(c.default,{key:t,cookie:e})))),!s&&(0,l.createElement)("div",null,(0,l.createElement)("button",{disabled:t||!a,onClick:t=>((t,a)=>{e.addCookie(t,a)})(e.service.ID,d),className:"button button-default"},(0,r.__)("Add cookie to %s","complianz-gdpr").replace("%s",d),t&&(0,l.createElement)(i.default,{name:"loading",color:"grey"})),!a&&(0,l.createElement)("div",{className:"cmplz-comment"},(0,r.__)("Save service to be able to add cookies","complianz-gdpr"))))}))}},34573:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var l=a(69307),c=a(20384);const n=e=>(0,l.createElement)("div",{className:"cmplz-panel__list__item",key:e.id,style:e.style?e.style:{}},(0,l.createElement)("details",null,(0,l.createElement)("summary",null,e.icon&&(0,l.createElement)(c.default,{name:e.icon}),(0,l.createElement)("h5",{className:"cmplz-panel__list__item__title"},e.summary),(0,l.createElement)("div",{className:"cmplz-panel__list__item__comment"},e.comment),(0,l.createElement)("div",{className:"cmplz-panel__list__item__icons"},e.icons),(0,l.createElement)(c.default,{name:"chevron-down",size:18})),(0,l.createElement)("div",{className:"cmplz-panel__list__item__details"},e.details)))}}]);