{"version":3,"file":"src_Settings_CookieBannerPreview_CookieBannerPreview_js.js","mappings":"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","sources":["webpack://complianz-gdpr/./src/Settings/CookieBannerPreview/CookieBannerPreview.js","webpack://complianz-gdpr/./src/Settings/CookieBannerPreview/tcf.js","webpack://complianz-gdpr/./src/Settings/CookieBannerPreview/CookieBannerPreview.scss?8888","webpack://complianz-gdpr/./node_modules/react-use/esm/useFirstMountState.js","webpack://complianz-gdpr/./node_modules/react-use/esm/useUpdateEffect.js"],"sourcesContent":["import useFields from \"../../Settings/Fields/FieldsData\";\nimport UseBannerData from \"./CookieBannerData\";\nimport {useEffect, useState, useRef} from \"@wordpress/element\";\nimport {useUpdateEffect} from 'react-use';\nimport {getPurposes, filterArray, concatenateString} from \"./tcf\";\nimport './CookieBannerPreview.scss';\n/**\n * Render a help notice in the sidebar\n */\nconst CookieBannerPreview = () => {\n\tconst rootRef = useRef(null);\n\tconst {fields, updateField, getFieldValue, getField, setChangedField} = useFields();\n\tconst {setBannerContainerClass, bannerContainerClass, cssLoading, cssLoaded, generatePreviewCss, pageLinks, selectedBanner, selectedBannerId, fetchBannerData, bannerDataLoaded, bannerHtml, manageConsentHtml, consentType, vendorCount, setBannerFieldsSynced} = UseBannerData();\n\tconst [timer, setTimer] = useState(null)\n\tconst [bannerInitialized, setBannerInitialized] = useState(false)\n\tconst [tcfActive, setTcfActive] = useState(false);\n\tconst [InitialCssGenerated, setInitialCssGenerated] = useState(false);\n\n\tuseEffect(() => {\n\t\tlet active = getFieldValue('uses_ad_cookies_personalized') === 'tcf' || getFieldValue('uses_ad_cookies_personalized') === 'yes';\n\t\tsetTcfActive(active);\n\t}, [fields]);\n\n\tuseEffect (  () => {\n\t\tif ( !bannerDataLoaded ) {\n\t\t\tfetchBannerData();\n\t\t}\n\t}, [bannerDataLoaded])\n\n\t//also reload if ab testing is enabled, to get the second banner that may have been added just now.\n\tuseEffect (  () => {\n\t\tfetchBannerData();\n\t}, [getFieldValue('a_b_testing_buttons') ])\n\n\tuseUpdateEffect(()=> {\n\t\tsetUpBanner();\n\t})\n\n\tuseEffect ( () => {\n\t\tif ( bannerDataLoaded ) {\n\t\t\tupdateField('consent_type', consentType );\n\t\t\tsetChangedField('consent_type', consentType);\n\t\t}\n\t}, [consentType])\n\n\tuseEffect (  () => {\n\t\tif ( bannerDataLoaded ) {\n\t\t\t// fill fields with data from selected banner, default the default banner\n\t\t\tlet bannerFields = getBannerFields();\n\t\t\tfor ( const field of bannerFields ) {\n\t\t\t\tif ( selectedBanner.hasOwnProperty(field.id) ) {\n\t\t\t\t\t//load defaults\n\t\t\t\t\tlet value = selectedBanner[field.id];\n\t\t\t\t\tif ( value.length===0 || ( value.hasOwnProperty('text') && value['text'].length===0) ) {\n\t\t\t\t\t\tvalue = field.default;\n\t\t\t\t\t}\n\t\t\t\t\tupdateField(field.id, value )\n\t\t\t\t}\n\t\t\t}\n\t\t\tupdateField('manage_consent', selectedBanner['revoke'] );\n\n\t\t\tsetBannerInitialized(true);\n\t\t}\n\n\t}, [selectedBannerId, bannerDataLoaded ] )\n\n\t//should run after banner initialized .\n\tuseEffect ( () => {\n\t\tconst run = async () => {\n\t\t\tif ( bannerInitialized && !cssLoading ) {\n\t\t\t\tupdateField('consent_type', consentType )\n\t\t\t\tawait updatePreview();\n\n\t\t\t\tif ( consentType === 'optin' ) {\n\t\t\t\t\tlet widthChanged = validateBannerWidth();\n\t\t\t\t\tif ( widthChanged ) {\n\t\t\t\t\t\tawait updatePreview();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ( getFieldValue('soft_cookiewall')==1 ) {\n\t\t\t\t\tsetBannerContainerClass('cmplz-soft-cookiewall');\n\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\tsetBannerContainerClass('');\n\t\t\t\t\t}, 4000)\n\t\t\t\t}\n\t\t\t\tsetupClickEvents(true);\n\t\t\t}\n\t\t}\n\t\trun();\n\n\t}, [fields, consentType, selectedBannerId, bannerInitialized])\n\n\n\t/**\n\t * delay rendering the preview if the user is still typing\n\t */\n\tconst updatePreview = () => {\n\t\tclearTimeout(timer);\n\t\tlet bannerFields =  getBannerFields();\n\t\tif ( !InitialCssGenerated ) {\n\t\t\tgeneratePreviewCss(bannerFields);\n\t\t\tsetInitialCssGenerated(true);\n\t\t} else {\n\t\t\tconst newTimer = setTimeout(() => {\n\t\t\t\tgeneratePreviewCss(bannerFields);\n\t\t\t}, 500)\n\t\t\tsetTimer(newTimer)\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tconsole.log(\"banner data tcf\");\n\t\tif (!tcfActive) return;\n\t\tconsole.log(\"banner data tcf 2\");\n\n\t\tconst rootElement = rootRef.current;\n\t\tif (!rootRef.current) {\n\t\t\treturn;\n\t\t}\n\t\tconsole.log(\"banner data tcf 3\");\n\n\t\t// Query the DOM using the root element\n\t\t//if tcf, insert categories\n\t\tif ( consentType === 'optin' && rootElement) {\n\t\t\tconsole.log(\"banner data tcf 4\");\n\n\t\t\tlet purposesField = getField('tcf_purposes');\n\t\t\tlet purposes = filterArray(purposesField.options, purposesField.value);\n\t\t\tconst srcMarketingPurposes = getPurposes('marketing', false);\n\n\t\t\tconst srcStatisticsPurposes = getPurposes('statistics', false);\n\t\t\tconst marketingPurposes = filterArray(purposes, srcMarketingPurposes);\n\t\t\tconst statisticsPurposes = filterArray(purposes, srcStatisticsPurposes);\n\t\t\tconsole.log('marketingPurposes');\n\t\t\tconsole.log(marketingPurposes);\n\t\t\tlet featuresField = getField('tcf_features');\n\t\t\tlet features = filterArray(featuresField.options, featuresField.value);\n\n\t\t\tlet specialFeaturesField = getField('tcf_specialFeatures');\n\t\t\tlet specialFeatures = filterArray(specialFeaturesField.options, specialFeaturesField.value);\n\n\t\t\tlet specialPurposesField = getField('tcf_specialPurposes');\n\t\t\tlet specialPurposes = filterArray(specialPurposesField.options, specialPurposesField.value);\n\n\t\t\tconst marketingPurposesContainer = rootElement.querySelector('.cmplz-tcf .cmplz-marketing .cmplz-description');\n\t\t\tconst statisticsPurposesContainer = rootElement.querySelector('.cmplz-tcf .cmplz-statistics .cmplz-description');\n\n\t\t\tconst featuresContainer = rootElement.querySelector('.cmplz-tcf .cmplz-features .cmplz-description');\n\t\t\tconst specialFeaturesContainer = rootElement.querySelector('.cmplz-tcf .cmplz-specialfeatures .cmplz-title');\n\t\t\tconst specialPurposesContainer = rootElement.querySelector('.cmplz-tcf .cmplz-specialpurposes .cmplz-title');\n\n\t\t\tlet f = rootElement.querySelector('.cmplz-tcf .cmplz-features');\n\t\t\tlet sp = rootElement.querySelector('.cmplz-tcf .cmplz-specialpurposes');\n\t\t\tlet sf = rootElement.querySelector('.cmplz-tcf .cmplz-specialfeatures');\n\t\t\tlet stp = rootElement.querySelector('.cmplz-tcf .cmplz-statistics');\n\t\t\tif (features.length === 0 && f) f.style.display = 'none';\n\t\t\tif (specialPurposes.length === 0 && sp ) sp.style.display = 'none';\n\t\t\tif (specialFeatures.length === 0 && sf) sf.style.display = 'none';\n\t\t\tif (statisticsPurposes.length === 0 && stp) stp.style.display = 'none';\n\n\t\t\tif (marketingPurposesContainer) marketingPurposesContainer.innerHTML = concatenateString(marketingPurposes);\n\t\t\tif (statisticsPurposesContainer) statisticsPurposesContainer.innerHTML = concatenateString(statisticsPurposes);\n\t\t\tif (featuresContainer) featuresContainer.innerHTML = concatenateString(features);\n\t\t\tif (specialFeaturesContainer) specialFeaturesContainer.innerHTML = concatenateString(specialFeatures);\n\t\t\tif (specialPurposesContainer) specialPurposesContainer.innerHTML = concatenateString(specialPurposes);\n\t\t}\n\t}, [tcfActive, bannerInitialized, bannerDataLoaded, consentType, cssLoading, fields ]);\n\n\t/**\n\t * On fields change, update the values in the banner objects\n\t */\n\tuseEffect (  () => {\n\t\tif ( bannerInitialized ) {\n\t\t\t// fill fields with data from selected banner, default the default banner\n\t\t\tlet bannerFields = getBannerFields();\n\t\t\tfor ( const field of bannerFields ) {\n\t\t\t\tif ( selectedBanner.hasOwnProperty(field.id) ) {\n\t\t\t\t\tselectedBanner[field.id] = field.value;\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetBannerFieldsSynced(true);\n\t\t}\n\t}, [fields] )\n\n\tconst replace = (string, find, replace) => {\n\t\tlet re = new RegExp(find, 'g');\n\t\treturn string.replace(re, replace);\n\t}\n\n\tconst htmlDecode = (input) => {\n\t\tvar doc = new DOMParser().parseFromString(input, \"text/html\");\n\t\treturn doc.documentElement.textContent;\n\t}\n\n\tconst setupClickEvents = (update) => {\n\t\t//default hide manage consent button\n\t\tlet cmplz_manage_consent = document.querySelector('.cmplz-manage-consent');\n\t\tlet cmplz_banner = document.querySelector('#cmplz-cookiebanner-container .cmplz-cookiebanner');\n\n\t\tif (cmplz_manage_consent) cmplz_manage_consent.style.display = 'none';\n\n\t\t//only do this on updates.\n\t\tif (cmplz_banner && update ) {\n\t\t\tcmplz_banner.querySelector('.cmplz-view-preferences' ).style.display = 'block';\n\t\t\tcmplz_banner.querySelector('.cmplz-save-preferences' ).style.display = 'none';\n\t\t}\n\n\t\tdocument.addEventListener('click', e => {\n\t\t\tif ( e.target.closest('.cmplz-manage-consent' ) ) {\n\t\t\t\tcmplz_banner.style.display = 'block';\n\t\t\t\tif (cmplz_manage_consent) cmplz_manage_consent.style.display = 'none';\n\t\t\t}\n\n\t\t\tif (e.target.closest('.cmplz-close') || e.target.closest('.cmplz-accept') || e.target.closest('.cmplz-deny') ) {\n\t\t\t\tcmplz_banner.style.display = 'none';\n\t\t\t\tif (cmplz_manage_consent) cmplz_manage_consent.style.display = 'block';\n\t\t\t}\n\n\t\t\tif ( e.target.closest('.cmplz-view-preferences') ) {\n\t\t\t\tcmplz_banner.classList.add('cmplz-categories-visible');\n\t\t\t\tcmplz_banner.querySelector('.cmplz-categories' ).style.display = 'block';\n\t\t\t\tcmplz_banner.querySelector('.cmplz-categories' ).classList.add('cmplz-fade-in');\n\t\t\t\tcmplz_banner.querySelector('.cmplz-view-preferences' ).style.display = 'none';\n\t\t\t\tcmplz_banner.querySelector('.cmplz-save-preferences' ).style.display = 'block';\n\t\t\t}\n\t\t\tif ( e.target.closest('.cmplz-save-preferences') ) {\n\t\t\t\tcmplz_banner.classList.remove('cmplz-categories-visible');\n\t\t\t\tcmplz_banner.querySelector('.cmplz-categories' ).style.display = 'none';\n\t\t\t\tcmplz_banner.querySelector('.cmplz-categories' ).classList.remove('cmplz-fade-in');\n\t\t\t\tcmplz_banner.querySelector('.cmplz-view-preferences' ).style.display = 'block';\n\t\t\t\tcmplz_banner.querySelector('.cmplz-save-preferences' ).style.display = 'none';\n\t\t\t}\n\t\t});\n\n\n\t}\n\n\tconst setUpBanner = () => {\n\t\tlet bannerObject = document.querySelector('#cmplz-cookiebanner-container');\n\t\tif (bannerObject) {\n\t\t\tbannerObject.querySelectorAll('.cmplz-links a:not(.cmplz-external), .cmplz-buttons a:not(.cmplz-external)').forEach(docElement => {\n\t\t\t\tdocElement.classList.add('cmplz-hidden');\n\t\t\t\tfor (let pageType in pageLinks ) {\n\t\t\t\t\tif ( pageLinks.hasOwnProperty(pageType) && docElement.classList.contains(pageType) ) {\n\t\t\t\t\t\tdocElement.setAttribute('href', pageLinks[pageType]['url'] + docElement.getAttribute('data-relative_url'));\n\t\t\t\t\t\tif ( docElement.innerText === '{title}') {\n\t\t\t\t\t\t\tdocElement.innerText = htmlDecode(pageLinks[pageType]['title']);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdocElement.classList.remove('cmplz-hidden');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tsetupClickEvents(false);\n\t}\n\n\tconst getBannerFields = () => {\n\t\treturn fields.filter( field => field.data_target === 'banner');\n\t}\n\n\tconst validateBannerWidth = () => {\n\t\tif ( getFieldValue('position') === 'bottom' ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t//@todo: if TCF, skip\n\t\tif ( getFieldValue('disable_width_correction') === true ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!document.querySelector('.cmplz-categories')) {\n\t\t\treturn;\n\t\t}\n\t\t//temporarily set cats visibility to visible to be able to measure\n\t\tdocument.querySelector('.cmplz-categories').style.display = 'block';\n\t\t//check if cats width is ok\n\t\tlet cats_width = document.querySelector('.cmplz-categories').offsetWidth;\n\t\tdocument.querySelector('.cmplz-categories').style.display = 'none';\n\n\t\tlet message_width = document.querySelector('.cmplz-message').offsetWidth;\n\t\tlet banner_width = document.querySelector('.cmplz-cookiebanner').offsetWidth;\n\t\tlet max_banner_change = banner_width * 1.3;\n\t\tlet new_width_cats = 0;\n\t\tlet new_width_btns = 0;\n\t\tlet banner_padding= false;\n\t\tlet padding_left = window.getComputedStyle(document.querySelector('.cmplz-cookiebanner'), null).getPropertyValue('padding-left');\n\t\tlet padding_right = window.getComputedStyle(document.querySelector('.cmplz-cookiebanner'), null).getPropertyValue('padding-left');\n\n\t\t//check if the banner padding is in px, and if so get it as int\n\t\tif (padding_left.indexOf('px')!==-1 && padding_right.indexOf('px')!==-1){\n\t\t\tbanner_padding = parseInt(padding_left.replace('px', '')) + parseInt(padding_right.replace('px', ''));\n\t\t}\n\n\t\tif ( cats_width>0 && banner_padding ){\n\t\t\tif ( banner_width-banner_padding > cats_width ) {\n\t\t\t\tlet difference = banner_width-42 - cats_width;\n\t\t\t\tnew_width_cats =  parseInt(banner_width) + parseInt(difference);\n\t\t\t}\n\t\t}\n\n\t\tlet btn_width = 0;\n\t\tbtn_width = document.querySelectorAll('.cmplz-buttons .cmplz-btn').offsetWidth;\n\t\tif (btn_width > message_width) {\n\t\t\tlet difference = btn_width - 42 - message_width;\n\t\t\tnew_width_btns = parseInt(btn_width) + parseInt(difference);\n\t\t}\n\n\t\tlet new_width = 0;\n\t\tif (new_width_btns > new_width_cats ) {\n\t\t\tnew_width = new_width_btns;\n\t\t} else {\n\t\t\tnew_width = new_width_cats;\n\t\t}\n\t\tif ( new_width > banner_width && new_width < max_banner_change ) {\n\t\t\tif(new_width % 2 !== 0) new_width++;\n\t\t\tupdateField('banner_width', new_width);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\n\tconst convertLegacyFields = (fieldId) => {\n\t\t//conversion of legacy fieldnames\n\t\tlet mapping = {\n\t\t\t'use_logo': 'logo',\n\t\t\t'category_all': 'category_marketing',\n\t\t\t'category_stats': 'category_statistics',\n\t\t\t'accept_informational': 'accept_optout',\n\t\t\t'accept': 'accept_optin',\n\t\t\t'view_preferences': 'manage_options',\n\t\t\t'save_preferences': 'save_settings',\n\t\t}\n\t\tif (mapping.hasOwnProperty(fieldId)) {\n\t\t\treturn mapping[fieldId];\n\t\t}\n\n\t\treturn fieldId;\n\t}\n\n\tif ( !bannerDataLoaded ) {\n\t\treturn (<></>);\n\t}\n\n\n\t//render banner with this data\n\tlet resultHtml = bannerHtml;\n\tlet resultManageConsentHtml = manageConsentHtml;\n\tlet bannerFields = getBannerFields();\n\tresultHtml = replace( resultHtml, '{consent_type}', consentType );\n\tresultHtml = replace( resultHtml, '{id}', selectedBanner.ID );\n\tresultHtml = replace( resultHtml, '{vendor_count}', vendorCount );\n\tresultManageConsentHtml = replace( resultManageConsentHtml, '{id}', selectedBanner.ID );\n\tlet hidePreview = getFieldValue('hide_preview')==1 || getFieldValue('disable_cookiebanner')==1;\n\tfor ( const field of bannerFields ) {\n\t\tif (field.id==='title') {\n\t\t\tcontinue;\n\t\t}\n\t\tlet fieldId = convertLegacyFields(field.id);\n\t\tif ( selectedBanner.hasOwnProperty(field.id) ) {\n\t\t\tlet fieldValue = selectedBanner[field.id];\n\t\t\tif ( field.type === 'text_checkbox' && fieldValue && fieldValue.hasOwnProperty('text') ) {\n\t\t\t\tresultHtml = replace(resultHtml, '{' + fieldId + '}', fieldValue['text']);\n\t\t\t} else if (field.type==='banner_logo'){\n\t\t\t\tlet replaceLogo = selectedBanner.logo_options[fieldValue] ? selectedBanner.logo_options[fieldValue] : '';\n\t\t\t\tresultHtml = replace( resultHtml, '{'+fieldId+'}', replaceLogo );\n\n\t\t\t} else {\n\t\t\t\tresultHtml = replace( resultHtml, '{'+fieldId+'}', fieldValue );\n\t\t\t}\n\t\t}\n\n\t\tif ( field.id === 'revoke') {\n\t\t\tresultManageConsentHtml = replace( resultManageConsentHtml, '{manage_consent}', selectedBanner['revoke'] );\n\t\t}\n\n\t}\n\n\tif ( !cssLoaded || hidePreview ) {\n\t\treturn (<></>)\n\t}\n\n\t//load css file\n\treturn (\n\t\t<>\n\t\t\t<div id=\"cmplz-preview-banner-container\" ref={rootRef}>\n\t\t\t\t<div id=\"cmplz-cookiebanner-container\" className={bannerContainerClass} dangerouslySetInnerHTML={{__html:resultHtml}}></div>\n\t\t\t\t<div id=\"cmplz-manage-consent\" data-nosnippet=\"true\" dangerouslySetInnerHTML={{__html:resultManageConsentHtml}}></div>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nexport default CookieBannerPreview\n","export const getPurposes = (category, includeLowerCategories) => {\n\t//these categories aren't used\n\tif (category === 'functional' || category === 'preferences') {\n\t\treturn [];\n\t}\n\n\tif (category === 'marketing') {\n\t\tif (includeLowerCategories) {\n\t\t\treturn [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\n\t\t} else {\n\t\t\treturn [1, 2, 3, 4, 5, 6, 10];\n\t\t}\n\t} else if (category === 'statistics') {\n\t\treturn [1, 7, 8, 9];\n\t}\n}\n\nexport const filterArray = (arrayToFilter, arrayToFilterBy) => {\n\tif (!arrayToFilter) {\n\t\tarrayToFilter = {};\n\t}\n\tif (!Array.isArray(arrayToFilterBy)) {\n\t\tarrayToFilterBy = Object.keys(arrayToFilter);\n\t}\n\tconst keysToFilterBy = arrayToFilterBy.map(item => parseInt(item));\n\treturn Object.keys(arrayToFilter)\n\t\t.filter(key => keysToFilterBy.includes(parseInt(key)))\n\t\t.map(key => arrayToFilter[key]);\n}\n\nexport const concatenateString = (array) => {\n\tlet string = '';\n\tconst max = array.length - 1;\n\tfor (var key in array) {\n\t\tif (array.hasOwnProperty(key)) {\n\t\t\tstring += array[key];\n\t\t\tif (key < max) {\n\t\t\t\tstring += ', ';\n\t\t\t} else {\n\t\t\t\tstring += '.';\n\t\t\t}\n\t\t}\n\t}\n\treturn string;\n}\n","// extracted by mini-css-extract-plugin\nexport {};","import { useRef } from 'react';\nexport function useFirstMountState() {\n    var isFirst = useRef(true);\n    if (isFirst.current) {\n        isFirst.current = false;\n        return true;\n    }\n    return isFirst.current;\n}\n","import { useEffect } from 'react';\nimport { useFirstMountState } from './useFirstMountState';\nvar useUpdateEffect = function (effect, deps) {\n    var isFirstMount = useFirstMountState();\n    useEffect(function () {\n        if (!isFirstMount) {\n            return effect();\n        }\n    }, deps);\n};\nexport default useUpdateEffect;\n"],"names":["useFields","UseBannerData","useEffect","useState","useRef","useUpdateEffect","getPurposes","filterArray","concatenateString","CookieBannerPreview","rootRef","fields","updateField","getFieldValue","getField","setChangedField","setBannerContainerClass","bannerContainerClass","cssLoading","cssLoaded","generatePreviewCss","pageLinks","selectedBanner","selectedBannerId","fetchBannerData","bannerDataLoaded","bannerHtml","manageConsentHtml","consentType","vendorCount","setBannerFieldsSynced","timer","setTimer","bannerInitialized","setBannerInitialized","tcfActive","setTcfActive","InitialCssGenerated","setInitialCssGenerated","active","setUpBanner","bannerFields","getBannerFields","field","hasOwnProperty","id","value","length","default","run","updatePreview","widthChanged","validateBannerWidth","setTimeout","setupClickEvents","clearTimeout","newTimer","console","log","rootElement","current","purposesField","purposes","options","srcMarketingPurposes","srcStatisticsPurposes","marketingPurposes","statisticsPurposes","featuresField","features","specialFeaturesField","specialFeatures","specialPurposesField","specialPurposes","marketingPurposesContainer","querySelector","statisticsPurposesContainer","featuresContainer","specialFeaturesContainer","specialPurposesContainer","f","sp","sf","stp","style","display","innerHTML","replace","string","find","re","RegExp","htmlDecode","input","doc","DOMParser","parseFromString","documentElement","textContent","update","cmplz_manage_consent","document","cmplz_banner","addEventListener","e","target","closest","classList","add","remove","bannerObject","querySelectorAll","forEach","docElement","pageType","contains","setAttribute","getAttribute","innerText","filter","data_target","cats_width","offsetWidth","message_width","banner_width","max_banner_change","new_width_cats","new_width_btns","banner_padding","padding_left","window","getComputedStyle","getPropertyValue","padding_right","indexOf","parseInt","difference","btn_width","new_width","convertLegacyFields","fieldId","mapping","createElement","Fragment","resultHtml","resultManageConsentHtml","ID","hidePreview","fieldValue","type","replaceLogo","logo_options","ref","className","dangerouslySetInnerHTML","__html","category","includeLowerCategories","arrayToFilter","arrayToFilterBy","Array","isArray","Object","keys","keysToFilterBy","map","item","key","includes","array","max"],"sourceRoot":""}