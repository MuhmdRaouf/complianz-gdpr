{"version":3,"file":"src_Settings_CookieBannerPreview_BannerLogoControl_js.js","mappings":"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","sources":["webpack://complianz-gdpr/./src/Settings/CookieBannerPreview/BannerLogoControl.js","webpack://complianz-gdpr/./src/Settings/Inputs/SelectInput.js","webpack://complianz-gdpr/./src/Settings/Inputs/Input.scss?1cff","webpack://complianz-gdpr/./src/Settings/Inputs/SelectInput.scss?4c54"],"sourcesContent":["import SelectInput from \"../Inputs/SelectInput\";\nimport UseBannerData from \"./CookieBannerData\";\nimport useFields from \"../Fields/FieldsData\";\nimport { __ } from '@wordpress/i18n';\nimport {memo} from \"react\";\n\nconst BannerLogoControl = (props) => {\n\tconst { customizeUrl, selectedBanner, bannerDataLoaded} = UseBannerData();\n\tconst {updateField, setChangedField} = useFields();\n\n\tconst onChangeHandler = (value) => {\n\t\tupdateField(props.id, value);\n\t\tsetChangedField( props.id, value );\n\t\tdocument.querySelector('.cmplz-cookiebanner .cmplz-logo').innerHTML = selectedBanner.logo_options[value];\n\t}\n\n\t//document.querySelector('.cmplz-logo-preview.cmplz-theme-image a').attr('href', customizeUrl);\n\tlet previewClass = \"cmplz-logo-preview\";\n\tif (props.value==='complianz') {\n\t\tpreviewClass+= ' cmplz-complianz-logo';\n\t} else if (props.value==='site') {\n\t\tpreviewClass+= ' cmplz-theme-image';\n\t}\n\tlet frame;\n\tconst runUploader = (event) => {\n\t\t// If the media frame already exists, reopen it.\n\t\tif (frame) {\n\t\t\tframe.open()\n\t\t\treturn\n\t\t}\n\n\t\t// Create a new media frame\n\t\tframe = wp.media({\n\t\t\ttitle: __('Select a logo','complianz-gdpr'),\n\t\t\tbutton: {\n\t\t\t\ttext: __('Set logo','complianz-gdpr'),\n\t\t\t},\n\t\t\tmultiple: false, // Set to true to allow multiple files to be selected\n\t\t})\n\n\t\t// When an image is selected in the media frame...\n\t\tframe.on( 'select', function() {\n\t\t\tvar length = frame.state().get(\"selection\").length;\n\t\t\tvar images = frame.state().get(\"selection\").models;\n\n\t\t\tfor(var iii = 0; iii < length; iii++)\n\t\t\t{\n\t\t\t\tvar thumbnail_id = images[iii].id;\n\t\t\t\tvar image = false;\n\t\t\t\timage = images[iii].attributes.sizes['cmplz_banner_image'];\n\t\t\t\tif (!image) {\n\t\t\t\t\timage = images[iii].attributes.sizes['medium'];\n\t\t\t\t}\n\t\t\t\tif (!image) {\n\t\t\t\t\timage = images[iii].attributes.sizes['thumbnail'];\n\t\t\t\t}\n\t\t\t\tif (!image) {\n\t\t\t\t\timage = images[iii].attributes.sizes['full'];\n\t\t\t\t}\n\n\t\t\t\tif ( image ) {\n\t\t\t\t\tvar image_url = image['url'];\n\t\t\t\t\tupdateField('logo_attachment_id', thumbnail_id);\n\t\t\t\t\tsetChangedField('logo_attachment_id', thumbnail_id);\n\t\t\t\t\tlet img = document.createElement(\"img\");\n\t\t\t\t\tdocument.querySelector(\".cmplz-cookiebanner .cmplz-logo\").appendChild(img);\n\t\t\t\t\tdocument.querySelector('.cmplz-cookiebanner .cmplz-logo img').src = image_url;\n\t\t\t\t\tdocument.querySelector('.cmplz-custom-image img').src = image_url;\n\t\t\t\t}\n\n\t\t\t}\n\t\t});\n\n\t\t// Finally, open the modal on click\n\t\tframe.open()\n\t}\n\t//https://wordpress.stackexchange.com/questions/368238/how-use-wp-media-upload-liberary-in-react-components\n\treturn (\n\t\t<div className=\"cmplz-logo-container\">\n\t\t\t<SelectInput\n\t\t\t\t// disabled={ props.disabled }\n\t\t\t\tlabel={ props.label }\n\t\t\t\tonChange={ ( fieldValue ) => onChangeHandler(fieldValue) }\n\t\t\t\tvalue= { props.value }\n\t\t\t\toptions={ props.options }\n\t\t\t/>\n\t\t\t{ props.value==='complianz' &&\n\t\t\t\t<div className={previewClass}>\n\t\t\t\t\t<div dangerouslySetInnerHTML={{__html:selectedBanner.logo_options[props.value]}} ></div>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t{ props.value==='site' &&\n\t\t\t\t<div className={previewClass}>\n\t\t\t\t\t<div dangerouslySetInnerHTML={{__html:selectedBanner.logo_options[props.value]}} ></div>\n\t\t\t\t\t{props.value==='site' && selectedBanner.logo_options[props.value].length===0 && <>\n\t\t\t\t\t\t<p>{__('No logo found. Please add a logo in the customizer.', 'complianz-gdpr')}</p>\n\t\t\t\t\t</>}\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t{ props.value==='custom' &&\n\t\t\t\t<div className=\"cmplz-logo-preview cmplz-clickable\" onClick={() => runUploader() }>\n\t\t\t\t\t<div className=\"cmplz-custom-image\" dangerouslySetInnerHTML={{__html:selectedBanner.logo_options[props.value]}} ></div>\n\t\t\t\t</div>\n\t\t\t}\n\n\t\t</div>\n\t)\n}\nexport default memo(BannerLogoControl)\n","import {memo} from 'react';\nimport * as Select from '@radix-ui/react-select';\nimport Icon from '../../utils/Icon';\nimport './Input.scss';\nimport './SelectInput.scss';\nimport { __ } from '@wordpress/i18n';\n\nconst SelectInput = ({\n\tvalue = false,\n\tonChange,\n\trequired,\n\tdefaultValue,\n\tdisabled,\n\toptions = {},\n\t innerRef,\n}) => {\n\treturn (\n\t\t<div className=\"cmplz-input-group cmplz-select-group\">\n\t\t\t<Select.Root\n\t\t\t\t//ref={innerRef}\n\t\t\t\tvalue={value}\n\t\t\t\tdefaultValue={defaultValue}\n\t\t\t\tonValueChange={onChange}\n\t\t\t\trequired={required}\n\t\t\t\tdisabled={disabled && !Array.isArray(disabled)}\n\t\t\t>\n\t\t\t\t<Select.Trigger className=\"cmplz-select-group__trigger\">\n\t\t\t\t\t<Select.Value/>\n\t\t\t\t\t<Icon name={'chevron-down'}/>\n\t\t\t\t</Select.Trigger>\n\t\t\t\t\t<Select.Content\n\t\t\t\t\t\tclassName=\"cmplz-select-group__content\"\n\t\t\t\t\t\tposition=\"popper\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Select.ScrollUpButton\n\t\t\t\t\t\t\tclassName=\"cmplz-select-group__scroll-button\">\n\t\t\t\t\t\t\t<Icon name={'chevron-up'}/>\n\t\t\t\t\t\t</Select.ScrollUpButton>\n\t\t\t\t\t\t<Select.Viewport className=\"cmplz-select-group__viewport\">\n\t\t\t\t\t\t\t<Select.Group>\n\t\t\t\t\t\t\t\t<Select.Item className={'cmplz-select-group__item'} key={0} value=\"\">\n\t\t\t\t\t\t\t\t\t<Select.ItemText>{__(\"Select an option\",\"complianz-gdpr\")}</Select.ItemText>\n\t\t\t\t\t\t\t\t</Select.Item>\n\t\t\t\t\t\t\t\t{Object.entries(options).map(([optionValue, optionText]) => (\n\t\t\t\t\t\t\t\t\t<Select.Item\n\t\t\t\t\t\t\t\t\t\tdisabled={Array.isArray(disabled) && disabled.includes(optionValue) }\n\t\t\t\t\t\t\t\t\t\tclassName={'cmplz-select-group__item'}\n\t\t\t\t\t\t\t\t\t\tkey={optionValue}\n\t\t\t\t\t\t\t\t\t\tvalue={optionValue}>\n\t\t\t\t\t\t\t\t\t\t<Select.ItemText>{optionText}</Select.ItemText>\n\t\t\t\t\t\t\t\t\t</Select.Item>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</Select.Group>\n\t\t\t\t\t\t</Select.Viewport>\n\t\t\t\t\t\t<Select.ScrollDownButton\n\t\t\t\t\t\t\tclassName=\"cmplz-select-group__scroll-button\">\n\t\t\t\t\t\t\t<Icon name={'chevron-down'}/>\n\t\t\t\t\t\t</Select.ScrollDownButton>\n\t\t\t\t\t</Select.Content>\n\t\t\t</Select.Root>\n\t\t</div>\n\t);\n};\n\nexport default memo(SelectInput);\n","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};"],"names":["SelectInput","UseBannerData","useFields","__","memo","BannerLogoControl","props","customizeUrl","selectedBanner","bannerDataLoaded","updateField","setChangedField","onChangeHandler","value","id","document","querySelector","innerHTML","logo_options","previewClass","frame","runUploader","event","open","wp","media","title","button","text","multiple","on","length","state","get","images","models","iii","thumbnail_id","image","attributes","sizes","image_url","img","createElement","appendChild","src","className","label","onChange","fieldValue","options","dangerouslySetInnerHTML","__html","Fragment","onClick","Select","Icon","_ref","required","defaultValue","disabled","innerRef","Root","onValueChange","Array","isArray","Trigger","Value","name","Content","position","ScrollUpButton","Viewport","Group","Item","key","ItemText","Object","entries","map","_ref2","optionValue","optionText","includes","ScrollDownButton"],"sourceRoot":""}