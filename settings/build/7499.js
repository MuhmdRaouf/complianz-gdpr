"use strict";(globalThis.webpackChunkcomplianz_gdpr=globalThis.webpackChunkcomplianz_gdpr||[]).push([[7499,3252],{17499:(e,a,t)=>{t.r(a),t.d(a,{default:()=>r});var l=t(69307),n=t(43684),o=t(65736),s=t(23252);const r=()=>{const[e,a]=(0,l.useState)(!1),[t,r]=(0,l.useState)(1),[i,c]=(0,l.useState)(0),[d,m]=(0,l.useState)(0),{consentType:g,statisticsData:b,loaded:f,fetchStatisticsData:u,labels:p,setLabels:h}=(0,s.default)();(0,l.useEffect)((()=>{!f&&cmplz_settings.is_premium&&u()}),[]),(0,l.useEffect)((()=>{if(""===g||!f)return;if(!b||!b.hasOwnProperty(g))return;let e=[...b[g].labels],a=b[g].categories;a="optin"===g?a.filter((e=>"functional"===e||"no_warning"===e||"do_not_track"===e)):a.filter((e=>"functional"===e||"marketing"===e||"statistics"===e||"preferences"===e));let t=a.map((e=>b[g].categories.indexOf(e)));for(let a=t.length-1;a>=0;a--)e.splice(t[a],1);h(e)}),[f,g]),(0,l.useEffect)((()=>{if(""===g||!f||!b)return;let e=b[g].datasets.filter((e=>e.default));if(e.length>0){let t=e[0].data,l=t.reduce(((e,a)=>parseInt(e)+parseInt(a)),0);l=l>0?l:1,r(l),c(e[0].full_consent),m(e[0].no_consent),t=t.slice(2),a(t)}}),[f,g]);const k=e=>{let a="dial-med-low-light";return 1===e?a="dial-med-light":2===e?a="dial-light":3===e?a="dial-off-light":4===e&&(a="dial-min-light"),(0,l.createElement)(l.Fragment,null,(0,l.createElement)(n.default,{name:a,color:"black"}))};return(0,l.createElement)("div",{className:"cmplz-tools-statistics"},(0,l.createElement)("div",{className:"cmplz-statistics-container"},(0,l.createElement)("div",{className:"cmplz-main-consent"},(0,l.createElement)("div",{className:"cmplz-main-consent-count cmplz-full-consent"},(0,l.createElement)(n.default,{name:"dial-max-light",color:"green",size:"22"}),i,(0,l.createElement)("div",null,(0,o.__)("Full Consent","complianz-gdpr"))),(0,l.createElement)("div",{className:"cmplz-main-consent-count  cmplz-no-consent"},(0,l.createElement)(n.default,{name:"dial-min-light",color:"red",size:"22"}),d,(0,l.createElement)("div",null,(0,o.__)("No Consent","complianz-gdpr"))))),0===p.length&&(0,l.createElement)("div",{className:"cmplz-details"},(0,l.createElement)("div",{className:"cmplz-detail-icon"},k(0)),(0,l.createElement)("div",{className:"cmplz-detail"},(0,l.createElement)("div",{className:"cmplz-detail-name"},"..."),(0,l.createElement)("div",{className:"cmplz-detail-data"},"0%"))),p.length>0&&p.map(((a,n)=>{return(0,l.createElement)("div",{key:n,className:"cmplz-details"},(0,l.createElement)("div",{className:"cmplz-detail-icon"},k(n)),(0,l.createElement)("div",{className:"cmplz-detail"},(0,l.createElement)("div",{className:"cmplz-detail-name"},a),(0,l.createElement)("div",{className:"cmplz-detail-data"},e.hasOwnProperty(n)?(o=e[n],o=parseInt(o),Math.round(o/t*100)):0,"%")));var o})))}},23252:(e,a,t)=>{t.r(a),t.d(a,{default:()=>r});var l=t(30270),n=t(48399);const o={optin:{labels:["Functional","Statistics","Marketing","Do Not Track","No choice","No warning"],categories:["functional","statistics","marketing","do_not_track","no_choice","no_warning"],datasets:[{data:["0","0","0","0","0","0"],backgroundColor:"rgba(255, 99, 132, 1)",borderColor:"rgba(255, 99, 132, 1)",label:"A (default)",fill:"false",borderDash:[0,0]},{data:["0","0","0","0","0","0"],backgroundColor:"rgba(255, 159, 64, 1)",borderColor:"rgba(255, 159, 64, 1)",label:"B",fill:"false",borderDash:[0,0]}],max:5},optout:{labels:["Functional","Statistics","Marketing","Do Not Track","No choice","No warning"],categories:["functional","statistics","marketing","do_not_track","no_choice","no_warning"],datasets:[{data:["0","0","0","0","0","0"],backgroundColor:"rgba(255, 99, 132, 1)",borderColor:"rgba(255, 99, 132, 1)",label:"A (default)",fill:"false",borderDash:[0,0]},{data:["0","0","0","0","0","0"],backgroundColor:"rgba(255, 159, 64, 1)",borderColor:"rgba(255, 159, 64, 1)",label:"B",fill:"false",borderDash:[0,0]}],max:5}},s={optin:{labels:["Functional","Statistics","Marketing","Do Not Track","No choice","No warning"],categories:["functional","statistics","marketing","do_not_track","no_choice","no_warning"],datasets:[{data:["29","747","174","292","30","10"],backgroundColor:"rgba(255, 99, 132, 1)",borderColor:"rgba(255, 99, 132, 1)",label:"Demo A (default)",fill:"false",borderDash:[0,0]},{data:["3","536","240","389","45","32"],backgroundColor:"rgba(255, 159, 64, 1)",borderColor:"rgba(255, 159, 64, 1)",label:"Demo B",fill:"false",borderDash:[0,0]}],max:5},optout:{labels:["Functional","Statistics","Marketing","Do Not Track","No choice","No warning"],categories:["functional","statistics","marketing","do_not_track","no_choice","no_warning"],datasets:[{data:["29","747","174","292","30","10"],backgroundColor:"rgba(255, 99, 132, 1)",borderColor:"rgba(255, 99, 132, 1)",label:"A (default)",fill:"false",borderDash:[0,0]},{data:["3","536","240","389","45","32"],backgroundColor:"rgba(255, 159, 64, 1)",borderColor:"rgba(255, 159, 64, 1)",label:"Demo B",fill:"false",borderDash:[0,0]}],max:5}},r=(0,l.Ue)(((e,a)=>({consentType:"optin",setConsentType:a=>{e({consentType:a})},statisticsLoading:!1,consentTypes:[],regions:[],defaultConsentType:"optin",loaded:!1,statisticsData:s,emptyStatisticsData:o,bestPerformerEnabled:!1,daysLeft:"",abTrackingCompleted:!1,labels:[],setLabels:a=>{e({labels:a})},fetchStatisticsData:async()=>{if(e({saving:!0}),a().loaded)return;const{daysLeft:t,abTrackingCompleted:l,consentTypes:o,statisticsData:s,defaultConsentType:r,regions:i,bestPerformerEnabled:c}=await n.doAction("get_statistics_data",{}).then((e=>e)).catch((e=>{console.error(e)}));e({saving:!1,loaded:!0,consentType:r,consentTypes:o,statisticsData:s,defaultConsentType:r,bestPerformerEnabled:c,regions:i,daysLeft:t,abTrackingCompleted:l})}})))}}]);