{"version":3,"file":"src_Settings_CreateDocuments_CreateDocumentsControl_js.js","mappings":";;;;;;;;;;;;;;;;;;;;;AAAiD;AACb;AACS;AACR;;AAErC;AACA;AACA;AACA,MAAMI,cAAc,GAAIC,KAAK,IAAK;EACjC,MAAM;IAACC,MAAM;IAAEC;EAAe,CAAC,GAAGP,gEAAgB,CAAC,CAAC;EACpD,MAAM;IAACQ;EAAuB,CAAC,GAAGN,8DAAS,CAAC,CAAC;EAE7C,MAAMO,eAAe,GAAGA,CAACC,CAAC,EAAEC,EAAE,KAAK;IAClCJ,cAAc,CAACI,EAAE,EAAED,CAAC,CAACE,MAAM,CAACC,KAAK,CAAC;EACnC,CAAC;EACD,MAAMC,cAAc,GAAGA,CAACJ,CAAC,EAAEK,SAAS,KAAK;IACxC,IAAIC,OAAO;IACXN,CAAC,CAACE,MAAM,CAACK,SAAS,CAACC,GAAG,CAAC,uBAAuB,CAAC;IAC/C,IAAIC,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC;IAC1CD,QAAQ,CAACE,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAACC,WAAW,CAACJ,IAAI,CAAC;IAC1DA,IAAI,CAACN,KAAK,GAAGE,SAAS;IACtBI,IAAI,CAACK,MAAM,CAAC,CAAC;IACb,IAAI;MACHR,OAAO,GAAGI,QAAQ,CAACK,WAAW,CAAC,MAAM,CAAC;IACvC,CAAC,CAAC,OAAOf,CAAC,EAAE;MACXM,OAAO,GAAG,KAAK;IAChB;IACAG,IAAI,CAACO,aAAa,CAACC,WAAW,CAACR,IAAI,CAAC;IACpC,IAAIH,OAAO,EAAE;MACZR,uBAAuB,CAACL,mDAAE,CAAC,kBAAkB,EAAE,gBAAgB,CAAC,CAAC;IAClE;EACD,CAAC;EACD,IAAIyB,SAAS,GAAG,CAAC,CAACvB,KAAK,CAACwB,IAAI,CAACC,OAAO;EACpC,OACCT,iEAAA;IAAKU,SAAS,EAAC;EAAuB,GACnCH,SAAS,IAAIP,iEAAA,CAACpB,mDAAI;IAAC+B,IAAI,EAAC,SAAS;IAACC,KAAK,EAAC;EAAO,CAAC,CAAC,EACjD,CAACL,SAAS,IAAIP,iEAAA,CAACpB,mDAAI;IAAC+B,IAAI,EAAC;EAAO,CAAC,CAAC,EACpCX,iEAAA;IAAOa,QAAQ,EAAE5B,MAAO;IAAC6B,QAAQ,EAAKzB,CAAC,IAAOD,eAAe,CAACC,CAAC,EAAEL,KAAK,CAACwB,IAAI,CAACC,OAAO,CAAG;IAAEM,IAAI,EAAC,MAAM;IAACvB,KAAK,EAAER,KAAK,CAACwB,IAAI,CAACQ;EAAM,CAAC,CAAC,EAC9HhB,iEAAA;IAAKU,SAAS,EAAC,2BAA2B;IAACO,OAAO,EAAK5B,CAAC,IAAOI,cAAc,CAACJ,CAAC,EAAEL,KAAK,CAACwB,IAAI,CAACd,SAAS;EAAG,GAACM,iEAAA,CAACpB,mDAAI;IAAE+B,IAAI,EAAC;EAAW,CAAC,CAAM,CACnI,CAAC;AAGR,CAAC;AAED,iEAAe5B,cAAc;;;;;;;;;;;;;;;;;;;;;;;;;;AC5CQ;AACY;AACH;AACD;AACY;AACD;AACpB;AACT;;AAE3B;AACA;AACA;AACA,MAAMsC,sBAAsB,GAAGA,CAAA,KAAM;EACpC,MAAM;IAACC,aAAa;IAAErC,MAAM;IAAEsC,gBAAgB;IAAEC,mBAAmB;IAAEC,eAAe;IAAEC,kBAAkB;IAAEC;EAAc,CAAC,GAAGhD,gEAAgB,CAAC,CAAC;EAC9I,MAAM;IAACiD,MAAM;IAAEC,aAAa;IAAE1C,uBAAuB;IAAE2C;EAA0B,CAAC,GAAGjD,uEAAS,CAAC,CAAC;EAGhGqC,6DAAS,CAAI,MAAM;IAClBQ,kBAAkB,CAAC,CAAC;EACrB,CAAC,EAAE,CAAEE,MAAM,EAAEJ,mBAAmB,CAAE,CAAC;EAEnCN,6DAAS,CAAI,MAAM;IAClB,IAAIM,mBAAmB,IAAIG,aAAa,CAACI,MAAM,KAAK,CAAC,EAAE;MACtD,IAAIC,WAAW,GAAGlD,mDAAE,CAAC,qDAAqD,EAAE,gBAAgB,CAAC,GAAG,GAAG,GAAGA,mDAAE,CAAC,oCAAoC,EAAE,gBAAgB,CAAC;MAChK+C,aAAa,CAAC,kBAAkB,EAAE,SAAS,EAAEG,WAAW,EAAElD,mDAAE,CAAC,uBAAuB,EAAE,gBAAgB,CAAC,CAAC;IACzG;EACD,CAAC,EAAE,CAAE6C,aAAa,EAAEH,mBAAmB,CAAE,CAAC;EAE1C,MAAMS,oBAAoB,GAAG,MAAAA,CAAA,KAAY;IACxCX,aAAa,CAAC,CAAC,CAACY,IAAI,CAAC,MAAK;MACzBJ,0BAA0B,CAAC,IAAI,CAAC;MAChC3C,uBAAuB,CAACL,mDAAE,CAAC,oBAAoB,EAAE,gBAAgB,CAAC,CAAC;IACpE,CAAC,CAAC;EACH,CAAC;EACD,IAAIqD,KAAK;EACT,IAAKV,eAAe,EAAE;IACrBU,KAAK,GAAGrD,mDAAE,CAAC,2KAA2K,EAAC,gBAAgB,CAAC;EACzM,CAAC,MAAM;IACNqD,KAAK,GAAGrD,mDAAE,CAAC,yIAAyI,EAAC,gBAAgB,CAAC;EACvK;EAEA,IAAI,CAAC0C,mBAAmB,EAAE;IACzB,OACCxB,iEAAA,CAACmB,gEAAW;MAACiB,KAAK,EAAC;IAAG,CAAc,CAAC;EAEvC;EACA,IAAIvB,QAAQ,GAAG,CAACY,eAAe,IAAI,CAACF,gBAAgB;EACpD,OACCvB,iEAAA,CAAAqC,wDAAA,QACEb,mBAAmB,IAAIW,KAAK,EAC5BX,mBAAmB,IAAIG,aAAa,CAACW,GAAG,CAAC,CAAC9B,IAAI,EAAE+B,CAAC,KAAKvC,iEAAA,CAACjB,uDAAc;IAACyB,IAAI,EAAEA,IAAK;IAACgC,GAAG,EAAED;EAAE,CAAE,CAAC,CAAC,EAC7FZ,aAAa,CAACI,MAAM,GAAC,CAAC,IACtB/B,iEAAA,cACCA,iEAAA;IAAQa,QAAQ,EAAEA,QAAS;IAACI,OAAO,EAAEA,CAAA,KAAKgB,oBAAoB,CAAC,CAAE;IAACvB,SAAS,EAAC;EAAuB,GACjGe,eAAe,GAAG3C,mDAAE,CAAC,sBAAsB,EAAC,gBAAgB,CAAC,GAAGA,mDAAE,CAAC,QAAQ,EAAC,gBAAgB,CAAC,EAC7FG,MAAM,IAAIe,iEAAA,CAACpB,mDAAI;IAAC+B,IAAI,EAAG,SAAS;IAACC,KAAK,EAAG;EAAM,CAAE,CAC3C,CACJ,CAEL,CAAC;AAIL,CAAC;AAED,iEAAeQ,2CAAI,CAACC,sBAAsB,CAAC","sources":["webpack://complianz-gdpr/./src/Settings/CreateDocuments/CreateDocument.js","webpack://complianz-gdpr/./src/Settings/CreateDocuments/CreateDocumentsControl.js"],"sourcesContent":["import {UseDocumentsData} from \"./DocumentsData\";\nimport Icon from \"../../utils/Icon\";\nimport useFields from \"../Fields/FieldsData\";\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Render a help notice in the sidebar\n */\nconst CreateDocument = (props) => {\n\tconst {saving, updateDocument } = UseDocumentsData();\n\tconst {showSavedSettingsNotice} = useFields();\n\n\tconst onChangeHandler = (e, id) => {\n\t\tupdateDocument(id, e.target.value);\n\t}\n\tconst onClickhandler = (e, shortcode) => {\n\t\tlet success;\n\t\te.target.classList.add('cmplz-click-animation');\n\t\tlet temp = document.createElement(\"input\");\n\t\tdocument.getElementsByTagName(\"body\")[0].appendChild(temp);\n\t\ttemp.value = shortcode;\n\t\ttemp.select();\n\t\ttry {\n\t\t\tsuccess = document.execCommand(\"copy\");\n\t\t} catch (e) {\n\t\t\tsuccess = false;\n\t\t}\n\t\ttemp.parentElement.removeChild(temp);\n\t\tif (success) {\n\t\t\tshowSavedSettingsNotice(__(\"Copied shortcode\", \"complianz-gdpr\"));\n\t\t}\n\t}\n\tlet isCreated = !!props.page.page_id;\n\treturn (\n\t\t<div className=\"cmplz-create-document\">\n\t\t\t{ isCreated && <Icon name='success' color='green'/>}\n\t\t\t{ !isCreated && <Icon name='times'/>}\n\t\t\t<input disabled={saving} onChange={ ( e ) =>  onChangeHandler(e, props.page.page_id) }  type=\"text\" value={props.page.title}/>\n\t\t\t<div className=\"cmplz-shortcode-container\" onClick={ ( e ) =>  onClickhandler(e, props.page.shortcode) }><Icon  name='shortcode'/></div>\n\t\t</div>\n\t);\n\n}\n\nexport default CreateDocument\n","import { __ } from '@wordpress/i18n';\nimport {UseDocumentsData} from \"./DocumentsData\";\nimport CreateDocument from \"./CreateDocument\";\nimport {useEffect} from \"@wordpress/element\";\nimport useFields from \"../../Settings/Fields/FieldsData\";\nimport Placeholder from '../../Placeholder/Placeholder';\nimport Icon from \"../../utils/Icon\";\nimport {memo} from \"react\";\n\n/**\n * Render a help notice in the sidebar\n */\nconst CreateDocumentsControl = () => {\n\tconst {saveDocuments, saving, documentsChanged, documentsDataLoaded, hasMissingPages, fetchDocumentsData, requiredPages } = UseDocumentsData();\n\tconst {fields, addHelpNotice, showSavedSettingsNotice, setDocumentSettingsChanged} = useFields();\n\n\n\tuseEffect (  () => {\n\t\tfetchDocumentsData();\n\t}, [ fields, documentsDataLoaded ])\n\n\tuseEffect (  () => {\n\t\tif (documentsDataLoaded && requiredPages.length === 0) {\n\t\t\tlet explanation = __(\"You haven't selected any legal documents to create.\", \"complianz-gdpr\") + \" \" + __(\"You can continue to the next step.\", \"complianz-gdpr\");\n\t\t\taddHelpNotice('create-documents', 'warning', explanation, __('No required documents', 'complianz-gdpr'));\n\t\t}\n\t}, [ requiredPages, documentsDataLoaded ])\n\n\tconst onButtonClickHandler = async () => {\n\t\tsaveDocuments().then(()=> {\n\t\t\tsetDocumentSettingsChanged(true);\n\t\t\tshowSavedSettingsNotice(__(\"Documents updated!\", \"complianz-gdpr\"));\n\t\t});\n\t}\n\tlet intro;\n\tif ( hasMissingPages ){\n\t\tintro = __(\"The pages marked with X should be added to your website. You can create these pages with a shortcode, a Gutenberg block or use the below \\\"Create missing pages\\\" button.\",\"complianz-gdpr\");\n\t} else {\n\t\tintro = __(\"All necessary pages have been created already. You can update the page titles here if you want, then click the \\\"Update pages\\\" button.\",\"complianz-gdpr\");\n\t}\n\n\tif (!documentsDataLoaded) {\n\t\treturn (\n\t\t\t<Placeholder lines=\"3\"></Placeholder>\n\t\t)\n\t}\n\tlet disabled = !hasMissingPages && !documentsChanged;\n\treturn (\n\t\t<>\n\t\t\t{documentsDataLoaded && intro}\n\t\t\t{documentsDataLoaded && requiredPages.map((page, i) => <CreateDocument page={page} key={i} />)}\n\t\t\t{requiredPages.length>0 &&\n\t\t\t\t<div>\n\t\t\t\t\t<button disabled={disabled} onClick={()=> onButtonClickHandler()} className=\"button button-default\">\n\t\t\t\t\t\t{hasMissingPages ? __(\"Create missing pages\",\"complianz-gdpr\") : __(\"Update\",\"complianz-gdpr\")}\n\t\t\t\t\t\t{saving && <Icon name = \"loading\" color = 'grey' />}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t}\n\t\t</>\n\n\t);\n\n}\n\nexport default memo(CreateDocumentsControl)\n"],"names":["UseDocumentsData","Icon","useFields","__","CreateDocument","props","saving","updateDocument","showSavedSettingsNotice","onChangeHandler","e","id","target","value","onClickhandler","shortcode","success","classList","add","temp","document","createElement","getElementsByTagName","appendChild","select","execCommand","parentElement","removeChild","isCreated","page","page_id","className","name","color","disabled","onChange","type","title","onClick","useEffect","Placeholder","memo","CreateDocumentsControl","saveDocuments","documentsChanged","documentsDataLoaded","hasMissingPages","fetchDocumentsData","requiredPages","fields","addHelpNotice","setDocumentSettingsChanged","length","explanation","onButtonClickHandler","then","intro","lines","Fragment","map","i","key"],"sourceRoot":""}