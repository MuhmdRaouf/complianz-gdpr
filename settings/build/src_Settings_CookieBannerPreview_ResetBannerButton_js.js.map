{"version":3,"file":"src_Settings_CookieBannerPreview_ResetBannerButton_js.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAqC;AACoB;AACV;AACX;AACmB;AAC5B;AACwD;AAEnF,MAAMS,iBAAiB,GAAGA,CAAA,KAAM;EAC/B,MAAM;IAAEC,UAAU;IAAEC;EAAe,CAAC,GAAGT,6DAAa,CAAC,CAAC;EACtD,MAAM,CAACU,MAAM,EAAEC,SAAS,CAAC,GAAGT,4DAAQ,CAAC,KAAK,CAAC;EAC3C,MAAM;IAACU,WAAW;IAAEC;EAAe,CAAC,GAAGd,uEAAS,CAAC,CAAC;EAClD,MAAM,CAAEe,MAAM,EAAEC,SAAS,CAAE,GAAGb,4DAAQ,CAAE,KAAM,CAAC;;EAE/C;EACAC,6DAAS,CAAE,MAAM;IAChB,IAAK,CAACK,UAAU,EAAG;MAClBG,SAAS,CAAC,KAAK,CAAC;IACjB;EACD,CAAC,EAAE,CAACH,UAAU,CAAE,CAAC;EAEjB,MAAMQ,aAAa,GAAG,MAAAA,CAAA,KAAY;IACjCD,SAAS,CAAE,KAAM,CAAC;IAClB,MAAME,WAAW,CAAC,CAAC;EACpB,CAAC;EAED,MAAMC,YAAY,GAAGA,CAAA,KAAM;IAC1BH,SAAS,CAAE,KAAM,CAAC;EACnB,CAAC;EAED,MAAME,WAAW,GAAGA,CAAA,KAAM;IACzBN,SAAS,CAAC,IAAI,CAAC;IACf,IAAIQ,YAAY,GAAGV,cAAc,CAACW,aAAa;IAC/C,KAAM,MAAMC,KAAK,IAAIF,YAAY,EAAG;MACnC,IAAKE,KAAK,CAACC,cAAc,CAAC,SAAS,CAAC,EAAG;QACtC,IAAKD,KAAK,CAACE,IAAI,KAAG,QAAQ,EAAG;UAC5B;QACD;QACAX,WAAW,CAACS,KAAK,CAACG,EAAE,EAAEH,KAAK,CAACI,OAAO,CAAC;QACpCZ,eAAe,CAACQ,KAAK,CAACG,EAAE,EAAEH,KAAK,CAACI,OAAO,CAAC;MACzC;IACD;EACD,CAAC;EAED,OACCC,iEAAA,CAAAC,wDAAA,QACCD,iEAAA,CAACpB,8EAAa;IACbQ,MAAM,EAAGA,MAAQ;IACjBc,SAAS,EAAGA,CAAA,KAAMZ,aAAa,CAAC,CAAG;IACnCa,QAAQ,EAAEA,CAAA,KAAMd,SAAS,CAAC,KAAK;EAAG,GAEjCjB,mDAAE,CAAC,qEAAqE,EAAE,gBAAgB,CAC7E,CAAC,EAChB4B,iEAAA;IAAQI,QAAQ,EAAEpB,MAAO;IACvBqB,OAAO,EAAEA,CAAA,KAAMhB,SAAS,CAAE,IAAK,CAAE;IACjCiB,SAAS,EAAC;EAAuB,GAEjClC,mDAAE,CAAC,OAAO,EAAE,gBAAgB,CAAC,EAC5BY,MAAM,IAAIgB,iEAAA,CAACzB,mDAAI;IAACgC,IAAI,EAAG,SAAS;IAACC,KAAK,EAAG;EAAM,CAAE,CAC5C,CACP,CAAC;AAEL,CAAC;AACD,iEAAe9B,2CAAI,CAACG,iBAAiB,CAAC","sources":["webpack://complianz-gdpr/./src/Settings/CookieBannerPreview/ResetBannerButton.js"],"sourcesContent":["import { __ } from '@wordpress/i18n';\nimport useFields from \"../../Settings/Fields/FieldsData\";\nimport UseBannerData from \"./CookieBannerData\";\nimport Icon from \"../../utils/Icon\";\nimport {useState, useEffect} from \"@wordpress/element\";\nimport {memo} from 'react';\nimport {__experimentalConfirmDialog as ConfirmDialog} from \"@wordpress/components\";\n\nconst ResetBannerButton = () => {\n\tconst { cssLoading, selectedBanner } = UseBannerData();\n\tconst [active, setActive] = useState(false);\n\tconst {updateField, setChangedField} = useFields();\n\tconst [ isOpen, setIsOpen ] = useState( false );\n\n\t//set active to false when css is loaded.\n\tuseEffect( () => {\n\t\tif ( !cssLoading ) {\n\t\t\tsetActive(false);\n\t\t}\n\t}, [cssLoading] );\n\n\tconst handleConfirm = async () => {\n\t\tsetIsOpen( false );\n\t\tawait setDefaults();\n\t};\n\n\tconst handleCancel = () => {\n\t\tsetIsOpen( false );\n\t};\n\n\tconst setDefaults = () => {\n\t\tsetActive(true);\n\t\tlet bannerFields = selectedBanner.banner_fields;\n\t\tfor ( const field of bannerFields ) {\n\t\t\tif ( field.hasOwnProperty('default') ) {\n\t\t\t\tif ( field.type==='hidden' ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tupdateField(field.id, field.default);\n\t\t\t\tsetChangedField(field.id, field.default);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<ConfirmDialog\n\t\t\t\tisOpen={ isOpen }\n\t\t\t\tonConfirm={ () => handleConfirm() }\n\t\t\t\tonCancel={() => setIsOpen(false) }\n\t\t\t>\n\t\t\t\t{__('Are you sure you want to reset this banner to the default settings?', 'complianz-gdpr')}\n\t\t\t</ConfirmDialog>\n\t\t\t<button disabled={active}\n\t\t\t\t\tonClick={() => setIsOpen( true )}\n\t\t\t\t\tclassName=\"button button-default\"\n\t\t\t>\n\t\t\t\t{__('Reset', 'complianz-gdpr')}\n\t\t\t\t\t{active && <Icon name = \"loading\" color = 'grey' />}\n\t\t\t</button>\n\t\t</>\n\t);\n}\nexport default memo(ResetBannerButton);\n"],"names":["__","useFields","UseBannerData","Icon","useState","useEffect","memo","__experimentalConfirmDialog","ConfirmDialog","ResetBannerButton","cssLoading","selectedBanner","active","setActive","updateField","setChangedField","isOpen","setIsOpen","handleConfirm","setDefaults","handleCancel","bannerFields","banner_fields","field","hasOwnProperty","type","id","default","createElement","Fragment","onConfirm","onCancel","disabled","onClick","className","name","color"],"sourceRoot":""}