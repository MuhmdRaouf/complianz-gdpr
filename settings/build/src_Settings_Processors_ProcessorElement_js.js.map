{"version":3,"file":"src_Settings_Processors_ProcessorElement_js.js","mappings":"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","sources":["webpack://complianz-gdpr/./src/Settings/Panel.js","webpack://complianz-gdpr/./src/Settings/ProcessingAgreements/ProcessingAgreementsData.js","webpack://complianz-gdpr/./src/Settings/Processors/ProcessorElement.js"],"sourcesContent":["import Icon from \"../utils/Icon\";\nconst Panel = (props) => {\n\treturn (\n\t\t<>\n\t\t  <div className=\"cmplz-panel__list__item\" key={props.id} style={props.style ? props.style : {}}>\n\t\t\t<details>\n\t\t\t  <summary>\n\t\t\t  \t<div className=\"cmplz-panel__list__item__title\">{props.summary}</div>\n\t\t\t    <div className=\"cmplz-panel__list__item__comment\">{props.comment}</div>\n\t\t\t    <div className=\"cmplz-panel__list__item__icons\">{props.icons}</div>\n\t\t\t\t<Icon name={'chevron-down'} size={18} />\n\t\t\t  </summary>\n\t\t\t  <div className=\"cmplz-panel__list__item__details\">\n\t\t\t  \t{props.details}\n\t\t\t  </div>\n\t\t\t</details>\n\t\t  </div>\n\t\t</>\n\n\t);\n}\n\nexport default Panel\n","import {create} from 'zustand';\nimport produce from 'immer';\nimport * as cmplz_api from \"../../utils/api\";\nimport {updateFieldsListWithConditions} from \"../../utils/updateFieldsListWithConditions\";\nconst useProcessingAgreementsData = create(( set, get ) => ({\n\tdocumentsLoaded: false,\n\tregion: '',\n\tfileName: '',\n\tserviceName: '',\n\tfetching:false,\n\tupdating:false,\n\tloadingFields:false,\n\tdocuments: [],\n\tregions: [],\n\tfields: [],\n\teditDocumentId:false,\n\tresetEditDocumentId: (id) => {\n\t\tset({editDocumentId:false, region:'', serviceName:''});\n\t},\n\teditDocument: async (e, id) => {\n\t\te.preventDefault();\n\t\tset({updating:true});\n\t\tawait cmplz_api.doAction('load_processing_agreement', {id: id}).then((response) => {\n\t\t\tset({fields:response.fields,region:response.region,serviceName:response.serviceName,updating:false, fileName:response.file_name});\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t});\n\t\tset({editDocumentId:id});\n\t},\n\tsetRegion: (region) => {\n\t\tset({region:region});\n\t},\n\tsetServiceName: (serviceName) => {\n\t\tset({serviceName:serviceName});\n\t},\n\tupdateField: (id, value) => {\n\t\tlet found=false;\n\t\tlet index = false;\n\t\tset(\n\t\t\tproduce((state) => {\n\t\t\t\tstate.fields.forEach(function(fieldItem, i) {\n\t\t\t\t\tif (fieldItem.id === id ){\n\t\t\t\t\t\tindex = i;\n\t\t\t\t\t\tfound=true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (index!==false) state.fields[index].value = value;\n\t\t\t})\n\t\t)\n\t\tlet newFields = updateFieldsListWithConditions(get().fields);\n\t\tset({fields:newFields});\n\t},\n\tsave: async ( region, serviceName ) => {\n\t\tset({updating:true});\n\t\tlet postId = get().editDocumentId;\n\t\tawait cmplz_api.doAction('save_processing_agreement', {fields: get().fields, region: region, serviceName: serviceName, post_id:postId}).then((response) => {\n\t\t\tset({updating:false});\n\n\t\t\treturn response;\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t});\n\t\tget().fetchData();\n\t},\n\tdeleteDocuments: async ( ids ) => {\n\t\t//get array of documents to delete\n\t\tlet deleteDocuments = get().documents.filter(document => ids.includes(document.id));\n\t\t//remove the ids from the documents array\n\t\tset((state) => ({\n\t\t\tdocuments: state.documents.filter(document => !ids.includes(document.id)),\n\t\t}));\n\t\tlet data = {};\n\t\tdata.documents = deleteDocuments;\n\t\tawait cmplz_api.doAction('delete_processing_agreement', data).then((response) => {\n\t\t\treturn response;\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t});\n\t},\n\tfetchData: async ( ) => {\n\t\tif (get().fetching) return;\n\t\tset({fetching:true});\n\t\tlet data = {}\n\t\tconst { documents,regions } = await cmplz_api.doAction('get_processing_agreements', data).then((response) => {\n\t\t\treturn response;\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t});\n\t\tset(() => ({\n\t\t\tdocumentsLoaded: true,\n\t\t\tdocuments: documents,\n\t\t\tregions: regions,\n\t\t\tfetching:false,\n\t\t}));\n\t},\n\tfetchFields: async ( region ) => {\n\t\tlet data = {region:region}\n\t\tset({loadingFields:true});\n\t\tconst { fields } = await cmplz_api.doAction('get_processing_agreement_fields', data).then((response) => {\n\t\t\treturn response;\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t});\n\t\tlet newFields = updateFieldsListWithConditions(fields);\n\n\t\tset((state) => ({\n\t\t\tfields: newFields,\n\t\t\tloadingFields:false,\n\t\t}));\n\t},\n}));\n\nexport default useProcessingAgreementsData;\n","import { __ } from '@wordpress/i18n';\nimport Icon from \"../../utils/Icon\";\nimport Panel from \"./../Panel\";\nimport useFields from \"../../Settings/Fields/FieldsData\";\nimport {memo} from \"react\";\nimport useProcessingAgreementsData from \"../ProcessingAgreements/ProcessingAgreementsData\";\nimport useMenu from \"../../Menu/MenuData\";\n\nconst ProcessorElement = (props) => {\n\tconst {updateField, setChangedField, saveFields} = useFields();\n\tconst {documentsLoaded, documents} = useProcessingAgreementsData();\n\tconst {selectedMainMenuItem} = useMenu();\n\n\tconst onChangeHandler = (e, id) => {\n\t\tlet processors = [...props.field.value];\n\t\tif ( !Array.isArray(processors) ) {\n\t\t\tprocessors = [];\n\t\t}\n\n\t\t//update processor with index props.index\n\t\tlet currentProcessor = {...processors[props.index]};\n\t\tcurrentProcessor[id] = e.target.value;\n\t\tprocessors[props.index] = currentProcessor;\n\t\tupdateField(props.field.id, processors);\n\t\tsetChangedField(props.field.id, processors);\n\t}\n\n\tconst onDeleteHandler = async (e) => {\n\t\tlet processors = props.field.value;\n\t\tif ( !Array.isArray(processors) ) {\n\t\t\tprocessors = [];\n\t\t}\n\t\tlet processorsCopy = [...processors];\n\t\tif ( processorsCopy.hasOwnProperty(props.index) ) {\n\t\t\tprocessorsCopy.splice(props.index, 1);\n\t\t}\n\t\tupdateField(props.field.id, processorsCopy);\n\t\tsetChangedField(props.field.id, processorsCopy);\n\t\tawait saveFields( selectedMainMenuItem, false, false );\n\t}\n\tlet processingAgreements = documentsLoaded ? [...documents] : [];\n\tprocessingAgreements.push({id:-1, title:__('A Processing Agreement outside Complianz Privacy Suite', 'complianz-gdpr'),region:'',service:'',date:''});\n\n\tconst Details = (processor) => {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div className=\"cmplz-details-row\">\n\t\t\t\t\t<label>{__(\"Name\", \"complianz-gdpr\")}</label>\n\t\t\t\t\t<input onChange={ ( e ) => onChangeHandler(e, 'name') } type=\"text\" placeholder={__(\"Name\", \"complianz-gdpr\")} value={processor.name} />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"cmplz-details-row\">\n\t\t\t\t\t<label>{__(\"Country\", \"complianz-gdpr\")}</label>\n\t\t\t\t\t<input onChange={ ( e ) => onChangeHandler(e, 'country') } type=\"text\" placeholder={__(\"Country\", \"complianz-gdpr\")}  value={processor.country} />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"cmplz-details-row\">\n\t\t\t\t\t<label>{__(\"Purpose\", \"complianz-gdpr\")}</label>\n\t\t\t\t\t<input onChange={ ( e ) => onChangeHandler(e, 'purpose') } type=\"text\" placeholder={__(\"Purpose\", \"complianz-gdpr\")}  value={processor.purpose} />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"cmplz-details-row\">\n\t\t\t\t\t<label>{__(\"Data\", \"complianz-gdpr\")}</label>\n\t\t\t\t\t<input onChange={ ( e ) => onChangeHandler(e, 'data') } type=\"text\" placeholder={__(\"Data\", \"complianz-gdpr\")}  value={processor.data} />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"cmplz-details-row\">\n\t\t\t\t\t<label>{__(\"Processing Agreement\", \"complianz-gdpr\")}</label>\n\t\t\t\t\t{documentsLoaded &&\n\t\t\t\t\t\t<select onChange={ ( e ) => onChangeHandler(e, 'processing_agreement') } value={processor.processing_agreement}>\n\t\t\t\t\t\t\t<option value=\"0\">{__(\"Select an option\", \"complianz-gdpr\")}</option>\n\t\t\t\t\t\t\t{processingAgreements.map((processingAgreement, i) =>\n\t\t\t\t\t\t\t\t<option key={i} value={processingAgreement.id}>{processingAgreement.title}</option>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t}\n\t\t\t\t\t{!documentsLoaded &&\n\t\t\t\t\t\t<div className=\"cmplz-documents-loader\">\n\t\t\t\t\t\t\t<div><Icon name = \"loading\" color = 'grey' /></div><div>{__(\"Loading...\", \"complianz-gdpr\")}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"cmplz-details-row__buttons\">\n\t\t\t\t\t<button className=\"button button-default cmplz-reset-button\" onClick={ ( e ) => onDeleteHandler(e) }>{__(\"Delete\", \"complianz-gdpr\")}</button>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n\n\t//ensure defaults\n\tlet processor = {...props.processor};\n\n\tif (!processor.name) processor.name = '';\n\tif (!processor.purpose) processor.purpose = '';\n\tif (!processor.country) processor.country = '';\n\tif (!processor.processing_agreement) processor.processing_agreement = 0;\n\tif (!processor.data) processor.data = '';\n\treturn (\n\t\t<><Panel summary={processor.name} details={Details(processor)}/></>\n\t);\n}\nexport default memo(ProcessorElement);\n"],"names":["Icon","Panel","props","createElement","Fragment","className","key","id","style","summary","comment","icons","name","size","details","create","produce","cmplz_api","updateFieldsListWithConditions","useProcessingAgreementsData","set","get","documentsLoaded","region","fileName","serviceName","fetching","updating","loadingFields","documents","regions","fields","editDocumentId","resetEditDocumentId","editDocument","e","preventDefault","doAction","then","response","file_name","catch","error","console","setRegion","setServiceName","updateField","value","found","index","state","forEach","fieldItem","i","newFields","save","postId","post_id","fetchData","deleteDocuments","ids","filter","document","includes","data","fetchFields","__","useFields","memo","useMenu","ProcessorElement","setChangedField","saveFields","selectedMainMenuItem","onChangeHandler","processors","field","Array","isArray","currentProcessor","target","onDeleteHandler","processorsCopy","hasOwnProperty","splice","processingAgreements","push","title","service","date","Details","processor","onChange","type","placeholder","country","purpose","processing_agreement","map","processingAgreement","color","onClick"],"sourceRoot":""}