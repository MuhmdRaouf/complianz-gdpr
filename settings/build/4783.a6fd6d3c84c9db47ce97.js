"use strict";(self.webpackChunkcomplianz_gdpr=self.webpackChunkcomplianz_gdpr||[]).push([[4783,881,2588,5294,5671,849],{80881:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var a=n(69307),r=n(99196),c=n(48399),l=n(56293),s=n(82485),o=n(55609);const i=(0,r.memo)((e=>{let{type:t="action",style:n="tertiary",label:i,onClick:d,href:u="",target:p="",disabled:m,action:h,field:f,children:b}=e;if(!i&&!b)return null;const g=(f&&f.button_text?f.button_text:i)||b,{fetchFieldsData:E,showSavedSettingsNotice:_}=(0,l.default)(),{selectedSubMenuItem:k}=(0,s.default)(),[v,y]=(0,r.useState)(!1),w=`button cmplz-button button--${n} button-${t}`,N=async e=>{await c.doAction(f.action,{}).then((e=>{e.success&&(E(k),_(e.message))}))},z=f&&f.warn?f.warn:"";return"action"===t?(0,a.createElement)(a.Fragment,null,(0,a.createElement)(o.__experimentalConfirmDialog,{isOpen:v,onConfirm:async()=>{y(!1),await N()},onCancel:()=>{y(!1)}},z),(0,a.createElement)("button",{className:w,onClick:async e=>{"action"===t&&d?d(e):"action"===t&&h?f&&f.warn?y(!0):await N():window.location.href=f.url},disabled:m},g)):"link"===t?(0,a.createElement)("a",{className:w,href:u,target:p},g):void 0}))},382:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var a=n(69307),r=n(87462),c=n(99196),l=n(28771),s=n(25360),o=n(36206),i=n(77342),d=n(57898),u=n(7546),p=n(29115),m=n(75320);const h="Checkbox",[f,b]=(0,s.b)(h),[g,E]=f(h),_=(0,c.forwardRef)(((e,t)=>{const{__scopeCheckbox:n,name:a,checked:s,defaultChecked:d,required:u,disabled:p,value:h="on",onCheckedChange:f,...b}=e,[E,_]=(0,c.useState)(null),w=(0,l.e)(t,(e=>_(e))),N=(0,c.useRef)(!1),z=!E||Boolean(E.closest("form")),[C=!1,S]=(0,i.T)({prop:s,defaultProp:d,onChange:f}),x=(0,c.useRef)(C);return(0,c.useEffect)((()=>{const e=null==E?void 0:E.form;if(e){const t=()=>S(x.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}}),[E,S]),(0,c.createElement)(g,{scope:n,state:C,disabled:p},(0,c.createElement)(m.WV.button,(0,r.Z)({type:"button",role:"checkbox","aria-checked":v(C)?"mixed":C,"aria-required":u,"data-state":y(C),"data-disabled":p?"":void 0,disabled:p,value:h},b,{ref:w,onKeyDown:(0,o.M)(e.onKeyDown,(e=>{"Enter"===e.key&&e.preventDefault()})),onClick:(0,o.M)(e.onClick,(e=>{S((e=>!!v(e)||!e)),z&&(N.current=e.isPropagationStopped(),N.current||e.stopPropagation())}))})),z&&(0,c.createElement)(k,{control:E,bubbles:!N.current,name:a,value:h,checked:C,required:u,disabled:p,style:{transform:"translateX(-100%)"}}))})),k=e=>{const{control:t,checked:n,bubbles:a=!0,...l}=e,s=(0,c.useRef)(null),o=(0,d.D)(n),i=(0,u.t)(t);return(0,c.useEffect)((()=>{const e=s.current,t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"checked").set;if(o!==n&&r){const t=new Event("click",{bubbles:a});e.indeterminate=v(n),r.call(e,!v(n)&&n),e.dispatchEvent(t)}}),[o,n,a]),(0,c.createElement)("input",(0,r.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:!v(n)&&n},l,{tabIndex:-1,ref:s,style:{...e.style,...i,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function v(e){return"indeterminate"===e}function y(e){return v(e)?"indeterminate":e?"checked":"unchecked"}const w=_,N=(0,c.forwardRef)(((e,t)=>{const{__scopeCheckbox:n,forceMount:a,...l}=e,s=E("CheckboxIndicator",n);return(0,c.createElement)(p.z,{present:a||v(s.state)||!0===s.state},(0,c.createElement)(m.WV.span,(0,r.Z)({"data-state":y(s.state),"data-disabled":s.disabled?"":void 0},l,{ref:t,style:{pointerEvents:"none",...e.style}})))}));var z=n(65736),C=n(20384),S=n(80881);const x=(0,c.memo)((e=>{let{indeterminate:t,label:n,value:r,id:l,onChange:s,required:o,disabled:i,options:d={}}=e,u=r;Array.isArray(u)||(u=""===u?[]:[u]),t&&(r=!0);const p=u,[m,h]=(0,c.useState)(!1);let f=!1;Object.keys(d).length>10&&(f=!0);const b=e=>p.includes(e),g=()=>{h(!m)};let E=i&&!Array.isArray(i);return(0,a.createElement)("div",{className:"cmplz-checkbox-group"},Object.entries(d).map(((e,c)=>{let[u,h]=e;return(0,a.createElement)("div",{key:u,className:"cmplz-checkbox-group__item"+(!m&&c>10?" cmplz-hidden":"")},(0,a.createElement)(w,{className:"cmplz-checkbox-group__checkbox",id:l+"_"+u,checked:1===Object.keys(d).length?r:b(u),"aria-label":n,disabled:E||Array.isArray(i)&&i.includes(u),required:o,onCheckedChange:e=>((e,t)=>{if(1===Object.keys(d).length)s(!r);else{const e=p.includes(t)?p.filter((e=>e!==t)):[...p,t];s(e)}})(0,u)},(0,a.createElement)(N,{className:"cmplz-checkbox-group__indicator"},(0,a.createElement)(C.default,{name:t?"indeterminate":"check",size:14,color:"dark-blue"}))),(0,a.createElement)("label",{className:"cmplz-checkbox-group__label",htmlFor:l+"_"+u},h))})),!m&&f&&(0,a.createElement)(S.default,{onClick:g},(0,z.__)("Show more","complianz-gdpr")),m&&f&&(0,a.createElement)(S.default,{onClick:g},(0,z.__)("Show less","complianz-gdpr")))}))},32588:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var a=n(69307),r=n(99196),c=n(79552),l=n(20384),s=n(65736);const o=(0,r.memo)((e=>{let{value:t=!1,onChange:n,required:r,defaultValue:o,disabled:i,options:d={},canBeEmpty:u=!0,label:p,innerRef:m}=e;if(Array.isArray(d)){let e={};d.map((t=>{e[t.value]=t.label})),d=e}return u?d={0:(0,s.__)("Select an option","complianz-gdpr"),...d}:t||(t=Object.keys(d)[0]),(0,a.createElement)("div",{className:"cmplz-input-group cmplz-select-group",key:p},(0,a.createElement)(c.fC,{value:t,defaultValue:o,onValueChange:n,required:r,disabled:i&&!Array.isArray(i)},(0,a.createElement)(c.xz,{className:"cmplz-select-group__trigger"},(0,a.createElement)(c.B4,null),(0,a.createElement)(l.default,{name:"chevron-down"})),(0,a.createElement)(c.VY,{className:"cmplz-select-group__content",position:"popper"},(0,a.createElement)(c.u_,{className:"cmplz-select-group__scroll-button"},(0,a.createElement)(l.default,{name:"chevron-up"})),(0,a.createElement)(c.l_,{className:"cmplz-select-group__viewport"},(0,a.createElement)(c.ZA,null,Object.entries(d).map((e=>{let[t,n]=e;return(0,a.createElement)(c.ck,{disabled:Array.isArray(i)&&i.includes(t),className:"cmplz-select-group__item",key:t,value:t},(0,a.createElement)(c.eT,null,n))})))),(0,a.createElement)(c.$G,{className:"cmplz-select-group__scroll-button"},(0,a.createElement)(l.default,{name:"chevron-down"})))))}))},38857:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var a=n(69307),r=n(99196),c=n(87462),l=n(36206),s=n(28771),o=n(25360),i=n(77342),d=n(57898),u=n(7546),p=n(75320);const m="Switch",[h,f]=(0,o.b)(m),[b,g]=h(m),E=(0,r.forwardRef)(((e,t)=>{const{__scopeSwitch:n,name:a,checked:o,defaultChecked:d,required:u,disabled:m,value:h="on",onCheckedChange:f,...g}=e,[E,v]=(0,r.useState)(null),y=(0,s.e)(t,(e=>v(e))),w=(0,r.useRef)(!1),N=!E||Boolean(E.closest("form")),[z=!1,C]=(0,i.T)({prop:o,defaultProp:d,onChange:f});return(0,r.createElement)(b,{scope:n,checked:z,disabled:m},(0,r.createElement)(p.WV.button,(0,c.Z)({type:"button",role:"switch","aria-checked":z,"aria-required":u,"data-state":k(z),"data-disabled":m?"":void 0,disabled:m,value:h},g,{ref:y,onClick:(0,l.M)(e.onClick,(e=>{C((e=>!e)),N&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())}))})),N&&(0,r.createElement)(_,{control:E,bubbles:!w.current,name:a,value:h,checked:z,required:u,disabled:m,style:{transform:"translateX(-100%)"}}))})),_=e=>{const{control:t,checked:n,bubbles:a=!0,...l}=e,s=(0,r.useRef)(null),o=(0,d.D)(n),i=(0,u.t)(t);return(0,r.useEffect)((()=>{const e=s.current,t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"checked").set;if(o!==n&&r){const t=new Event("click",{bubbles:a});r.call(e,n),e.dispatchEvent(t)}}),[o,n,a]),(0,r.createElement)("input",(0,c.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:n},l,{tabIndex:-1,ref:s,style:{...e.style,...i,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function k(e){return e?"checked":"unchecked"}const v=E,y=(0,r.forwardRef)(((e,t)=>{const{__scopeSwitch:n,...a}=e,l=g("SwitchThumb",n);return(0,r.createElement)(p.WV.span,(0,c.Z)({"data-state":k(l.checked),"data-disabled":l.disabled?"":void 0},a,{ref:t}))})),w=(0,r.memo)((e=>{let{value:t,onChange:n,required:r,disabled:c,className:l,label:s}=e,o=t;return"0"!==t&&"1"!==t||(o="1"===t),(0,a.createElement)("div",{className:"cmplz-input-group cmplz-switch-group"},(0,a.createElement)(v,{className:"cmplz-switch-root "+l,checked:o,onCheckedChange:n,disabled:c,required:r},(0,a.createElement)(y,{className:"cmplz-switch-thumb"})))}))},65294:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var a=n(69307),r=n(99196);const c=(0,r.memo)((e=>{let{value:t,onChange:n,required:c,defaultValue:l,disabled:s,id:o,name:i,placeholder:d}=e;const u=o||i,[p,m]=(0,r.useState)("");return(0,r.useEffect)((()=>{m(t||"")}),[t]),(0,r.useEffect)((()=>{const e=setTimeout((()=>{n(p)}),500);return()=>{clearTimeout(e)}}),[p]),(0,a.createElement)("div",{className:"cmplz-input-group cmplz-text-input-group"},(0,a.createElement)("input",{type:"text",id:u,name:i,value:p,onChange:e=>(e=>{m(e)})(e.target.value),required:c,disabled:s,className:"cmplz-text-input-group__input",placeholder:d}))}))},85671:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var a=n(30270),r=n(12902),c=n(48399);const l=(0,a.Ue)(((e,t)=>({integrationsLoaded:!1,fetching:!1,services:[],plugins:[],scripts:[],placeholders:[],blockedScripts:[],setScript:(t,n)=>{e((0,r.ZP)((e=>{if("block_script"===n){let n=e.blockedScripts;if(t.urls){for(const[e,a]of Object.entries(t.urls)){if(!a||0===a.length)continue;let e=!1;for(const[t,r]of Object.entries(n))a===t&&(e=!0);e||(n[a]=a)}e.blockedScripts=n}}const a=e.scripts[n].findIndex((e=>e.id===t.id));-1!==a&&(e.scripts[n][a]=t)})))},fetchIntegrationsData:async()=>{if(t().fetching)return;e({fetching:!0});const{services:n,plugins:a,scripts:r,placeholders:c,blocked_scripts:l}=await s();let o=r;o.block_script.forEach(((e,t)=>{e.id=t})),o.add_script.forEach(((e,t)=>{e.id=t})),o.whitelist_script.forEach(((e,t)=>{e.id=t})),e((()=>({integrationsLoaded:!0,services:n,plugins:a,scripts:o,fetching:!1,placeholders:c,blockedScripts:l})))},addScript:n=>{e({fetching:!0}),e((0,r.ZP)((e=>{e.scripts[n].push({name:"general",id:e.scripts[n].length,enable:!0})})));let a=t().scripts;return c.doAction("update_scripts",{scripts:a}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},saveScript:(n,a)=>{e({fetching:!0}),e((0,r.ZP)((e=>{const t=e.scripts[a].findIndex((e=>e.id===n.id));-1!==t&&(e.scripts[a][t]=n)})));let l=t().scripts;return c.doAction("update_scripts",{scripts:l}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},deleteScript:(n,a)=>{e({fetching:!0}),e((0,r.ZP)((e=>{const t=e.scripts[a].findIndex((e=>e.id===n.id));-1!==t&&e.scripts[a].splice(t,1)})));let l=t().scripts;return c.doAction("update_scripts",{scripts:l}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},updatePluginStatus:async(t,n)=>{e({fetching:!0}),e((0,r.ZP)((e=>{const a=e.plugins.findIndex((e=>e.id===t));-1!==a&&(e.plugins[a].enabled=n)})));const a=await c.doAction("update_plugin_status",{plugin:t,enabled:n}).then((e=>e)).catch((e=>{console.error(e)}));return e({fetching:!1}),a},updatePlaceholderStatus:async(t,n,a)=>{e({fetching:!0}),a&&e((0,r.ZP)((e=>{const a=e.plugins.findIndex((e=>e.id===t));-1!==a&&(e.plugins[a].placeholder=n?"enabled":"disabled")})));const l=await c.doAction("update_placeholder_status",{id:t,enabled:n}).then((e=>e)).catch((e=>{console.error(e)}));return e({fetching:!1}),l}}))),s=()=>c.doAction("get_integrations_data",{}).then((e=>e)).catch((e=>{console.error(e)}))},44783:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var a=n(69307),r=(n(38857),n(60849)),c=n(65294),l=n(32588),s=n(65736),o=n(85671),i=n(382);const d=e=>{const{setScript:t,fetching:n,placeholders:d}=(0,o.default)(),u=e.script,p=e.type,m=(n,a)=>{let r={...u};r[a]=n,t(r,e.type)};return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"cmplz-details-row cmplz-details-row__checkbox"},(0,a.createElement)("label",null,(0,s.__)("Placeholder","complianz-gdpr")),(0,a.createElement)(i.default,{id:u.id+"placeholder",disabled:n,value:u.enable_placeholder,onChange:e=>m(e,"enable_placeholder"),options:{placeholder:(0,s.__)("Enable placeholder","complianz-gdpr")}})),!!u.enable_placeholder&&(0,a.createElement)(a.Fragment,null,"block_script"===p&&(0,a.createElement)("div",{className:"cmplz-details-row cmplz-details-row__checkbox"},(0,a.createElement)(i.default,{id:u.id+"iframe",disabled:n,value:u.iframe||"",onChange:e=>m(e||"","iframe"),options:{iframe:(0,s.__)("The blocked content is an iframe","complianz-gdpr")}})),!u.iframe&&(0,a.createElement)("div",{className:"cmplz-details-row cmplz-details-row"},(0,a.createElement)("p",null,(0,s.__)("Enter the div class or ID that should be targeted.","complianz-gdpr"),(0,r.default)("https://complianz.io/integrating-plugins/#placeholder/")),(0,a.createElement)(c.default,{disabled:n,value:u.placeholder_class||"",onChange:e=>m(e||"","placeholder_class"),name:"placeholder_class",placeholder:(0,s.__)("Your CSS class","complianz-gdpr")})),(0,a.createElement)("div",{className:"cmplz-details-row cmplz-details-row__checkbox"},(0,a.createElement)(l.default,{disabled:n,value:u.placeholder?u.placeholder:"default",options:d,onChange:e=>m(e||"default","placeholder")}))))}},60849:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var a=n(69307),r=n(65736),c=n(99950);const l=e=>(0,a.createElement)(a.Fragment,null," ",(0,a.createElement)(c.default,{url:e,text:(0,r.__)("For more information, please read this %sarticle%s.","complianz-gdpr")})," ")},29115:(e,t,n)=>{n.d(t,{z:()=>s});var a=n(99196),r=n(91850),c=n(28771),l=n(9981);const s=e=>{const{present:t,children:n}=e,s=function(e){const[t,n]=(0,a.useState)(),c=(0,a.useRef)({}),s=(0,a.useRef)(e),i=(0,a.useRef)("none"),d=e?"mounted":"unmounted",[u,p]=function(e,t){return(0,a.useReducer)(((e,n)=>{const a=t[e][n];return null!=a?a:e}),e)}(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return(0,a.useEffect)((()=>{const e=o(c.current);i.current="mounted"===u?e:"none"}),[u]),(0,l.b)((()=>{const t=c.current,n=s.current;if(n!==e){const a=i.current,r=o(t);e?p("MOUNT"):"none"===r||"none"===(null==t?void 0:t.display)?p("UNMOUNT"):p(n&&a!==r?"ANIMATION_OUT":"UNMOUNT"),s.current=e}}),[e,p]),(0,l.b)((()=>{if(t){const e=e=>{const n=o(c.current).includes(e.animationName);e.target===t&&n&&(0,r.flushSync)((()=>p("ANIMATION_END")))},n=e=>{e.target===t&&(i.current=o(c.current))};return t.addEventListener("animationstart",n),t.addEventListener("animationcancel",e),t.addEventListener("animationend",e),()=>{t.removeEventListener("animationstart",n),t.removeEventListener("animationcancel",e),t.removeEventListener("animationend",e)}}p("ANIMATION_END")}),[t,p]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:(0,a.useCallback)((e=>{e&&(c.current=getComputedStyle(e)),n(e)}),[])}}(t),i="function"==typeof n?n({present:s.isPresent}):a.Children.only(n),d=(0,c.e)(s.ref,i.ref);return"function"==typeof n||s.isPresent?(0,a.cloneElement)(i,{ref:d}):null};function o(e){return(null==e?void 0:e.animationName)||"none"}s.displayName="Presence"}}]);